var f = null;
function h(a) {
  return function(b) {
    this[a] = b
  }
}
function s(a) {
  this.C = {ui:s.sf, swfPath:"lib/", preferredFrameRate:60, fpsInterval:500, showDisplay:!0, emulateSound:!1, sampleRate:44100, CPU_FREQ_NTSC:1789772.5, CPU_FREQ_PAL:1773447.4};
  if(typeof a != "undefined") {
    for(var b in this.C) {
      typeof a[b] != "undefined" && (this.C[b] = a[b])
    }
  }
  this.ib = 1E3 / this.C.preferredFrameRate;
  this.ui = new this.C.ui(this);
  this.f = new s.Ka(this);
  this.j = new s.O(this);
  this.u = new s.N(this);
  this.h = f;
  this.Wb = new s.vb;
  this.ui.updateStatus("Ready to load a ROM.")
}
s.VERSION = "<%= version %>";
s.prototype = {kb:!1, Sb:0, xd:!0, ac:f, reset:function() {
  this.h !== f && this.h.reset();
  this.f.reset();
  this.j.reset();
  this.u.reset()
}, start:function() {
  var a = this;
  if(this.c !== f && this.c.eb) {
    if(!this.kb) {
      this.kb = !0, this.sg = setInterval(function() {
        a.frame()
      }, this.ib / 2), this.Se(), this.Dd(), this.fpsInterval = setInterval(function() {
        a.Dd()
      }, this.C.fpsInterval)
    }
  }else {
    this.ui.updateStatus("There is no ROM loaded, or it is invalid.")
  }
}, frame:function() {
  this.j.nh();
  var a = 0, b = this.C.emulateSound, c = this.f, e = this.j, g = this.u;
  a:for(;;) {
    c.cyclesToHalt === 0 ? (a = c.og(), b && g.ld(a), a *= 3) : c.cyclesToHalt > 8 ? (a = 24, b && g.ld(8), c.cyclesToHalt -= 8) : (a = c.cyclesToHalt * 3, b && g.ld(c.cyclesToHalt), c.cyclesToHalt = 0);
    for(;a > 0;--a) {
      e.curX === e.ma && e.f_spVisibility === 1 && e.scanline - 21 === e.na && e.fc(e.re, !0);
      if(e.requestEndFrame && (--e.nmiCounter, e.nmiCounter === 0)) {
        e.requestEndFrame = !1;
        e.oh();
        break a
      }
      ++e.curX;
      if(e.curX === 341) {
        e.curX = 0, e.rg()
      }
    }
  }
  if(this.xd && this.vd) {
    for(;+new Date - this.vd < this.ib;) {
    }
  }
  ++this.Sb;
  this.vd = +new Date
}, Dd:function() {
  var a = +new Date, b = "Running";
  this.ud && (b += ": " + (this.Sb / ((a - this.ud) / 1E3)).toFixed(2) + " FPS");
  this.ui.updateStatus(b);
  this.Sb = 0;
  this.ud = a
}, stop:function() {
  clearInterval(this.sg);
  clearInterval(this.fpsInterval);
  this.kb = !1
}, Oe:function() {
  this.ac !== f && this.Jc(this.ac)
}, Jc:function(a) {
  this.kb && this.stop();
  this.ui.updateStatus("Loading ROM...");
  this.c = new s.pe(this);
  this.c.load(a);
  if(this.c.eb) {
    this.reset();
    this.h = this.c.ig();
    if(!this.h) {
      return
    }
    this.h.Ab();
    this.j.Eb(this.c.zg());
    this.ac = a;
    this.ui.updateStatus("Successfully loaded. Ready to be started.")
  }else {
    this.ui.updateStatus("Invalid ROM!")
  }
  return this.c.eb
}, Se:function() {
  this.ud = f;
  this.Sb = 0
}, bh:function(a) {
  this.C.preferredFrameRate = a;
  this.ib = 1E3 / a;
  this.u.Kh(this.C.sampleRate, !1)
}, dh:function(a) {
  this.xd = a;
  this.vd = f
}, toJSON:function() {
  return{romData:this.ac, cpu:this.f.toJSON(), mmap:this.h.toJSON(), ppu:this.j.toJSON()}
}, t:function(a) {
  this.Jc(a.romData);
  this.f.t(a.cpu);
  this.h.t(a.mmap);
  this.j.t(a.ppu)
}};
s.da = {yb:function(a, b, c, e, g) {
  for(var d = 0;d < g;++d) {
    c[e + d] = a[b + d]
  }
}, Bh:function(a) {
  for(var b = Array(a.length), c = 0;c < a.length;++c) {
    b[c] = a[c]
  }
  return b
}, t:function(a, b) {
  for(var c in a.JSON_PROPERTIES) {
    a.JSON_PROPERTIES.hasOwnProperty(c) && (a[c] = b[a.JSON_PROPERTIES[c]])
  }
}, toJSON:function(a) {
  var b = {}, c;
  for(c in a.JSON_PROPERTIES) {
    a.JSON_PROPERTIES.hasOwnProperty(c) && (b[a.JSON_PROPERTIES[c]] = a[c])
  }
  return b
}, Kg:function() {
  return/msie/i.test(navigator.userAgent) && !/opera/i.test(navigator.userAgent)
}};
s.Ka = function(a) {
  this.a = a;
  this.irqType = this.irqRequested = this.hg = this.cyclesToHalt = this.Bb = this.F_BRK_NEW = this.F_BRK = this.F_NOTUSED_NEW = this.F_NOTUSED = this.F_ZERO = this.F_SIGN = this.F_OVERFLOW = this.F_INTERRUPT_NEW = this.F_INTERRUPT = this.F_DECIMAL = this.F_CARRY = this.REG_STATUS = this.REG_PC_NEW = this.REG_PC = this.REG_SP = this.REG_Y = this.REG_X = this.REG_ACC = this.mem = f;
  this.reset()
};
s.Ka.prototype = {ed:0, bg:1, oc:2, reset:function() {
  this.mem = Array(65536);
  for(var a = 0;a < 8192;++a) {
    this.mem[a] = 255
  }
  for(var b = 0;b < 4;++b) {
    a = b * 2048, this.mem[a + 8] = 247, this.mem[a + 9] = 239, this.mem[a + 10] = 223, this.mem[a + 15] = 191
  }
  for(a = 8193;a < this.mem.length;++a) {
    this.mem[a] = 0
  }
  this.REG_Y = this.REG_X = this.REG_ACC = 0;
  this.REG_SP = 511;
  this.REG_PC_NEW = this.REG_PC = 32767;
  this.REG_STATUS = 40;
  this.gh(40);
  this.F_DECIMAL = this.F_CARRY = 0;
  this.F_INTERRUPT_NEW = this.F_INTERRUPT = 1;
  this.F_SIGN = this.F_OVERFLOW = 0;
  this.F_BRK_NEW = this.F_BRK = this.F_NOTUSED_NEW = this.F_NOTUSED = this.F_ZERO = 1;
  this.Bb = (new s.Ka.ne).Bb;
  this.cyclesToHalt = 0;
  this.irqRequested = this.hg = !1;
  this.irqType = f
}, og:function() {
  var a, b;
  if(this.irqRequested) {
    a = this.F_CARRY | (this.F_ZERO === 0 ? 1 : 0) << 1 | this.F_INTERRUPT << 2 | this.F_DECIMAL << 3 | this.F_BRK << 4 | this.F_NOTUSED << 5 | this.F_OVERFLOW << 6 | this.F_SIGN << 7;
    this.REG_PC_NEW = this.REG_PC;
    this.F_INTERRUPT_NEW = this.F_INTERRUPT;
    switch(this.irqType) {
      case 0:
        if(this.F_INTERRUPT != 0) {
          break
        }
        this.jg(a);
        break;
      case 1:
        this.kg(a);
        break;
      case 2:
        this.lg()
    }
    this.REG_PC = this.REG_PC_NEW;
    this.F_INTERRUPT = this.F_INTERRUPT_NEW;
    this.F_BRK = this.F_BRK_NEW;
    this.irqRequested = !1
  }
  a = this.Bb[this.a.h.load(this.REG_PC + 1)];
  var c = a >> 24;
  b = 0;
  var e = a >> 8 & 255, g = this.REG_PC;
  this.REG_PC += a >> 16 & 255;
  var d = 0;
  switch(e) {
    case 0:
      d = this.load(g + 2);
      break;
    case 1:
      d = this.load(g + 2);
      d += d < 128 ? this.REG_PC : this.REG_PC - 256;
      break;
    case 3:
      d = this.lb(g + 2);
      break;
    case 4:
      d = this.REG_ACC;
      break;
    case 5:
      d = this.REG_PC;
      break;
    case 6:
      d = this.load(g + 2) + this.REG_X & 255;
      break;
    case 7:
      d = this.load(g + 2) + this.REG_Y & 255;
      break;
    case 8:
      d = this.lb(g + 2);
      (d & 65280) != (d + this.REG_X & 65280) && (b = 1);
      d += this.REG_X;
      break;
    case 9:
      d = this.lb(g + 2);
      (d & 65280) != (d + this.REG_Y & 65280) && (b = 1);
      d += this.REG_Y;
      break;
    case 10:
      d = this.load(g + 2);
      (d & 65280) != (d + this.REG_X & 65280) && (b = 1);
      d += this.REG_X;
      d &= 255;
      d = this.lb(d);
      break;
    case 11:
      d = this.lb(this.load(g + 2));
      (d & 65280) != (d + this.REG_Y & 65280) && (b = 1);
      d += this.REG_Y;
      break;
    case 12:
      d = this.lb(g + 2), d = d < 8191 ? this.mem[d] + (this.mem[d & 65280 | (d & 255) + 1 & 255] << 8) : this.a.h.load(d) + (this.a.h.load(d & 65280 | (d & 255) + 1 & 255) << 8)
  }
  d &= 65535;
  switch(a & 255) {
    case 0:
      a = this.REG_ACC + this.load(d) + this.F_CARRY;
      this.F_OVERFLOW = ((this.REG_ACC ^ this.load(d)) & 128) == 0 && ((this.REG_ACC ^ a) & 128) != 0 ? 1 : 0;
      this.F_CARRY = a > 255 ? 1 : 0;
      this.F_SIGN = a >> 7 & 1;
      this.F_ZERO = a & 255;
      this.REG_ACC = a & 255;
      c += b;
      break;
    case 1:
      this.REG_ACC &= this.load(d);
      this.F_SIGN = this.REG_ACC >> 7 & 1;
      this.F_ZERO = this.REG_ACC;
      e != 11 && (c += b);
      break;
    case 2:
      e == 4 ? (this.F_CARRY = this.REG_ACC >> 7 & 1, this.REG_ACC = this.REG_ACC << 1 & 255, this.F_SIGN = this.REG_ACC >> 7 & 1, this.F_ZERO = this.REG_ACC) : (a = this.load(d), this.F_CARRY = a >> 7 & 1, a = a << 1 & 255, this.F_SIGN = a >> 7 & 1, this.F_ZERO = a, this.write(d, a));
      break;
    case 3:
      if(this.F_CARRY == 0) {
        c += (g & 65280) != (d & 65280) ? 2 : 1, this.REG_PC = d
      }
      break;
    case 4:
      if(this.F_CARRY == 1) {
        c += (g & 65280) != (d & 65280) ? 2 : 1, this.REG_PC = d
      }
      break;
    case 5:
      if(this.F_ZERO == 0) {
        c += (g & 65280) != (d & 65280) ? 2 : 1, this.REG_PC = d
      }
      break;
    case 6:
      a = this.load(d);
      this.F_SIGN = a >> 7 & 1;
      this.F_OVERFLOW = a >> 6 & 1;
      a &= this.REG_ACC;
      this.F_ZERO = a;
      break;
    case 7:
      if(this.F_SIGN == 1) {
        ++c, this.REG_PC = d
      }
      break;
    case 8:
      if(this.F_ZERO != 0) {
        c += (g & 65280) != (d & 65280) ? 2 : 1, this.REG_PC = d
      }
      break;
    case 9:
      if(this.F_SIGN == 0) {
        c += (g & 65280) != (d & 65280) ? 2 : 1, this.REG_PC = d
      }
      break;
    case 10:
      this.REG_PC += 2;
      this.push(this.REG_PC >> 8 & 255);
      this.push(this.REG_PC & 255);
      this.F_BRK = 1;
      this.push(this.F_CARRY | (this.F_ZERO == 0 ? 1 : 0) << 1 | this.F_INTERRUPT << 2 | this.F_DECIMAL << 3 | this.F_BRK << 4 | this.F_NOTUSED << 5 | this.F_OVERFLOW << 6 | this.F_SIGN << 7);
      this.F_INTERRUPT = 1;
      this.REG_PC = this.lb(65534);
      --this.REG_PC;
      break;
    case 11:
      if(this.F_OVERFLOW == 0) {
        c += (g & 65280) != (d & 65280) ? 2 : 1, this.REG_PC = d
      }
      break;
    case 12:
      if(this.F_OVERFLOW == 1) {
        c += (g & 65280) != (d & 65280) ? 2 : 1, this.REG_PC = d
      }
      break;
    case 13:
      this.F_CARRY = 0;
      break;
    case 14:
      this.F_DECIMAL = 0;
      break;
    case 15:
      this.F_INTERRUPT = 0;
      break;
    case 16:
      this.F_OVERFLOW = 0;
      break;
    case 17:
      a = this.REG_ACC - this.load(d);
      this.F_CARRY = a >= 0 ? 1 : 0;
      this.F_SIGN = a >> 7 & 1;
      this.F_ZERO = a & 255;
      c += b;
      break;
    case 18:
      a = this.REG_X - this.load(d);
      this.F_CARRY = a >= 0 ? 1 : 0;
      this.F_SIGN = a >> 7 & 1;
      this.F_ZERO = a & 255;
      break;
    case 19:
      a = this.REG_Y - this.load(d);
      this.F_CARRY = a >= 0 ? 1 : 0;
      this.F_SIGN = a >> 7 & 1;
      this.F_ZERO = a & 255;
      break;
    case 20:
      a = this.load(d) - 1 & 255;
      this.F_SIGN = a >> 7 & 1;
      this.F_ZERO = a;
      this.write(d, a);
      break;
    case 21:
      this.REG_X = this.REG_X - 1 & 255;
      this.F_SIGN = this.REG_X >> 7 & 1;
      this.F_ZERO = this.REG_X;
      break;
    case 22:
      this.REG_Y = this.REG_Y - 1 & 255;
      this.F_SIGN = this.REG_Y >> 7 & 1;
      this.F_ZERO = this.REG_Y;
      break;
    case 23:
      this.REG_ACC = (this.load(d) ^ this.REG_ACC) & 255;
      this.F_SIGN = this.REG_ACC >> 7 & 1;
      this.F_ZERO = this.REG_ACC;
      c += b;
      break;
    case 24:
      a = this.load(d) + 1 & 255;
      this.F_SIGN = a >> 7 & 1;
      this.F_ZERO = a;
      this.write(d, a & 255);
      break;
    case 25:
      this.REG_X = this.REG_X + 1 & 255;
      this.F_SIGN = this.REG_X >> 7 & 1;
      this.F_ZERO = this.REG_X;
      break;
    case 26:
      ++this.REG_Y;
      this.REG_Y &= 255;
      this.F_SIGN = this.REG_Y >> 7 & 1;
      this.F_ZERO = this.REG_Y;
      break;
    case 27:
      this.REG_PC = d - 1;
      break;
    case 28:
      this.push(this.REG_PC >> 8 & 255);
      this.push(this.REG_PC & 255);
      this.REG_PC = d - 1;
      break;
    case 29:
      this.REG_ACC = this.load(d);
      this.F_SIGN = this.REG_ACC >> 7 & 1;
      this.F_ZERO = this.REG_ACC;
      c += b;
      break;
    case 30:
      this.REG_X = this.load(d);
      this.F_SIGN = this.REG_X >> 7 & 1;
      this.F_ZERO = this.REG_X;
      c += b;
      break;
    case 31:
      this.REG_Y = this.load(d);
      this.F_SIGN = this.REG_Y >> 7 & 1;
      this.F_ZERO = this.REG_Y;
      c += b;
      break;
    case 32:
      e == 4 ? (a = this.REG_ACC & 255, this.F_CARRY = a & 1, a >>= 1, this.REG_ACC = a) : (a = this.load(d) & 255, this.F_CARRY = a & 1, a >>= 1, this.write(d, a));
      this.F_SIGN = 0;
      this.F_ZERO = a;
      break;
    case 33:
      break;
    case 34:
      a = (this.load(d) | this.REG_ACC) & 255;
      this.F_SIGN = a >> 7 & 1;
      this.REG_ACC = this.F_ZERO = a;
      e != 11 && (c += b);
      break;
    case 35:
      this.push(this.REG_ACC);
      break;
    case 36:
      this.F_BRK = 1;
      this.push(this.F_CARRY | (this.F_ZERO == 0 ? 1 : 0) << 1 | this.F_INTERRUPT << 2 | this.F_DECIMAL << 3 | this.F_BRK << 4 | this.F_NOTUSED << 5 | this.F_OVERFLOW << 6 | this.F_SIGN << 7);
      break;
    case 37:
      this.REG_ACC = this.qb();
      this.F_SIGN = this.REG_ACC >> 7 & 1;
      this.F_ZERO = this.REG_ACC;
      break;
    case 38:
      a = this.qb();
      this.F_CARRY = a & 1;
      this.F_ZERO = (a >> 1 & 1) == 1 ? 0 : 1;
      this.F_INTERRUPT = a >> 2 & 1;
      this.F_DECIMAL = a >> 3 & 1;
      this.F_BRK = a >> 4 & 1;
      this.F_NOTUSED = a >> 5 & 1;
      this.F_OVERFLOW = a >> 6 & 1;
      this.F_SIGN = a >> 7 & 1;
      this.F_NOTUSED = 1;
      break;
    case 39:
      e == 4 ? (a = this.REG_ACC, b = this.F_CARRY, this.F_CARRY = a >> 7 & 1, this.REG_ACC = a = (a << 1 & 255) + b) : (a = this.load(d), b = this.F_CARRY, this.F_CARRY = a >> 7 & 1, a = (a << 1 & 255) + b, this.write(d, a));
      this.F_SIGN = a >> 7 & 1;
      this.F_ZERO = a;
      break;
    case 40:
      e == 4 ? (b = this.F_CARRY << 7, this.F_CARRY = this.REG_ACC & 1, this.REG_ACC = a = (this.REG_ACC >> 1) + b) : (a = this.load(d), b = this.F_CARRY << 7, this.F_CARRY = a & 1, a = (a >> 1) + b, this.write(d, a));
      this.F_SIGN = a >> 7 & 1;
      this.F_ZERO = a;
      break;
    case 41:
      a = this.qb();
      this.F_CARRY = a & 1;
      this.F_ZERO = (a >> 1 & 1) == 0 ? 1 : 0;
      this.F_INTERRUPT = a >> 2 & 1;
      this.F_DECIMAL = a >> 3 & 1;
      this.F_BRK = a >> 4 & 1;
      this.F_NOTUSED = a >> 5 & 1;
      this.F_OVERFLOW = a >> 6 & 1;
      this.F_SIGN = a >> 7 & 1;
      this.REG_PC = this.qb();
      this.REG_PC += this.qb() << 8;
      if(this.REG_PC == 65535) {
        return
      }
      --this.REG_PC;
      this.F_NOTUSED = 1;
      break;
    case 42:
      this.REG_PC = this.qb();
      this.REG_PC += this.qb() << 8;
      if(this.REG_PC == 65535) {
        return
      }
      break;
    case 43:
      a = this.REG_ACC - this.load(d) - (1 - this.F_CARRY);
      this.F_SIGN = a >> 7 & 1;
      this.F_ZERO = a & 255;
      this.F_OVERFLOW = ((this.REG_ACC ^ a) & 128) != 0 && ((this.REG_ACC ^ this.load(d)) & 128) != 0 ? 1 : 0;
      this.F_CARRY = a < 0 ? 0 : 1;
      this.REG_ACC = a & 255;
      e != 11 && (c += b);
      break;
    case 44:
      this.F_CARRY = 1;
      break;
    case 45:
      this.F_DECIMAL = 1;
      break;
    case 46:
      this.F_INTERRUPT = 1;
      break;
    case 47:
      this.write(d, this.REG_ACC);
      break;
    case 48:
      this.write(d, this.REG_X);
      break;
    case 49:
      this.write(d, this.REG_Y);
      break;
    case 50:
      this.REG_X = this.REG_ACC;
      this.F_SIGN = this.REG_ACC >> 7 & 1;
      this.F_ZERO = this.REG_ACC;
      break;
    case 51:
      this.REG_Y = this.REG_ACC;
      this.F_SIGN = this.REG_ACC >> 7 & 1;
      this.F_ZERO = this.REG_ACC;
      break;
    case 52:
      this.REG_X = this.REG_SP - 256;
      this.F_SIGN = this.REG_SP >> 7 & 1;
      this.F_ZERO = this.REG_X;
      break;
    case 53:
      this.REG_ACC = this.REG_X;
      this.F_SIGN = this.REG_X >> 7 & 1;
      this.F_ZERO = this.REG_X;
      break;
    case 54:
      this.REG_SP = this.REG_X + 256;
      this.mh();
      break;
    case 55:
      this.REG_ACC = this.REG_Y;
      this.F_SIGN = this.REG_Y >> 7 & 1;
      this.F_ZERO = this.REG_Y;
      break;
    default:
      this.a.stop(), this.a.Ch = "Game crashed, invalid opcode at address $" + g.toString(16)
  }
  return c
}, load:function(a) {
  return a < 8192 ? this.mem[a & 2047] : this.a.h.load(a)
}, lb:function(a) {
  return a < 8191 ? this.mem[a & 2047] | this.mem[a + 1 & 2047] << 8 : this.a.h.load(a) | this.a.h.load(a + 1) << 8
}, write:function(a, b) {
  a < 8192 ? this.mem[a & 2047] = b : this.a.h.write(a, b)
}, sb:function(a) {
  if(!(this.irqRequested && a == this.ed)) {
    this.irqRequested = !0, this.irqType = a
  }
}, push:function(a) {
  this.a.h.write(this.REG_SP, a);
  --this.REG_SP;
  this.REG_SP = 256 | this.REG_SP & 255
}, mh:function() {
  this.REG_SP = 256 | this.REG_SP & 255
}, qb:function() {
  ++this.REG_SP;
  this.REG_SP = 256 | this.REG_SP & 255;
  return this.a.h.load(this.REG_SP)
}, ze:function(a) {
  this.cyclesToHalt += a
}, kg:function(a) {
  if((this.a.h.load(8192) & 128) != 0) {
    ++this.REG_PC_NEW, this.push(this.REG_PC_NEW >> 8 & 255), this.push(this.REG_PC_NEW & 255), this.push(a), this.REG_PC_NEW = this.a.h.load(65530) | this.a.h.load(65531) << 8, --this.REG_PC_NEW
  }
}, lg:function() {
  this.REG_PC_NEW = this.a.h.load(65532) | this.a.h.load(65533) << 8;
  --this.REG_PC_NEW
}, jg:function(a) {
  ++this.REG_PC_NEW;
  this.push(this.REG_PC_NEW >> 8 & 255);
  this.push(this.REG_PC_NEW & 255);
  this.push(a);
  this.F_INTERRUPT_NEW = 1;
  this.F_BRK_NEW = 0;
  this.REG_PC_NEW = this.a.h.load(65534) | this.a.h.load(65535) << 8;
  --this.REG_PC_NEW
}, gh:function(a) {
  this.F_CARRY = a & 1;
  this.F_ZERO = a >> 1 & 1;
  this.F_INTERRUPT = a >> 2 & 1;
  this.F_DECIMAL = a >> 3 & 1;
  this.F_BRK = a >> 4 & 1;
  this.F_NOTUSED = a >> 5 & 1;
  this.F_OVERFLOW = a >> 6 & 1;
  this.F_SIGN = a >> 7 & 1
}, JSON_PROPERTIES:{mem:"mem", cyclesToHalt:"cyclesToHalt", irqRequested:"irqRequested", irqType:"irqType", REG_ACC:"REG_ACC", REG_X:"REG_X", REG_Y:"REG_Y", REG_SP:"REG_SP", REG_PC:"REG_PC", REG_PC_NEW:"REG_PC_NEW", REG_STATUS:"REG_STATUS", F_CARRY:"F_CARRY", F_DECIMAL:"F_DECIMAL", F_INTERRUPT:"F_INTERRUPT", F_INTERRUPT_NEW:"F_INTERRUPT_NEW", F_OVERFLOW:"F_OVERFLOW", F_SIGN:"F_SIGN", F_ZERO:"F_ZERO", F_NOTUSED:"F_NOTUSED", F_NOTUSED_NEW:"F_NOTUSED_NEW", F_BRK:"F_BRK", F_BRK_NEW:"F_BRK_NEW"}, toJSON:function() {
  return s.da.toJSON(this)
}, t:function(a) {
  s.da.t(this, a)
}};
s.Ka.ne = function() {
  this.Bb = Array(256);
  for(var a = 0;a < 256;++a) {
    this.Bb[a] = 255
  }
  this.b(this.La, 105, this.ca, 2, 2);
  this.b(this.La, 101, this.q, 2, 3);
  this.b(this.La, 117, this.H, 2, 4);
  this.b(this.La, 109, this.o, 3, 4);
  this.b(this.La, 125, this.M, 3, 4);
  this.b(this.La, 121, this.wa, 3, 4);
  this.b(this.La, 97, this.Ia, 2, 6);
  this.b(this.La, 113, this.Ha, 2, 5);
  this.b(this.Ma, 41, this.ca, 2, 2);
  this.b(this.Ma, 37, this.q, 2, 3);
  this.b(this.Ma, 53, this.H, 2, 4);
  this.b(this.Ma, 45, this.o, 3, 4);
  this.b(this.Ma, 61, this.M, 3, 4);
  this.b(this.Ma, 57, this.wa, 3, 4);
  this.b(this.Ma, 33, this.Ia, 2, 6);
  this.b(this.Ma, 49, this.Ha, 2, 5);
  this.b(this.Jb, 10, this.kc, 1, 2);
  this.b(this.Jb, 6, this.q, 2, 5);
  this.b(this.Jb, 22, this.H, 2, 6);
  this.b(this.Jb, 14, this.o, 3, 6);
  this.b(this.Jb, 30, this.M, 3, 7);
  this.b(this.uf, 144, this.Ja, 2, 2);
  this.b(this.vf, 176, this.Ja, 2, 2);
  this.b(this.wf, 240, this.Ja, 2, 2);
  this.b(this.Zd, 36, this.q, 2, 3);
  this.b(this.Zd, 44, this.o, 3, 4);
  this.b(this.xf, 48, this.Ja, 2, 2);
  this.b(this.yf, 208, this.Ja, 2, 2);
  this.b(this.zf, 16, this.Ja, 2, 2);
  this.b(this.Af, 0, this.n, 1, 7);
  this.b(this.Bf, 80, this.Ja, 2, 2);
  this.b(this.Cf, 112, this.Ja, 2, 2);
  this.b(this.Df, 24, this.n, 1, 2);
  this.b(this.Ef, 216, this.n, 1, 2);
  this.b(this.Ff, 88, this.n, 1, 2);
  this.b(this.Gf, 184, this.n, 1, 2);
  this.b(this.Na, 201, this.ca, 2, 2);
  this.b(this.Na, 197, this.q, 2, 3);
  this.b(this.Na, 213, this.H, 2, 4);
  this.b(this.Na, 205, this.o, 3, 4);
  this.b(this.Na, 221, this.M, 3, 4);
  this.b(this.Na, 217, this.wa, 3, 4);
  this.b(this.Na, 193, this.Ia, 2, 6);
  this.b(this.Na, 209, this.Ha, 2, 5);
  this.b(this.ad, 224, this.ca, 2, 2);
  this.b(this.ad, 228, this.q, 2, 3);
  this.b(this.ad, 236, this.o, 3, 4);
  this.b(this.bd, 192, this.ca, 2, 2);
  this.b(this.bd, 196, this.q, 2, 3);
  this.b(this.bd, 204, this.o, 3, 4);
  this.b(this.mc, 198, this.q, 2, 5);
  this.b(this.mc, 214, this.H, 2, 6);
  this.b(this.mc, 206, this.o, 3, 6);
  this.b(this.mc, 222, this.M, 3, 7);
  this.b(this.Hf, 202, this.n, 1, 2);
  this.b(this.If, 136, this.n, 1, 2);
  this.b(this.Oa, 73, this.ca, 2, 2);
  this.b(this.Oa, 69, this.q, 2, 3);
  this.b(this.Oa, 85, this.H, 2, 4);
  this.b(this.Oa, 77, this.o, 3, 4);
  this.b(this.Oa, 93, this.M, 3, 4);
  this.b(this.Oa, 89, this.wa, 3, 4);
  this.b(this.Oa, 65, this.Ia, 2, 6);
  this.b(this.Oa, 81, this.Ha, 2, 5);
  this.b(this.nc, 230, this.q, 2, 5);
  this.b(this.nc, 246, this.H, 2, 6);
  this.b(this.nc, 238, this.o, 3, 6);
  this.b(this.nc, 254, this.M, 3, 7);
  this.b(this.Jf, 232, this.n, 1, 2);
  this.b(this.Kf, 200, this.n, 1, 2);
  this.b(this.$d, 76, this.o, 3, 3);
  this.b(this.$d, 108, this.jf, 3, 5);
  this.b(this.Lf, 32, this.o, 3, 6);
  this.b(this.Pa, 169, this.ca, 2, 2);
  this.b(this.Pa, 165, this.q, 2, 3);
  this.b(this.Pa, 181, this.H, 2, 4);
  this.b(this.Pa, 173, this.o, 3, 4);
  this.b(this.Pa, 189, this.M, 3, 4);
  this.b(this.Pa, 185, this.wa, 3, 4);
  this.b(this.Pa, 161, this.Ia, 2, 6);
  this.b(this.Pa, 177, this.Ha, 2, 5);
  this.b(this.Kb, 162, this.ca, 2, 2);
  this.b(this.Kb, 166, this.q, 2, 3);
  this.b(this.Kb, 182, this.Vd, 2, 4);
  this.b(this.Kb, 174, this.o, 3, 4);
  this.b(this.Kb, 190, this.wa, 3, 4);
  this.b(this.Lb, 160, this.ca, 2, 2);
  this.b(this.Lb, 164, this.q, 2, 3);
  this.b(this.Lb, 180, this.H, 2, 4);
  this.b(this.Lb, 172, this.o, 3, 4);
  this.b(this.Lb, 188, this.M, 3, 4);
  this.b(this.Mb, 74, this.kc, 1, 2);
  this.b(this.Mb, 70, this.q, 2, 5);
  this.b(this.Mb, 86, this.H, 2, 6);
  this.b(this.Mb, 78, this.o, 3, 6);
  this.b(this.Mb, 94, this.M, 3, 7);
  this.b(this.Mf, 234, this.n, 1, 2);
  this.b(this.Qa, 9, this.ca, 2, 2);
  this.b(this.Qa, 5, this.q, 2, 3);
  this.b(this.Qa, 21, this.H, 2, 4);
  this.b(this.Qa, 13, this.o, 3, 4);
  this.b(this.Qa, 29, this.M, 3, 4);
  this.b(this.Qa, 25, this.wa, 3, 4);
  this.b(this.Qa, 1, this.Ia, 2, 6);
  this.b(this.Qa, 17, this.Ha, 2, 5);
  this.b(this.Nf, 72, this.n, 1, 3);
  this.b(this.Of, 8, this.n, 1, 3);
  this.b(this.Pf, 104, this.n, 1, 4);
  this.b(this.Qf, 40, this.n, 1, 4);
  this.b(this.Nb, 42, this.kc, 1, 2);
  this.b(this.Nb, 38, this.q, 2, 5);
  this.b(this.Nb, 54, this.H, 2, 6);
  this.b(this.Nb, 46, this.o, 3, 6);
  this.b(this.Nb, 62, this.M, 3, 7);
  this.b(this.Ob, 106, this.kc, 1, 2);
  this.b(this.Ob, 102, this.q, 2, 5);
  this.b(this.Ob, 118, this.H, 2, 6);
  this.b(this.Ob, 110, this.o, 3, 6);
  this.b(this.Ob, 126, this.M, 3, 7);
  this.b(this.Rf, 64, this.n, 1, 6);
  this.b(this.Sf, 96, this.n, 1, 6);
  this.b(this.Ra, 233, this.ca, 2, 2);
  this.b(this.Ra, 229, this.q, 2, 3);
  this.b(this.Ra, 245, this.H, 2, 4);
  this.b(this.Ra, 237, this.o, 3, 4);
  this.b(this.Ra, 253, this.M, 3, 4);
  this.b(this.Ra, 249, this.wa, 3, 4);
  this.b(this.Ra, 225, this.Ia, 2, 6);
  this.b(this.Ra, 241, this.Ha, 2, 5);
  this.b(this.Tf, 56, this.n, 1, 2);
  this.b(this.Uf, 248, this.n, 1, 2);
  this.b(this.Vf, 120, this.n, 1, 2);
  this.b(this.fb, 133, this.q, 2, 3);
  this.b(this.fb, 149, this.H, 2, 4);
  this.b(this.fb, 141, this.o, 3, 4);
  this.b(this.fb, 157, this.M, 3, 5);
  this.b(this.fb, 153, this.wa, 3, 5);
  this.b(this.fb, 129, this.Ia, 2, 6);
  this.b(this.fb, 145, this.Ha, 2, 6);
  this.b(this.cd, 134, this.q, 2, 3);
  this.b(this.cd, 150, this.Vd, 2, 4);
  this.b(this.cd, 142, this.o, 3, 4);
  this.b(this.dd, 132, this.q, 2, 3);
  this.b(this.dd, 148, this.H, 2, 4);
  this.b(this.dd, 140, this.o, 3, 4);
  this.b(this.Wf, 170, this.n, 1, 2);
  this.b(this.Xf, 168, this.n, 1, 2);
  this.b(this.Yf, 186, this.n, 1, 2);
  this.b(this.Zf, 138, this.n, 1, 2);
  this.b(this.$f, 154, this.n, 1, 2);
  this.b(this.ag, 152, this.n, 1, 2);
  this.Dh = [7, 6, 2, 8, 3, 3, 5, 5, 3, 2, 2, 2, 4, 4, 6, 6, 2, 5, 2, 8, 4, 4, 6, 6, 2, 4, 2, 7, 4, 4, 7, 7, 6, 6, 2, 8, 3, 3, 5, 5, 4, 2, 2, 2, 4, 4, 6, 6, 2, 5, 2, 8, 4, 4, 6, 6, 2, 4, 2, 7, 4, 4, 7, 7, 6, 6, 2, 8, 3, 3, 5, 5, 3, 2, 2, 2, 3, 4, 6, 6, 2, 5, 2, 8, 4, 4, 6, 6, 2, 4, 2, 7, 4, 4, 7, 7, 6, 6, 2, 8, 3, 3, 5, 5, 4, 2, 2, 2, 5, 4, 6, 6, 2, 5, 2, 8, 4, 4, 6, 6, 2, 4, 2, 7, 4, 4, 7, 7, 2, 6, 2, 6, 3, 3, 3, 3, 2, 2, 2, 2, 4, 4, 4, 4, 2, 6, 2, 6, 4, 4, 4, 4, 2, 5, 2, 5, 5, 5, 5, 5, 2, 6, 2, 
  6, 3, 3, 3, 3, 2, 2, 2, 2, 4, 4, 4, 4, 2, 5, 2, 5, 4, 4, 4, 4, 2, 4, 2, 4, 4, 4, 4, 4, 2, 6, 2, 8, 3, 3, 5, 5, 2, 2, 2, 2, 4, 4, 6, 6, 2, 5, 2, 8, 4, 4, 6, 6, 2, 4, 2, 7, 4, 4, 7, 7, 2, 6, 3, 8, 3, 3, 5, 5, 2, 2, 2, 2, 4, 4, 6, 6, 2, 5, 2, 8, 4, 4, 6, 6, 2, 4, 2, 7, 4, 4, 7, 7];
  this.d = Array(56);
  this.d[0] = "ADC";
  this.d[1] = "AND";
  this.d[2] = "ASL";
  this.d[3] = "BCC";
  this.d[4] = "BCS";
  this.d[5] = "BEQ";
  this.d[6] = "BIT";
  this.d[7] = "BMI";
  this.d[8] = "BNE";
  this.d[9] = "BPL";
  this.d[10] = "BRK";
  this.d[11] = "BVC";
  this.d[12] = "BVS";
  this.d[13] = "CLC";
  this.d[14] = "CLD";
  this.d[15] = "CLI";
  this.d[16] = "CLV";
  this.d[17] = "CMP";
  this.d[18] = "CPX";
  this.d[19] = "CPY";
  this.d[20] = "DEC";
  this.d[21] = "DEX";
  this.d[22] = "DEY";
  this.d[23] = "EOR";
  this.d[24] = "INC";
  this.d[25] = "INX";
  this.d[26] = "INY";
  this.d[27] = "JMP";
  this.d[28] = "JSR";
  this.d[29] = "LDA";
  this.d[30] = "LDX";
  this.d[31] = "LDY";
  this.d[32] = "LSR";
  this.d[33] = "NOP";
  this.d[34] = "ORA";
  this.d[35] = "PHA";
  this.d[36] = "PHP";
  this.d[37] = "PLA";
  this.d[38] = "PLP";
  this.d[39] = "ROL";
  this.d[40] = "ROR";
  this.d[41] = "RTI";
  this.d[42] = "RTS";
  this.d[43] = "SBC";
  this.d[44] = "SEC";
  this.d[45] = "SED";
  this.d[46] = "SEI";
  this.d[47] = "STA";
  this.d[48] = "STX";
  this.d[49] = "STY";
  this.d[50] = "TAX";
  this.d[51] = "TAY";
  this.d[52] = "TSX";
  this.d[53] = "TXA";
  this.d[54] = "TXS";
  this.d[55] = "TYA";
  this.zh = ["Zero Page           ", "Relative            ", "Implied             ", "Absolute            ", "Accumulator         ", "Immediate           ", "Zero Page,X         ", "Zero Page,Y         ", "Absolute,X          ", "Absolute,Y          ", "Preindexed Indirect ", "Postindexed Indirect", "Indirect Absolute   "]
};
s.Ka.ne.prototype = {La:0, Ma:1, Jb:2, uf:3, vf:4, wf:5, Zd:6, xf:7, yf:8, zf:9, Af:10, Bf:11, Cf:12, Df:13, Ef:14, Ff:15, Gf:16, Na:17, ad:18, bd:19, mc:20, Hf:21, If:22, Oa:23, nc:24, Jf:25, Kf:26, $d:27, Lf:28, Pa:29, Kb:30, Lb:31, Mb:32, Mf:33, Qa:34, Nf:35, Of:36, Pf:37, Qf:38, Nb:39, Ob:40, Rf:41, Sf:42, Ra:43, Tf:44, Uf:45, Vf:46, fb:47, cd:48, dd:49, Wf:50, Xf:51, Yf:52, Zf:53, $f:54, ag:55, q:0, Ja:1, n:2, o:3, kc:4, ca:5, H:6, Vd:7, M:8, wa:9, Ia:10, Ha:11, jf:12, b:function(a, b, c, e, 
g) {
  this.Bb[b] = a & 255 | (c & 255) << 8 | (e & 255) << 16 | (g & 255) << 24
}};
s.vb = function() {
  var a;
  this.K = {ae:0, be:1, fe:2, ge:3, he:4, ce:5, de:6, ee:7};
  this.pa = Array(8);
  for(a = 0;a < this.pa.length;++a) {
    this.pa[a] = 64
  }
  this.qa = Array(8);
  for(a = 0;a < this.qa.length;++a) {
    this.qa[a] = 64
  }
};
s.vb.prototype = {We:function(a, b) {
  switch(a) {
    case 88:
      this.pa[this.K.ae] = b;
      break;
    case 90:
      this.pa[this.K.be] = b;
      break;
    case 17:
      this.pa[this.K.fe] = b;
      break;
    case 13:
      this.pa[this.K.ge] = b;
      break;
    case 38:
      this.pa[this.K.he] = b;
      break;
    case 40:
      this.pa[this.K.ce] = b;
      break;
    case 37:
      this.pa[this.K.de] = b;
      break;
    case 39:
      this.pa[this.K.ee] = b;
      break;
    case 103:
      this.qa[this.K.ae] = b;
      break;
    case 105:
      this.qa[this.K.be] = b;
      break;
    case 99:
      this.qa[this.K.fe] = b;
      break;
    case 97:
      this.qa[this.K.ge] = b;
      break;
    case 104:
      this.qa[this.K.he] = b;
      break;
    case 98:
      this.qa[this.K.ce] = b;
      break;
    case 100:
      this.qa[this.K.de] = b;
      break;
    case 102:
      this.qa[this.K.ee] = b;
      break;
    default:
      return!0
  }
  return!1
}, Be:function(a) {
  !this.We(a.keyCode, 65) && a.preventDefault && a.preventDefault()
}, De:function(a) {
  !this.We(a.keyCode, 64) && a.preventDefault && a.preventDefault()
}, Ce:function(a) {
  a.preventDefault()
}};
s.g = {};
s.g[0] = h("a");
s.g[0].prototype = {reset:function() {
  this.Fc = this.Xa = this.Wa = 0;
  this.Kc = !1;
  this.Mc = this.Lc = f
}, write:function(a, b) {
  a < 8192 ? this.a.f.mem[a & 2047] = b : a > 16407 ? this.a.f.mem[a] = b : a > 8199 && a < 16384 ? this.Ne(8192 + (a & 7), b) : this.Ne(a, b)
}, load:function(a) {
  a &= 65535;
  return a > 16407 ? this.a.f.mem[a] : a >= 8192 ? this.Wg(a) : this.a.f.mem[a & 2047]
}, Wg:function(a) {
  switch(a >> 12) {
    case 2:
    ;
    case 3:
      switch(a & 7) {
        case 0:
          return this.a.f.mem[8192];
        case 1:
          return this.a.f.mem[8193];
        case 2:
          return this.a.j.Vg();
        case 3:
          return 0;
        case 4:
          return this.a.j.kh();
        case 5:
          return 0;
        case 6:
          return 0;
        case 7:
          return this.a.j.th()
      }
      break;
    case 4:
      switch(a - 16405) {
        case 0:
          return this.a.u.Ke(a);
        case 1:
          return this.Lg();
        case 2:
          if(this.Kc) {
            for(var a = Math.max(0, this.Lc - 4), b = Math.min(256, this.Lc + 4), c = Math.min(240, this.Mc + 4), e = 0, g = Math.max(0, this.Mc - 4);g < c;++g) {
              for(var d = a;d < b;++d) {
                if(this.a.j.buffer[(g << 8) + d] == 16777215) {
                  e |= 8;
                  console.debug("Clicked on white!");
                  break
                }
              }
            }
            e |= this.Kc ? 16 : 0;
            return(this.Ae() | e) & 65535
          }else {
            return this.Ae()
          }
      }
  }
  return 0
}, Ne:function(a, b) {
  switch(a) {
    case 8192:
      this.a.f.mem[a] = b;
      this.a.j.df(b);
      break;
    case 8193:
      this.a.f.mem[a] = b;
      this.a.j.ef(b);
      break;
    case 8195:
      this.a.j.xh(b);
      break;
    case 8196:
      this.a.j.lh(b);
      break;
    case 8197:
      this.a.j.ah(b);
      break;
    case 8198:
      this.a.j.yh(b);
      break;
    case 8199:
      this.a.j.uh(b);
      break;
    case 16404:
      this.a.j.jh(b);
      break;
    case 16405:
      this.a.u.F(a, b);
      break;
    case 16406:
      if(b === 0 && this.Fc === 1) {
        this.Xa = this.Wa = 0
      }
      this.Fc = b;
      break;
    case 16407:
      this.a.u.F(a, b);
      break;
    default:
      a >= 16384 && a <= 16407 && this.a.u.F(a, b)
  }
}, Lg:function() {
  var a;
  switch(this.Wa) {
    case 0:
    ;
    case 1:
    ;
    case 2:
    ;
    case 3:
    ;
    case 4:
    ;
    case 5:
    ;
    case 6:
    ;
    case 7:
      a = this.a.Wb.pa[this.Wa];
      break;
    case 8:
    ;
    case 9:
    ;
    case 10:
    ;
    case 11:
    ;
    case 12:
    ;
    case 13:
    ;
    case 14:
    ;
    case 15:
    ;
    case 16:
    ;
    case 17:
    ;
    case 18:
      a = 0;
      break;
    case 19:
      a = 1;
      break;
    default:
      a = 0
  }
  ++this.Wa;
  if(this.Wa == 24) {
    this.Wa = 0
  }
  return a
}, Ae:function() {
  var a;
  switch(this.Xa) {
    case 0:
    ;
    case 1:
    ;
    case 2:
    ;
    case 3:
    ;
    case 4:
    ;
    case 5:
    ;
    case 6:
    ;
    case 7:
      a = this.a.Wb.qa[this.Xa];
      break;
    case 8:
    ;
    case 9:
    ;
    case 10:
    ;
    case 11:
    ;
    case 12:
    ;
    case 13:
    ;
    case 14:
    ;
    case 15:
    ;
    case 16:
    ;
    case 17:
    ;
    case 18:
      a = 0;
      break;
    case 19:
      a = 1;
      break;
    default:
      a = 0
  }
  ++this.Xa;
  if(this.Xa == 24) {
    this.Xa = 0
  }
  return a
}, Ab:function() {
  !this.a.c.eb || this.a.c.z < 1 ? alert("NoMapper: Invalid ROM! Unable to load.") : (this.Og(), this.Ic(), this.yd(), this.a.f.sb(this.a.f.oc))
}, Og:function() {
  this.a.c.z > 1 ? (this.V(0, 32768), this.V(1, 49152)) : (this.V(0, 32768), this.V(0, 49152))
}, Ic:function() {
  this.a.c.s > 0 && (this.a.c.s == 1 ? (this.sa(0, 0), this.sa(0, 4096)) : (this.sa(0, 0), this.sa(1, 4096)))
}, yd:function() {
  if(this.a.c.hd) {
    var a = this.a.c.hd;
    a !== f && a.length == 8192 && s.da.yb(a, 0, this.a.f.mem, 24576, 8192)
  }
}, V:function(a, b) {
  a %= this.a.c.z;
  s.da.yb(this.a.c.c[a], 0, this.a.f.mem, b, 16384)
}, sa:function(a, b) {
  this.a.c.s !== 0 && (this.a.j.Fa(), s.da.yb(this.a.c.Ga[a % this.a.c.s], 0, this.a.j.vramMem, b, 4096), s.da.yb(this.a.c.ub[a % this.a.c.s], 0, this.a.j.D, b >> 4, 256))
}, Mg:function(a, b) {
  this.V(a * 2 % this.a.c.z, b);
  this.V((a * 2 + 1) % this.a.c.z, b + 16384)
}, Fe:function(a, b) {
  this.a.c.s !== 0 && (this.a.j.Fa(), this.sa(a % this.a.c.s, b), this.sa((a + 1) % this.a.c.s, b + 4096))
}, L:function(a, b) {
  if(this.a.c.s !== 0) {
    this.a.j.Fa();
    var c = Math.floor(a / 4) % this.a.c.s;
    s.da.yb(this.a.c.Ga[c], 0, this.a.j.vramMem, a % 4 * 1024, 1024);
    for(var c = this.a.c.ub[c], e = b >> 4, g = 0;g < 64;++g) {
      this.a.j.D[e + g] = c[(a % 4 << 6) + g]
    }
  }
}, ga:function(a, b) {
  s.da.yb(this.a.c.c[Math.floor(a / 2) % this.a.c.z], a % 2 * 8192, this.a.f.mem, b, 8192)
}, toJSON:function() {
  return{joy1StrobeState:this.Wa, joy2StrobeState:this.Xa, joypadLastWrite:this.Fc}
}, t:function(a) {
  this.Wa = a.joy1StrobeState;
  this.Xa = a.joy2StrobeState;
  this.Fc = a.joypadLastWrite
}};
s.g[1] = h("a");
s.g[1].prototype = new s.g[0];
s.g[1].prototype.reset = function() {
  s.g[0].prototype.reset.apply(this);
  this.He = this.Ba = this.Za = this.rb = 0;
  this.$b = this.Zb = 1;
  this.Ue = this.cc = this.$a = this.Ib = 0
};
s.g[1].prototype.write = function(a, b) {
  if(a < 32768) {
    s.g[0].prototype.write.apply(this, arguments)
  }else {
    if((b & 128) !== 0) {
      if(this.rb = this.Za = 0, v(a) === 0) {
        this.$b = this.Zb = 1
      }
    }else {
      if(this.rb = this.rb & 255 - (1 << this.Za) | (b & 1) << this.Za, ++this.Za, this.Za == 5) {
        var c = this.rb, e;
        switch(v(a)) {
          case 0:
            e = c & 3;
            if(e !== this.Ba) {
              this.Ba = e, (this.Ba & 2) === 0 ? this.a.j.Eb(this.a.c.qe) : (this.Ba & 1) !== 0 ? this.a.j.Eb(this.a.c.lc) : this.a.j.Eb(this.a.c.pc)
            }
            this.Zb = c >> 2 & 1;
            this.$b = c >> 3 & 1;
            this.Ib = c >> 4 & 1;
            break;
          case 1:
            this.$a = c >> 4 & 1;
            this.a.c.s > 0 && (this.Ib === 0 ? this.$a === 0 ? this.Fe(c & 15, 0) : this.Fe(Math.floor(this.a.c.s / 2) + (c & 15), 0) : this.$a === 0 ? this.sa(c & 15, 0) : this.sa(Math.floor(this.a.c.s / 2) + (c & 15), 0));
            break;
          case 2:
            this.cc = c >> 4 & 1;
            this.a.c.s > 0 && this.Ib === 1 && (this.cc === 0 ? this.sa(c & 15, 4096) : this.sa(Math.floor(this.a.c.s / 2) + (c & 15), 4096));
            break;
          default:
            e = 0, this.a.c.z >= 32 ? this.Ib === 0 ? this.$a === 1 && (e = 16) : e = (this.$a | this.cc << 1) << 3 : this.a.c.z >= 16 && this.$a === 1 && (e = 8), this.$b === 0 ? this.Mg(e + (c & 15), 32768) : (c = e * 2 + (c & 15), this.Zb === 0 ? this.V(c, 49152) : this.V(c, 32768))
        }
        this.Za = this.rb = 0
      }
    }
  }
};
function v(a) {
  return a >= 32768 && a <= 40959 ? 0 : a >= 40960 && a <= 49151 ? 1 : a >= 49152 && a <= 57343 ? 2 : 3
}
s.g[1].prototype.Ab = function() {
  this.a.c.eb ? (this.V(0, 32768), this.V(this.a.c.z - 1, 49152), this.Ic(), this.yd(), this.a.f.sb(this.a.f.oc)) : alert("MMC1: Invalid ROM! Unable to load.")
};
s.g[1].prototype.toJSON = function() {
  var a = s.g[0].prototype.toJSON.apply(this);
  a.mirroring = this.Ba;
  a.oneScreenMirroring = this.He;
  a.prgSwitchingArea = this.Zb;
  a.prgSwitchingSize = this.$b;
  a.vromSwitchingSize = this.Ib;
  a.romSelectionReg0 = this.$a;
  a.romSelectionReg1 = this.cc;
  a.romBankSelect = this.Ue;
  a.regBuffer = this.rb;
  a.regBufferCounter = this.Za;
  return a
};
s.g[1].prototype.t = function(a) {
  s.g[0].prototype.t.apply(this, a);
  this.Ba = a.mirroring;
  this.He = a.oneScreenMirroring;
  this.Zb = a.prgSwitchingArea;
  this.$b = a.prgSwitchingSize;
  this.Ib = a.vromSwitchingSize;
  this.$a = a.romSelectionReg0;
  this.cc = a.romSelectionReg1;
  this.Ue = a.romBankSelect;
  this.rb = a.regBuffer;
  this.Za = a.regBufferCounter
};
s.g[2] = h("a");
s.g[2].prototype = new s.g[0];
s.g[2].prototype.write = function(a, b) {
  a < 32768 ? s.g[0].prototype.write.apply(this, arguments) : this.V(b, 32768)
};
s.g[2].prototype.Ab = function() {
  this.a.c.eb ? (this.V(0, 32768), this.V(this.a.c.z - 1, 49152), this.Ic(), this.a.f.sb(this.a.f.oc)) : alert("UNROM: Invalid ROM! Unable to load.")
};
s.g[4] = function(a) {
  this.a = a;
  this.of = 0;
  this.pf = 1;
  this.kf = 2;
  this.lf = 3;
  this.mf = 4;
  this.nf = 5;
  this.qf = 6;
  this.rf = 7;
  this.Ec = this.td = this.sd = this.Ie = this.xa = this.pb = this.vc = f;
  this.ob = !1
};
s.g[4].prototype = new s.g[0];
s.g[4].prototype.write = function(a, b) {
  if(a < 32768) {
    s.g[0].prototype.write.apply(this, arguments)
  }else {
    switch(a) {
      case 32768:
        this.vc = b & 7;
        var c = b >> 6 & 1;
        if(c != this.pb) {
          this.ob = !0
        }
        this.pb = c;
        this.xa = b >> 7 & 1;
        break;
      case 32769:
        c = b;
        switch(this.vc) {
          case this.of:
            this.xa === 0 ? (this.L(c, 0), this.L(c + 1, 1024)) : (this.L(c, 4096), this.L(c + 1, 5120));
            break;
          case this.pf:
            this.xa === 0 ? (this.L(c, 2048), this.L(c + 1, 3072)) : (this.L(c, 6144), this.L(c + 1, 7168));
            break;
          case this.kf:
            this.xa === 0 ? this.L(c, 4096) : this.L(c, 0);
            break;
          case this.lf:
            this.xa === 0 ? this.L(c, 5120) : this.L(c, 1024);
            break;
          case this.mf:
            this.xa === 0 ? this.L(c, 6144) : this.L(c, 2048);
            break;
          case this.nf:
            this.xa === 0 ? this.L(c, 7168) : this.L(c, 3072);
            break;
          case this.qf:
            if(this.ob) {
              this.pb === 0 ? this.ga((this.a.c.z - 1) * 2, 49152) : this.ga((this.a.c.z - 1) * 2, 32768), this.ob = !1
            }
            this.pb === 0 ? this.ga(c, 32768) : this.ga(c, 49152);
            break;
          case this.rf:
            if(this.ga(c, 40960), this.ob) {
              this.pb === 0 ? this.ga((this.a.c.z - 1) * 2, 49152) : this.ga((this.a.c.z - 1) * 2, 32768), this.ob = !1
            }
        }
        break;
      case 40960:
        (b & 1) !== 0 ? this.a.j.Eb(this.a.c.lc) : this.a.j.Eb(this.a.c.pc);
        break;
      case 49152:
        this.sd = b;
        break;
      case 49153:
        this.td = b;
        break;
      case 57344:
        this.Ec = 0;
        break;
      case 57345:
        this.Ec = 1
    }
  }
};
s.g[4].prototype.Ab = function() {
  this.a.c.eb ? (this.ga((this.a.c.z - 1) * 2, 49152), this.ga((this.a.c.z - 1) * 2 + 1, 57344), this.ga(0, 32768), this.ga(1, 40960), this.Ic(), this.yd(), this.a.f.sb(this.a.f.oc)) : alert("MMC3: Invalid ROM! Unable to load.")
};
s.g[4].prototype.toJSON = function() {
  var a = s.g[0].prototype.toJSON.apply(this);
  a.command = this.vc;
  a.prgAddressSelect = this.pb;
  a.chrAddressSelect = this.xa;
  a.pageNumber = this.Ie;
  a.irqCounter = this.sd;
  a.irqLatchValue = this.td;
  a.irqEnable = this.Ec;
  a.prgAddressChanged = this.ob;
  return a
};
s.g[4].prototype.t = function(a) {
  s.g[0].prototype.t.apply(this, a);
  this.vc = a.command;
  this.pb = a.prgAddressSelect;
  this.xa = a.chrAddressSelect;
  this.Ie = a.pageNumber;
  this.sd = a.irqCounter;
  this.td = a.irqLatchValue;
  this.Ec = a.irqEnable;
  this.ob = a.prgAddressChanged
};
s.N = function(a) {
  this.a = a;
  this.aa = new s.N.$c(this, !0);
  this.ba = new s.N.$c(this, !1);
  this.W = new s.N.Yd(this);
  this.ha = new s.N.Xd(this);
  this.Q = new s.N.Wd(this);
  this.Fh = f;
  this.Bc = 4;
  this.Vb = 2048;
  this.te = f;
  this.se = 8192;
  this.wb = 0;
  this.Ve = 44100;
  this.cb = this.bb = this.B = this.A = this.Ee = f;
  this.dc = Array(this.se * 2);
  this.Ub = !1;
  this.Eh = this.Tb = f;
  this.Dc = this.Jh = this.ph = !1;
  this.$g = this.Rc = this.ib = this.ec = this.Rb = this.Y = this.Xb = f;
  this.Ea = 0;
  this.P = this.ja = this.ta = this.la = this.ka = f;
  this.nd = this.we = this.Vc = this.Uc = this.Cd = this.Bd = 0;
  this.r = 256;
  this.Ad = this.zd = this.Ac = this.Ye = this.Ze = this.bf = this.af = this.$e = this.Md = this.Nd = this.Qd = this.Pd = this.Od = f;
  this.nb = [80, 170, 100, 150, 128];
  this.eh(this.nb);
  this.Hg();
  this.Gg();
  this.Ig();
  this.Fg();
  for(a = 0;a < 20;++a) {
    a === 16 ? this.F(16400, 16) : this.F(16384 + a, 0)
  }
  this.reset()
};
s.N.prototype = {reset:function() {
  this.Ve = this.a.C.sampleRate;
  this.Rc = Math.floor(1024 * this.a.C.CPU_FREQ_NTSC * this.a.C.Ug / (this.Ve * 60));
  this.ib = Math.floor(14915 * this.a.C.Ug / 60);
  this.wb = this.ec = 0;
  this.cf(0);
  this.$g = this.Rb = this.Y = this.Xb = 0;
  this.Vb = 2048;
  this.Dc = this.Ub = !1;
  this.Yg();
  this.aa.reset();
  this.ba.reset();
  this.W.reset();
  this.ha.reset();
  this.Q.reset();
  this.ja = this.ta = this.la = this.ka = this.P = this.wb = 0;
  this.Ub = !1;
  this.Bc = 4;
  this.te = 255;
  this.ph = !1;
  this.Vc = this.Uc = this.Cd = this.Bd = 0;
  this.zd = -5E5;
  this.Ad = 5E5
}, Ke:function() {
  var a = 0;
  a |= this.aa.Ua();
  a |= this.ba.Ua() << 1;
  a |= this.W.Ua() << 2;
  a |= this.ha.Ua() << 3;
  a |= this.Q.Ua() << 4;
  a |= (this.Tb && this.Ub ? 1 : 0) << 6;
  a |= this.Q.xg() << 7;
  this.Tb = !1;
  this.Q.jb = !1;
  return a & 65535
}, F:function(a, b) {
  if(a >= 16384 && a < 16388) {
    this.aa.F(a, b)
  }else {
    if(a >= 16388 && a < 16392) {
      this.ba.F(a, b)
    }else {
      if(a >= 16392 && a < 16396) {
        this.W.F(a, b)
      }else {
        if(a >= 16396 && a <= 16399) {
          this.ha.F(a, b)
        }else {
          if(a === 16400) {
            this.Q.F(a, b)
          }else {
            if(a === 16401) {
              this.Q.F(a, b)
            }else {
              if(a === 16402) {
                this.Q.F(a, b)
              }else {
                if(a === 16403) {
                  this.Q.F(a, b)
                }else {
                  if(a === 16405) {
                    this.cf(b);
                    if(b !== 0 && this.Vb > 0) {
                      this.Dc = !0
                    }
                    this.Q.F(a, b)
                  }else {
                    if(a === 16407) {
                      this.Rb = b >> 7 & 1, this.Xb = 0, this.Tb = !1, this.Ub = (b >> 6 & 1) === 0 ? !0 : !1, this.Rb === 0 ? this.Y = this.Bc = 4 : (this.Bc = 5, this.Y = 0, this.ye())
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}, Yg:function() {
  this.Y = this.Rb === 0 ? 4 : 0
}, cf:function(a) {
  this.te = a & 65535;
  this.aa.ab((a & 1) !== 0);
  this.ba.ab((a & 2) !== 0);
  this.W.ab((a & 4) !== 0);
  this.ha.ab((a & 8) !== 0);
  this.Q.ab((a & 16) !== 0)
}, ld:function(a) {
  if(this.Vb > 0 && this.Dc) {
    if(this.Vb -= a, this.Vb <= 0) {
      this.Dc = !1
    }
  }else {
    a += this.Ac;
    var b = this.Rc - this.ec;
    a << 10 > b ? (this.Ac = (a << 10) - b >> 10, a -= this.Ac) : this.Ac = 0;
    var c = this.Q, e = this.W, g = this.aa, d = this.ba, b = this.ha;
    if(c.isEnabled) {
      for(c.Tc -= a << 3;c.Tc <= 0 && c.zc > 0;) {
        c.Tc += c.zc, c.fg()
      }
    }
    if(e.i > 0) {
      for(e.w -= a;e.w <= 0;) {
        if(e.w += e.i + 1, e.zb > 0 && e.l > 0 && (++e.tb, e.tb &= 31, e.isEnabled)) {
          e.p = e.tb >= 16 ? e.tb & 15 : 15 - (e.tb & 15), e.p <<= 4
        }
      }
    }
    g.w -= a;
    g.w <= 0 && (g.w += g.i + 1 << 1, ++g.Gb, g.Gb &= 7, g.va());
    d.w -= a;
    d.w <= 0 && (d.w += d.i + 1 << 1, ++d.Gb, d.Gb &= 7, d.va());
    c = a;
    if(b.w - c > 0) {
      b.w -= c, b.P += c, b.qc += c * b.p
    }else {
      for(;--c > 0;) {
        if(--b.w <= 0 && b.i > 0) {
          b.gc <<= 1, b.ic = (b.gc << (b.Ed === 0 ? 1 : 6) ^ b.gc) & 32768, b.ic !== 0 ? (b.gc |= 1, b.Pc = 0, b.p = 0) : (b.Pc = 1, b.p = b.isEnabled && b.l > 0 ? b.r : 0), b.w += b.i
        }
        b.qc += b.p;
        ++b.P
      }
    }
    this.Ub && this.Tb && this.a.f.sb(this.a.f.ed);
    this.Xb += a << 1;
    this.Xb >= this.ib && (this.Xb -= this.ib, this.ye());
    this.eg(a);
    this.ec += a << 10;
    this.ec >= this.Rc && (this.Da(), this.ec -= this.Rc)
  }
}, eg:function(a) {
  if(this.W.Hd) {
    this.Ea = Math.floor((this.W.w << 4) / (this.W.i + 1));
    if(this.Ea > 16) {
      this.Ea = 16
    }
    if(this.W.tb >= 16) {
      this.Ea = 16 - this.Ea
    }
    this.Ea += this.W.p
  }
  a === 2 ? (this.ta += this.Ea << 1, this.ja += this.Q.Da << 1, this.ka += this.aa.p << 1, this.la += this.ba.p << 1, this.P += 2) : a === 4 ? (this.ta += this.Ea << 2, this.ja += this.Q.Da << 2, this.ka += this.aa.p << 2, this.la += this.ba.p << 2, this.P += 4) : (this.ta += a * this.Ea, this.ja += a * this.Q.Da, this.ka += a * this.aa.p, this.la += a * this.ba.p, this.P += a)
}, ye:function() {
  ++this.Y;
  if(this.Y >= this.Bc) {
    this.Y = 0
  }
  if(this.Y === 1 || this.Y === 3) {
    this.W.xb(), this.aa.xb(), this.ba.xb(), this.ha.xb(), this.aa.ue(), this.ba.ue()
  }
  this.Y >= 0 && this.Y < 4 && (this.aa.tc(), this.ba.tc(), this.ha.tc(), this.W.gg());
  if(this.Y === 3 && this.Rb === 0) {
    this.Tb = !0
  }
}, Da:function() {
  var a, b;
  this.P > 0 ? (this.ka <<= 4, this.ka = Math.floor(this.ka / this.P), this.la <<= 4, this.la = Math.floor(this.la / this.P), this.ta = Math.floor(this.ta / this.P), this.ja <<= 4, this.ja = Math.floor(this.ja / this.P), this.P = 0) : (this.ka = this.aa.p << 4, this.la = this.ba.p << 4, this.ta = this.W.p, this.ja = this.Q.Da << 4);
  var c = Math.floor((this.ha.qc << 4) / this.ha.P);
  this.ha.qc = c >> 4;
  this.ha.P = 1;
  a = this.ka * this.Od + this.la * this.Pd >> 8;
  b = 3 * this.ta * this.Qd + (c << 1) * this.Nd + this.ja * this.Md >> 8;
  a >= this.bb.length && (a = this.bb.length - 1);
  b >= this.cb.length && (b = this.cb.length - 1);
  var e = this.bb[a] + this.cb[b] - this.nd;
  a = this.ka * this.$e + this.la * this.af >> 8;
  b = 3 * this.ta * this.bf + (c << 1) * this.Ze + this.ja * this.Ye >> 8;
  a >= this.bb.length && (a = this.bb.length - 1);
  b >= this.cb.length && (b = this.cb.length - 1);
  a = this.bb[a] + this.cb[b] - this.nd;
  e -= this.Bd;
  this.Bd += e;
  this.Uc += e - (this.Uc >> 10);
  e = this.Uc;
  a -= this.Cd;
  this.Cd += a;
  this.Vc += a - (this.Vc >> 10);
  a = this.Vc;
  if(e > this.zd) {
    this.zd = e
  }
  if(e < this.Ad) {
    this.Ad = e
  }
  this.dc[++this.wb] = e;
  this.dc[++this.wb] = a;
  if(this.wb === this.dc.length) {
    this.a.ui.gf(this.dc), this.dc = Array(this.se * 2), this.wb = 0
  }
  this.ja = this.ta = this.la = this.ka = 0
}, qd:function(a) {
  return this.Ee[a >> 3]
}, vg:function(a) {
  if(a >= 0 && a < 16) {
    return this.A[a]
  }
  return 0
}, Ag:function(a) {
  if(a >= 0 && a < 16) {
    return this.B[a]
  }
  return 0
}, eh:function(a) {
  for(var b = 0;b < 5;++b) {
    this.nb[b] = a[b]
  }
  this.rh()
}, rh:function() {
  this.Od = this.nb[0] * this.r >> 8;
  this.Pd = this.nb[1] * this.r >> 8;
  this.Qd = this.nb[2] * this.r >> 8;
  this.Nd = this.nb[3] * this.r >> 8;
  this.Md = this.nb[4] * this.r >> 8;
  this.$e = this.r - this.Od;
  this.af = this.r - this.Pd;
  this.bf = this.r - this.Qd;
  this.Ze = this.r - this.Nd;
  this.Ye = this.r - this.Md
}, Hg:function() {
  this.Ee = [10, 254, 20, 2, 40, 4, 80, 6, 160, 8, 60, 10, 14, 12, 26, 14, 12, 16, 24, 18, 48, 20, 96, 22, 192, 24, 72, 26, 16, 28, 32, 30]
}, Gg:function() {
  this.A = Array(16);
  this.A[0] = 3424;
  this.A[1] = 3040;
  this.A[2] = 2720;
  this.A[3] = 2560;
  this.A[4] = 2288;
  this.A[5] = 2032;
  this.A[6] = 1808;
  this.A[7] = 1712;
  this.A[8] = 1520;
  this.A[9] = 1280;
  this.A[10] = 1136;
  this.A[11] = 1024;
  this.A[12] = 848;
  this.A[13] = 672;
  this.A[14] = 576;
  this.A[15] = 432
}, Ig:function() {
  this.B = Array(16);
  this.B[0] = 4;
  this.B[1] = 8;
  this.B[2] = 16;
  this.B[3] = 32;
  this.B[4] = 64;
  this.B[5] = 96;
  this.B[6] = 128;
  this.B[7] = 160;
  this.B[8] = 202;
  this.B[9] = 254;
  this.B[10] = 380;
  this.B[11] = 508;
  this.B[12] = 762;
  this.B[13] = 1016;
  this.B[14] = 2034;
  this.B[15] = 4068
}, Fg:function() {
  var a, b, c = 0, e = 0;
  this.bb = Array(512);
  this.cb = Array(3264);
  for(b = 0;b < 512;++b) {
    a = 95.52 / (8128 / (b / 16) + 100), a *= 0.98411, a *= 5E4, a = Math.floor(a), this.bb[b] = a, a > c && (c = a)
  }
  for(b = 0;b < 3264;++b) {
    a = 163.67 / (24329 / (b / 16) + 100), a *= 0.98411, a *= 5E4, a = Math.floor(a), this.cb[b] = a, a > e && (e = a)
  }
  this.we = c + e;
  this.nd = this.we / 2
}};
s.N.Wd = function(a) {
  this.u = a;
  this.le = 0;
  this.ke = 1;
  this.je = 2;
  this.rd = this.isEnabled = f;
  this.jb = !1;
  this.data = this.xc = this.Da = this.Me = this.Le = this.Tc = this.ia = this.Cb = this.Ya = this.Yb = this.Ta = this.yc = this.zc = this.Db = f;
  this.reset()
};
s.N.Wd.prototype = {fg:function() {
  if(this.rd) {
    (this.data & 1) === 0 ? this.Ta > 0 && --this.Ta : this.Ta < 63 && ++this.Ta, this.Da = this.isEnabled ? (this.Ta << 1) + this.xc : 0, this.data >>= 1
  }
  --this.yc;
  if(this.yc <= 0) {
    this.rd = !1, this.qg(), this.yc = 8
  }
  this.jb && this.u.a.f.sb(this.u.a.f.ed)
}, qg:function() {
  if(this.ia === 0 && this.Db === this.ke) {
    this.Ya = this.Yb, this.ia = this.Cb
  }
  if(this.ia > 0 && (this.Sg(), this.ia === 0 && this.Db === this.je)) {
    this.jb = !0
  }
}, Sg:function() {
  this.data = this.u.a.h.load(this.Ya);
  this.u.a.f.ze(4);
  --this.ia;
  ++this.Ya;
  if(this.Ya > 65535) {
    this.Ya = 32768
  }
  this.rd = !0
}, F:function(a, b) {
  if(a === 16400) {
    if(b >> 6 === 0) {
      this.Db = this.le
    }else {
      if((b >> 6 & 1) === 1) {
        this.Db = this.ke
      }else {
        if(b >> 6 === 2) {
          this.Db = this.je
        }
      }
    }
    if((b & 128) === 0) {
      this.jb = !1
    }
    this.zc = this.u.vg(b & 15)
  }else {
    if(a === 16401) {
      this.Ta = b >> 1 & 63, this.xc = b & 1, this.Da = (this.Ta << 1) + this.xc
    }else {
      if(a === 16402) {
        this.Ya = this.Yb = b << 6 | 49152, this.Le = b
      }else {
        if(a === 16403) {
          this.ia = this.Cb = (b << 4) + 1, this.Me = b
        }else {
          if(a === 16405) {
            (b >> 4 & 1) === 0 ? this.ia = 0 : (this.Ya = this.Yb, this.ia = this.Cb), this.jb = !1
          }
        }
      }
    }
  }
}, ab:function(a) {
  if(!this.isEnabled && a) {
    this.ia = this.Cb
  }
  this.isEnabled = a
}, Ua:function() {
  return this.ia === 0 || !this.isEnabled ? 0 : 1
}, xg:function() {
  return this.jb ? 1 : 0
}, reset:function() {
  this.jb = this.isEnabled = !1;
  this.Db = this.le;
  this.data = this.Me = this.Le = this.Tc = this.xc = this.Da = this.ia = this.Cb = this.Ya = this.Yb = this.Ta = this.yc = this.zc = 0
}};
s.N.Xd = function(a) {
  this.u = a;
  this.r = this.R = this.ya = this.U = this.i = this.w = this.l = this.hh = this.hb = this.fa = this.gb = this.za = this.isEnabled = f;
  this.gc = 16384;
  this.p = this.Ed = this.Pc = f;
  this.qc = 0;
  this.P = 1;
  this.ic = f;
  this.reset()
};
s.N.Xd.prototype = {reset:function() {
  this.i = this.w = 0;
  this.isEnabled = !1;
  this.l = 0;
  this.hh = this.gb = this.za = this.fa = !1;
  this.r = this.R = this.ya = this.U = 0;
  this.gc = 1;
  this.ic = this.p = this.Ed = this.Pc = 0
}, xb:function() {
  this.fa && this.l > 0 && (--this.l, this.l === 0 && this.va())
}, tc:function() {
  if(this.hb) {
    this.hb = !1, this.ya = this.U + 1, this.R = 15
  }else {
    if(--this.ya <= 0) {
      this.ya = this.U + 1, this.R > 0 ? --this.R : this.R = this.gb ? 15 : 0
    }
  }
  this.r = this.za ? this.U : this.R;
  this.va()
}, va:function() {
  if(this.isEnabled && this.l > 0) {
    this.p = this.Pc * this.r
  }
}, F:function(a, b) {
  if(a === 16396) {
    this.za = (b & 16) !== 0, this.U = b & 15, this.gb = (b & 32) !== 0, this.fa = (b & 32) === 0, this.r = this.za ? this.U : this.R
  }else {
    if(a === 16398) {
      this.i = this.u.Ag(b & 15), this.Ed = b >> 7
    }else {
      if(a === 16399) {
        this.l = this.u.qd(b & 248), this.hb = !0
      }
    }
  }
}, ab:function(a) {
  this.isEnabled = a;
  if(!a) {
    this.l = 0
  }
  this.va()
}, Ua:function() {
  return this.l === 0 || !this.isEnabled ? 0 : 1
}};
s.N.$c = function(a, b) {
  this.u = a;
  this.mg = [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1];
  this.Gh = [1, -1, 0, 0, 0, 0, 0, 0, 1, 0, -1, 0, 0, 0, 0, 0, 1, 0, 0, 0, -1, 0, 0, 0, -1, 0, 1, 0, 0, 0, 0, 0];
  this.Xe = b;
  this.sh = this.p = this.Lh = this.od = this.r = this.R = this.ya = this.U = this.Hb = this.Yc = this.Xc = this.Wc = this.Gb = this.l = this.i = this.w = this.Td = this.Sd = this.hb = this.gb = this.za = this.Rd = this.fa = this.isEnabled = f;
  this.reset()
};
s.N.$c.prototype = {reset:function() {
  this.sh = this.od = this.r = this.R = this.ya = this.U = this.Hb = this.Yc = this.Xc = this.Wc = this.Gb = this.l = this.i = this.w = 0;
  this.gb = this.za = this.Sd = this.Rd = this.fa = this.isEnabled = !1
}, xb:function() {
  this.fa && this.l > 0 && (--this.l, this.l === 0 && this.va())
}, tc:function() {
  if(this.hb) {
    this.hb = !1, this.ya = this.U + 1, this.R = 15
  }else {
    if(--this.ya <= 0) {
      this.ya = this.U + 1, this.R > 0 ? --this.R : this.R = this.gb ? 15 : 0
    }
  }
  this.r = this.za ? this.U : this.R;
  this.va()
}, ue:function() {
  if(--this.Wc <= 0 && (this.Wc = this.Xc + 1, this.Rd && this.Hb > 0 && this.i > 7)) {
    if(this.Sd = !1, this.Yc === 0) {
      if(this.i += this.i >> this.Hb, this.i > 4095) {
        this.i = 4095, this.Sd = !0
      }
    }else {
      this.i -= (this.i >> this.Hb) - (this.Xe ? 1 : 0)
    }
  }
  if(this.Td) {
    this.Td = !1, this.Wc = this.Xc + 1
  }
}, va:function() {
  this.p = this.isEnabled && this.l > 0 && this.i > 7 ? this.Yc === 0 && this.i + (this.i >> this.Hb) > 4095 ? 0 : this.r * this.mg[(this.od << 3) + this.Gb] : 0
}, F:function(a, b) {
  var c = this.Xe ? 0 : 4;
  if(a === 16384 + c) {
    this.za = (b & 16) !== 0, this.U = b & 15, this.gb = (b & 32) !== 0, this.od = b >> 6 & 3, this.fa = (b & 32) === 0, this.r = this.za ? this.U : this.R, this.va()
  }else {
    if(a === 16385 + c) {
      this.Rd = (b & 128) !== 0, this.Xc = b >> 4 & 7, this.Yc = b >> 3 & 1, this.Hb = b & 7, this.Td = !0
    }else {
      if(a === 16386 + c) {
        this.i &= 1792, this.i |= b
      }else {
        if(a === 16387 + c) {
          this.i &= 255;
          this.i |= (b & 7) << 8;
          if(this.isEnabled) {
            this.l = this.u.qd(b & 248)
          }
          this.hb = !0
        }
      }
    }
  }
}, ab:function(a) {
  this.isEnabled = a;
  if(!a) {
    this.l = 0
  }
  this.va()
}, Ua:function() {
  return this.l === 0 || !this.isEnabled ? 0 : 1
}};
s.N.Yd = function(a) {
  this.u = a;
  this.ic = this.p = this.wd = this.zb = this.l = this.tb = this.i = this.w = this.Gc = this.Hc = this.fa = this.Hd = this.isEnabled = f;
  this.reset()
};
s.N.Yd.prototype = {reset:function() {
  this.tb = this.i = this.w = 0;
  this.Hd = this.isEnabled = !1;
  this.l = 0;
  this.fa = !1;
  this.wd = this.zb = 0;
  this.Hc = !0;
  this.Gc = !1;
  this.ic = 0;
  this.p = 15
}, xb:function() {
  this.fa && this.l > 0 && (--this.l, this.l === 0 && this.jc())
}, gg:function() {
  this.Hc ? (this.zb = this.wd, this.jc()) : this.zb > 0 && (--this.zb, this.jc());
  if(!this.Gc) {
    this.Hc = !1
  }
}, Ua:function() {
  return this.l === 0 || !this.isEnabled ? 0 : 1
}, Ke:function() {
  return 0
}, F:function(a, b) {
  if(a === 16392) {
    this.Gc = (b & 128) !== 0, this.wd = b & 127, this.fa = !this.Gc
  }else {
    if(a === 16394) {
      this.i &= 1792, this.i |= b
    }else {
      if(a === 16395) {
        this.i &= 255, this.i |= (b & 7) << 8, this.l = this.u.qd(b & 248), this.Hc = !0
      }
    }
  }
  this.jc()
}, ab:function(a) {
  this.isEnabled = a;
  if(!a) {
    this.l = 0
  }
  this.jc()
}, jc:function() {
  this.Hd = this.isEnabled && this.i > 7 && this.zb > 0 && this.l > 0
}};
s.O = function(a) {
  this.a = a;
  this.mb = this.vramMirrorTable = this.Ca = this.currentMirroring = this.ntable1 = this.D = this.imgPalette = this.sprPalette = this.hitSpr0 = this.na = this.ma = this.jd = this.Va = this.X = this.Fb = this.oa = this.m = this.T = this.curX = this.lastRenderedScanline = this.scanline = this.scantile = this.validTileData = this.pixrendered = this.bgbuffer = this.Je = this.buffer = this.Sa = this.curNt = this.regS = this.regFH = this.regHT = this.regVT = this.regH = this.regV = this.regFV = this.cntHT = 
  this.cntVT = this.cntH = this.cntV = this.cntFV = this.f_dispType = this.f_bgClipping = this.f_spClipping = this.f_bgVisibility = this.f_spVisibility = this.f_color = this.f_nTblAddress = this.f_addrInc = this.f_spPatternTable = this.f_bgPatternTable = this.f_spriteSize = this.f_nmiOnVblank = this.scanlineAlreadyRendered = this.nmiCounter = this.validTileData = this.dummyCycleToggle = this.nmiOk = this.requestEndFrame = this.currentMirroring = this.sramAddress = this.firstWrite = this.vramBufferedReadValue = 
  this.vramTmpAddress = this.vramAddress = this.spriteMem = this.vramMem = f;
  this.ih = !1;
  this.kd = !0;
  this.reset()
};
s.O.prototype = {re:6, fd:7, reset:function() {
  var a;
  this.vramMem = Array(32768);
  this.spriteMem = Array(256);
  for(a = 0;a < this.vramMem.length;++a) {
    this.vramMem[a] = 0
  }
  for(a = 0;a < this.spriteMem.length;++a) {
    this.spriteMem[a] = 0
  }
  this.vramTmpAddress = this.vramAddress = f;
  this.vramBufferedReadValue = 0;
  this.firstWrite = !0;
  this.sramAddress = 0;
  this.currentMirroring = -1;
  this.validTileData = this.dummyCycleToggle = this.nmiOk = this.requestEndFrame = !1;
  this.nmiCounter = 0;
  this.scanlineAlreadyRendered = f;
  this.regS = this.regFH = this.regHT = this.regVT = this.regH = this.regV = this.regFV = this.cntHT = this.cntVT = this.cntH = this.cntV = this.cntFV = this.f_dispType = this.f_bgClipping = this.f_spClipping = this.f_bgVisibility = this.f_spVisibility = this.f_color = this.f_nTblAddress = this.f_addrInc = this.f_spPatternTable = this.f_bgPatternTable = this.f_spriteSize = this.f_nmiOnVblank = 0;
  this.curNt = f;
  this.Sa = Array(32);
  this.buffer = Array(61440);
  this.Je = Array(61440);
  this.bgbuffer = Array(61440);
  this.pixrendered = Array(61440);
  this.validTileData = f;
  this.scantile = Array(32);
  this.scanline = 0;
  this.lastRenderedScanline = -1;
  this.curX = 0;
  this.T = Array(64);
  this.m = Array(64);
  this.oa = Array(64);
  this.Fb = Array(64);
  this.X = Array(64);
  this.Va = Array(64);
  this.jd = Array(64);
  this.na = this.ma = 0;
  this.hitSpr0 = !1;
  this.sprPalette = Array(16);
  this.imgPalette = Array(16);
  this.D = Array(512);
  for(a = 0;a < 512;++a) {
    this.D[a] = new s.O.gd
  }
  this.ntable1 = Array(4);
  this.currentMirroring = -1;
  this.Ca = Array(4);
  for(a = 0;a < 4;++a) {
    this.Ca[a] = new s.O.me(32, 32, "Nt" + a)
  }
  this.vramMirrorTable = Array(32768);
  for(a = 0;a < 32768;++a) {
    this.vramMirrorTable[a] = a
  }
  this.mb = new s.O.oe;
  this.mb.Ng();
  this.df(0);
  this.ef(0)
}, Eb:function(a) {
  if(a != this.currentMirroring) {
    this.currentMirroring = a;
    this.Fa();
    if(this.vramMirrorTable === f) {
      this.vramMirrorTable = Array(32768)
    }
    for(var b = 0;b < 32768;++b) {
      this.vramMirrorTable[b] = b
    }
    this.J(16160, 16128, 32);
    this.J(16192, 16128, 32);
    this.J(16256, 16128, 32);
    this.J(16320, 16128, 32);
    this.J(12288, 8192, 3840);
    this.J(16384, 0, 16384);
    a == this.a.c.lc ? (this.ntable1[0] = 0, this.ntable1[1] = 0, this.ntable1[2] = 1, this.ntable1[3] = 1, this.J(9216, 8192, 1024), this.J(11264, 10240, 1024)) : a == this.a.c.pc ? (this.ntable1[0] = 0, this.ntable1[1] = 1, this.ntable1[2] = 0, this.ntable1[3] = 1, this.J(10240, 8192, 1024), this.J(11264, 9216, 1024)) : a == this.a.c.qe ? (this.ntable1[0] = 0, this.ntable1[1] = 0, this.ntable1[2] = 0, this.ntable1[3] = 0, this.J(9216, 8192, 1024), this.J(10240, 8192, 1024), this.J(11264, 8192, 
    1024)) : a == this.a.c.dg ? (this.ntable1[0] = 1, this.ntable1[1] = 1, this.ntable1[2] = 1, this.ntable1[3] = 1, this.J(9216, 9216, 1024), this.J(10240, 9216, 1024), this.J(11264, 9216, 1024)) : (this.ntable1[0] = 0, this.ntable1[1] = 1, this.ntable1[2] = 2, this.ntable1[3] = 3)
  }
}, J:function(a, b, c) {
  for(var e = 0;e < c;++e) {
    this.vramMirrorTable[a + e] = b + e
  }
}, oh:function() {
  this.a.f.sb(this.a.f.bg);
  this.lastRenderedScanline < 239 && this.Qe(this.lastRenderedScanline + 1, 240 - this.lastRenderedScanline);
  this.pg();
  this.lastRenderedScanline = -1
}, rg:function() {
  switch(this.scanline) {
    case 19:
      if(this.dummyCycleToggle) {
        this.curX = 1, this.dummyCycleToggle = !this.dummyCycleToggle
      }
      break;
    case 20:
      this.fc(this.fd, !1);
      this.fc(this.re, !1);
      this.hitSpr0 = !1;
      this.na = this.ma = -1;
      if(this.f_bgVisibility == 1 || this.f_spVisibility == 1) {
        this.cntFV = this.regFV, this.cntV = this.regV, this.cntH = this.regH, this.cntVT = this.regVT, this.cntHT = this.regHT, this.f_bgVisibility == 1 && this.Pe(!1, 0)
      }
      this.f_bgVisibility == 1 && this.f_spVisibility == 1 && this.Qb(0);
      break;
    case 261:
      this.fc(this.fd, !0);
      this.requestEndFrame = !0;
      this.nmiCounter = 9;
      this.scanline = -1;
      break;
    default:
      if(this.scanline >= 21 && this.scanline <= 260 && this.f_bgVisibility == 1) {
        if(!this.scanlineAlreadyRendered) {
          this.cntHT = this.regHT, this.cntH = this.regH, this.Pe(!0, this.scanline + 1 - 21)
        }
        this.scanlineAlreadyRendered = !1;
        if(!this.hitSpr0 && this.f_spVisibility == 1 && this.T[0] >= -7 && this.T[0] < 256 && this.m[0] + 1 <= this.scanline - 20 && this.m[0] + 1 + (this.f_spriteSize === 0 ? 8 : 16) >= this.scanline - 20 && this.Qb(this.scanline - 20)) {
          this.hitSpr0 = !0
        }
      }
  }
  ++this.scanline;
  this.Gd();
  this.uc()
}, nh:function() {
  var a = 0;
  if(this.f_dispType === 0) {
    a = this.imgPalette[0]
  }else {
    switch(this.f_color) {
      case 0:
        a = 0;
        break;
      case 1:
        a = 65280;
        break;
      case 2:
        a = 16711680;
        break;
      case 3:
        a = 0;
        break;
      case 4:
        a = 255;
        break;
      default:
        a = 0
    }
  }
  var b = this.buffer, c;
  for(c = 0;c < 61440;++c) {
    b[c] = a
  }
  a = this.pixrendered;
  for(c = 0;c < a.length;++c) {
    a[c] = 65
  }
}, pg:function() {
  var a, b, c = this.buffer;
  if(this.ih) {
    if(this.T[0] >= 0 && this.T[0] < 256 && this.m[0] >= 0 && this.m[0] < 240) {
      for(a = 0;a < 256;++a) {
        c[(this.m[0] << 8) + a] = 16733525
      }
      for(a = 0;a < 240;++a) {
        c[(a << 8) + this.T[0]] = 16733525
      }
    }
    if(this.ma >= 0 && this.ma < 256 && this.na >= 0 && this.na < 240) {
      for(a = 0;a < 256;++a) {
        c[(this.na << 8) + a] = 5635925
      }
      for(a = 0;a < 240;++a) {
        c[(a << 8) + this.ma] = 5635925
      }
    }
  }
  if(this.kd || this.f_bgClipping === 0 || this.f_spClipping === 0) {
    for(b = 0;b < 240;++b) {
      for(a = 0;a < 8;++a) {
        c[(b << 8) + a] = 0
      }
    }
  }
  if(this.kd) {
    for(b = 0;b < 240;++b) {
      for(a = 0;a < 8;++a) {
        c[(b << 8) + 255 - a] = 0
      }
    }
  }
  if(this.kd) {
    for(b = 0;b < 8;++b) {
      for(a = 0;a < 256;++a) {
        c[(b << 8) + a] = 0, c[(239 - b << 8) + a] = 0
      }
    }
  }
  this.a.C.showDisplay && this.a.ui.hf(c, this.Je)
}, df:function(a) {
  this.Fa();
  this.f_nmiOnVblank = a >> 7 & 1;
  this.f_spriteSize = a >> 5 & 1;
  this.f_bgPatternTable = a >> 4 & 1;
  this.f_spPatternTable = a >> 3 & 1;
  this.f_addrInc = a >> 2 & 1;
  this.f_nTblAddress = a & 3;
  this.regV = a >> 1 & 1;
  this.regH = a & 1;
  this.regS = a >> 4 & 1
}, ef:function(a) {
  this.Fa();
  this.f_color = a >> 5 & 7;
  this.f_spVisibility = a >> 4 & 1;
  this.f_bgVisibility = a >> 3 & 1;
  this.f_spClipping = a >> 2 & 1;
  this.f_bgClipping = a >> 1 & 1;
  this.f_dispType = a & 1;
  this.f_dispType === 0 && this.mb.Id(this.f_color);
  this.ff()
}, fc:function(a, b) {
  var c = 1 << a;
  this.a.f.mem[8194] = this.a.f.mem[8194] & 255 - c | (b ? c : 0)
}, Vg:function() {
  var a = this.a.f.mem[8194];
  this.firstWrite = !0;
  this.fc(this.fd, !1);
  return a
}, xh:h("sramAddress"), kh:function() {
  return this.spriteMem[this.sramAddress]
}, lh:function(a) {
  this.spriteMem[this.sramAddress] = a;
  this.Jd(this.sramAddress, a);
  ++this.sramAddress;
  this.sramAddress %= 256
}, ah:function(a) {
  this.Fa();
  this.firstWrite ? (this.regHT = a >> 3 & 31, this.regFH = a & 7) : (this.regFV = a & 7, this.regVT = a >> 3 & 31);
  this.firstWrite = !this.firstWrite
}, yh:function(a) {
  this.firstWrite ? (this.regFV = a >> 4 & 3, this.regV = a >> 3 & 1, this.regH = a >> 2 & 1, this.regVT = this.regVT & 7 | (a & 3) << 3) : (this.Fa(), this.regVT = this.regVT & 24 | a >> 5 & 7, this.regHT = a & 31, this.cntFV = this.regFV, this.cntV = this.regV, this.cntH = this.regH, this.cntVT = this.regVT, this.cntHT = this.regHT, this.Qb(this.scanline - 20));
  this.firstWrite = !this.firstWrite;
  this.uc()
}, th:function() {
  var a;
  this.uc();
  this.Gd();
  if(this.vramAddress <= 16127) {
    return a = this.vramBufferedReadValue, this.vramBufferedReadValue = this.vramAddress < 8192 ? this.vramMem[this.vramAddress] : this.Ge(this.vramAddress), this.vramAddress += this.f_addrInc == 1 ? 32 : 1, this.md(), this.Fd(), a
  }
  a = this.Ge(this.vramAddress);
  this.vramAddress += this.f_addrInc == 1 ? 32 : 1;
  this.md();
  this.Fd();
  return a
}, uh:function(a) {
  this.Fa();
  this.uc();
  this.Gd();
  this.vramAddress >= 8192 ? this.Rg(this.vramAddress, a) : this.ra(this.vramAddress, a);
  this.vramAddress += this.f_addrInc == 1 ? 32 : 1;
  this.Fd();
  this.md()
}, jh:function(a) {
  a *= 256;
  for(var b, c = this.sramAddress;c < 256;++c) {
    b = this.a.f.mem[a + c], this.spriteMem[c] = b, this.Jd(c, b)
  }
  this.a.f.ze(513)
}, Fd:function() {
  var a = this.vramTmpAddress >> 8 & 255;
  this.regFV = a >> 4 & 7;
  this.regV = a >> 3 & 1;
  this.regH = a >> 2 & 1;
  this.regVT = this.regVT & 7 | (a & 3) << 3;
  a = this.vramTmpAddress & 255;
  this.regVT = this.regVT & 24 | a >> 5 & 7;
  this.regHT = a & 31
}, md:function() {
  var a = this.vramAddress >> 8 & 255;
  this.cntFV = a >> 4 & 3;
  this.cntV = a >> 3 & 1;
  this.cntH = a >> 2 & 1;
  this.cntVT = this.cntVT & 7 | (a & 3) << 3;
  a = this.vramAddress & 255;
  this.cntVT = this.cntVT & 24 | a >> 5 & 7;
  this.cntHT = a & 31
}, Gd:function() {
  var a = (this.regFV & 7) << 4;
  a |= (this.regV & 1) << 3;
  a |= (this.regH & 1) << 2;
  a |= this.regVT >> 3 & 3;
  var b = (this.regVT & 7) << 5;
  b |= this.regHT & 31;
  this.vramTmpAddress = (a << 8 | b) & 32767
}, uc:function() {
  var a = (this.cntFV & 7) << 4;
  a |= (this.cntV & 1) << 3;
  a |= (this.cntH & 1) << 2;
  a |= this.cntVT >> 3 & 3;
  var b = (this.cntVT & 7) << 5;
  b |= this.cntHT & 31;
  this.vramAddress = (a << 8 | b) & 32767
}, Ge:function(a) {
  return this.vramMem[this.vramMirrorTable[a]]
}, Rg:function(a, b) {
  a >= 16128 && a < 16160 ? a == 16128 || a == 16144 ? (this.ra(16128, b), this.ra(16144, b)) : a == 16132 || a == 16148 ? (this.ra(16132, b), this.ra(16148, b)) : a == 16136 || a == 16152 ? (this.ra(16136, b), this.ra(16152, b)) : a == 16140 || a == 16156 ? (this.ra(16140, b), this.ra(16156, b)) : this.ra(a, b) : a < this.vramMirrorTable.length ? this.ra(this.vramMirrorTable[a], b) : alert("Invalid VRAM address: " + a.toString(16))
}, Fa:function() {
  if(this.scanline >= 21 && this.scanline <= 260) {
    this.Qe(this.lastRenderedScanline + 1, this.scanline - 21 - this.lastRenderedScanline), this.lastRenderedScanline = this.scanline - 21
  }
}, Qe:function(a, b) {
  this.f_spVisibility == 1 && this.Re(a, b, !0);
  if(this.f_bgVisibility == 1) {
    var c = a + b << 8;
    c > 61440 && (c = 61440);
    for(var e = this.buffer, g = this.bgbuffer, d = this.pixrendered, i = a << 8;i < c;++i) {
      d[i] > 255 && (e[i] = g[i])
    }
  }
  this.f_spVisibility == 1 && this.Re(a, b, !1);
  this.validTileData = !1
}, Pe:function(a, b) {
  var c = this.regS === 0 ? 0 : 256, e = (b << 8) - this.regFH;
  this.curNt = this.ntable1[this.cntV + this.cntV + this.cntH];
  this.cntHT = this.regHT;
  this.cntH = this.regH;
  this.curNt = this.ntable1[this.cntV + this.cntV + this.cntH];
  if(b < 240 && b - this.cntFV >= 0) {
    for(var g = this.cntFV << 3, d = this.scantile, i = this.Sa, k = this.D, j = this.Ca, m = this.imgPalette, o = this.pixrendered, n = a ? this.bgbuffer : this.buffer, l, t, r, p = 0;p < 32;++p) {
      if(b >= 0) {
        this.validTileData ? (l = d[p], t = l.S, r = i[p]) : (l = k[c + j[this.curNt].Dg(this.cntHT, this.cntVT)], t = l.S, r = j[this.curNt].tg(this.cntHT, this.cntVT), d[p] = l, i[p] = r);
        var q = 0, u = (p << 3) - this.regFH;
        if(u > -8) {
          if(u < 0 && (e -= u, q = -u), l.Oc[this.cntFV]) {
            for(;q < 8;++q) {
              n[e] = m[t[g + q] + r], o[e] |= 256, ++e
            }
          }else {
            for(;q < 8;++q) {
              l = t[g + q], l !== 0 && (n[e] = m[l + r], o[e] |= 256), ++e
            }
          }
        }
      }
      if(++this.cntHT == 32) {
        this.cntHT = 0, ++this.cntH, this.cntH %= 2, this.curNt = this.ntable1[(this.cntV << 1) + this.cntH]
      }
    }
    this.validTileData = !0
  }
  ++this.cntFV;
  if(this.cntFV == 8) {
    this.cntFV = 0;
    ++this.cntVT;
    if(this.cntVT == 30) {
      this.cntVT = 0, ++this.cntV, this.cntV %= 2, this.curNt = this.ntable1[(this.cntV << 1) + this.cntH]
    }else {
      if(this.cntVT == 32) {
        this.cntVT = 0
      }
    }
    this.validTileData = !1
  }
}, Re:function(a, b, c) {
  if(this.f_spVisibility === 1) {
    for(var e = 0;e < 64;++e) {
      if(this.jd[e] == c && this.T[e] >= 0 && this.T[e] < 256 && this.m[e] + 8 >= a && this.m[e] < a + b) {
        if(this.f_spriteSize === 0) {
          this.Kd = 0;
          this.Ld = 8;
          if(this.m[e] < a) {
            this.Kd = a - this.m[e] - 1
          }
          if(this.m[e] + 8 > a + b) {
            this.Ld = a + b - this.m[e] + 1
          }
          this.f_spPatternTable === 0 ? this.D[this.oa[e]].Qc(this.buffer, 0, this.Kd, 8, this.Ld, this.T[e], this.m[e] + 1, this.Fb[e], this.sprPalette, this.Va[e], this.X[e], e, this.pixrendered) : this.D[this.oa[e] + 256].Qc(this.buffer, 0, this.Kd, 8, this.Ld, this.T[e], this.m[e] + 1, this.Fb[e], this.sprPalette, this.Va[e], this.X[e], e, this.pixrendered)
        }else {
          var g = this.oa[e];
          (g & 1) !== 0 && (g = this.oa[e] - 1 + 256);
          var d = 0, i = 8;
          this.m[e] < a && (d = a - this.m[e] - 1);
          this.m[e] + 8 > a + b && (i = a + b - this.m[e]);
          this.D[g + (this.X[e] ? 1 : 0)].Qc(this.buffer, 0, d, 8, i, this.T[e], this.m[e] + 1, this.Fb[e], this.sprPalette, this.Va[e], this.X[e], e, this.pixrendered);
          d = 0;
          i = 8;
          this.m[e] + 8 < a && (d = a - (this.m[e] + 8 + 1));
          this.m[e] + 16 > a + b && (i = a + b - (this.m[e] + 8));
          this.D[g + (this.X[e] ? 0 : 1)].Qc(this.buffer, 0, d, 8, i, this.T[e], this.m[e] + 1 + 8, this.Fb[e], this.sprPalette, this.Va[e], this.X[e], e, this.pixrendered)
        }
      }
    }
  }
}, Qb:function(a) {
  this.na = this.ma = -1;
  var b, c = this.f_spPatternTable === 0 ? 0 : 256, e, g, d;
  e = this.T[0];
  b = this.m[0] + 1;
  if(this.f_spriteSize === 0) {
    if(b <= a && b + 8 > a && e >= -7 && e < 256) {
      if(c = this.D[this.oa[0] + c], b = this.X[0] ? 7 - (a - b) : a - b, b *= 8, d = a * 256 + e, this.Va[0]) {
        for(g = 7;g >= 0;--g) {
          if(e >= 0 && e < 256 && d >= 0 && d < 61440 && this.pixrendered[d] !== 0 && c.S[b + g] !== 0) {
            return this.ma = d % 256, this.na = a, !0
          }
          ++e;
          ++d
        }
      }else {
        for(g = 0;g < 8;++g) {
          if(e >= 0 && e < 256 && d >= 0 && d < 61440 && this.pixrendered[d] !== 0 && c.S[b + g] !== 0) {
            return this.ma = d % 256, this.na = a, !0
          }
          ++e;
          ++d
        }
      }
    }
  }else {
    if(b <= a && b + 16 > a && e >= -7 && e < 256) {
      if(b = this.X[0] ? 15 - (a - b) : a - b, b < 8 ? c = this.D[this.oa[0] + (this.X[0] ? 1 : 0) + ((this.oa[0] & 1) !== 0 ? 255 : 0)] : (c = this.D[this.oa[0] + (this.X[0] ? 0 : 1) + ((this.oa[0] & 1) !== 0 ? 255 : 0)], this.X[0] ? b = 15 - b : b -= 8), b *= 8, d = a * 256 + e, this.Va[0]) {
        for(g = 7;g >= 0;--g) {
          if(e >= 0 && e < 256 && d >= 0 && d < 61440 && this.pixrendered[d] !== 0 && c.S[b + g] !== 0) {
            return this.ma = d % 256, this.na = a, !0
          }
          ++e;
          ++d
        }
      }else {
        for(g = 0;g < 8;++g) {
          if(e >= 0 && e < 256 && d >= 0 && d < 61440 && this.pixrendered[d] !== 0 && c.S[b + g] !== 0) {
            return this.ma = d % 256, this.na = a, !0
          }
          ++e;
          ++d
        }
      }
    }
  }
  return!1
}, ra:function(a, b) {
  this.vramMem[a] = b;
  a < 8192 ? (this.vramMem[a] = b, this.Tg(a, b)) : a >= 8192 && a < 9152 ? this.Nc(this.ntable1[0], a - 8192, b) : a >= 9152 && a < 9216 ? this.rc(this.ntable1[0], a - 9152, b) : a >= 9216 && a < 10176 ? this.Nc(this.ntable1[1], a - 9216, b) : a >= 10176 && a < 10240 ? this.rc(this.ntable1[1], a - 10176, b) : a >= 10240 && a < 11200 ? this.Nc(this.ntable1[2], a - 10240, b) : a >= 11200 && a < 11264 ? this.rc(this.ntable1[2], a - 11200, b) : a >= 11264 && a < 12224 ? this.Nc(this.ntable1[3], a - 
  11264, b) : a >= 12224 && a < 12288 ? this.rc(this.ntable1[3], a - 12224, b) : a >= 16128 && a < 16160 && this.ff()
}, ff:function() {
  var a;
  for(a = 0;a < 16;++a) {
    this.imgPalette[a] = this.f_dispType === 0 ? this.mb.Cc(this.vramMem[16128 + a] & 63) : this.mb.Cc(this.vramMem[16128 + a] & 32)
  }
  for(a = 0;a < 16;++a) {
    this.sprPalette[a] = this.f_dispType === 0 ? this.mb.Cc(this.vramMem[16144 + a] & 63) : this.mb.Cc(this.vramMem[16144 + a] & 32)
  }
}, Tg:function(a, b) {
  var c = Math.floor(a / 16), e = a % 16;
  e < 8 ? this.D[c].Sc(e, b, this.vramMem[a + 8]) : this.D[c].Sc(e - 8, this.vramMem[a - 8], b)
}, Nc:function(a, b, c) {
  this.Ca[a].Zc[b] = c;
  this.Qb(this.scanline - 20)
}, rc:function(a, b, c) {
  this.Ca[a].wh(b, c)
}, Jd:function(a, b) {
  var c = Math.floor(a / 4);
  c === 0 && this.Qb(this.scanline - 20);
  a % 4 === 0 ? this.m[c] = b : a % 4 == 1 ? this.oa[c] = b : a % 4 == 2 ? (this.X[c] = (b & 128) !== 0, this.Va[c] = (b & 64) !== 0, this.jd[c] = (b & 32) !== 0, this.Fb[c] = (b & 3) << 2) : a % 4 == 3 && (this.T[c] = b)
}, JSON_PROPERTIES:{vramMem:"vramMem", spriteMem:"spriteMem", cntFV:"cntFV", cntV:"cntV", cntH:"cntH", cntVT:"cntVT", cntHT:"cntHT", regFV:"regFV", regV:"regV", regH:"regH", regVT:"regVT", regHT:"regHT", regFH:"regFH", regS:"regS", vramAddress:"vramAddress", vramTmpAddress:"vramTmpAddress", f_nmiOnVblank:"f_nmiOnVblank", f_spriteSize:"f_spriteSize", f_bgPatternTable:"f_bgPatternTable", f_spPatternTable:"f_spPatternTable", f_addrInc:"f_addrInc", f_nTblAddress:"f_nTblAddress", f_color:"f_color", f_spVisibility:"f_spVisibility", 
f_bgVisibility:"f_bgVisibility", f_spClipping:"f_spClipping", f_bgClipping:"f_bgClipping", f_dispType:"f_dispType", vramBufferedReadValue:"vramBufferedReadValue", firstWrite:"firstWrite", currentMirroring:"currentMirroring", vramMirrorTable:"vramMirrorTable", ntable1:"ntable1", sramAddress:"sramAddress", hitSpr0:"hitSpr0", sprPalette:"sprPalette", imgPalette:"imgPalette", curX:"curX", scanline:"scanline", lastRenderedScanline:"lastRenderedScanline", curNt:"curNt", scantile:"scantile", Sa:"attrib", 
buffer:"buffer", bgbuffer:"bgbuffer", pixrendered:"pixrendered", requestEndFrame:"requestEndFrame", nmiOk:"nmiOk", dummyCycleToggle:"dummyCycleToggle", nmiCounter:"nmiCounter", validTileData:"validTileData", scanlineAlreadyRendered:"scanlineAlreadyRendered"}, toJSON:function() {
  var a, b = s.da.toJSON(this);
  b.nameTable = [];
  for(a = 0;a < this.Ca.length;++a) {
    b.nameTable[a] = this.Ca[a].toJSON()
  }
  b.ptTile = [];
  for(a = 0;a < this.D.length;++a) {
    b.ptTile[a] = this.D[a].toJSON()
  }
  return b
}, t:function(a) {
  var b;
  s.da.t(this, a);
  for(b = 0;b < this.Ca.length;++b) {
    this.Ca[b].t(a.nameTable[b])
  }
  for(b = 0;b < this.D.length;++b) {
    this.D[b].t(a.ptTile[b])
  }
  for(b = 0;b < this.spriteMem.length;++b) {
    this.Jd(b, this.spriteMem[b])
  }
}};
s.O.me = function(a, b, c) {
  this.width = a;
  this.height = b;
  this.name = c;
  this.Zc = Array(a * b);
  this.Sa = Array(a * b)
};
s.O.me.prototype = {Dg:function(a, b) {
  return this.Zc[b * this.width + a]
}, tg:function(a, b) {
  return this.Sa[b * this.width + a]
}, wh:function(a, b) {
  for(var c = a % 8 * 4, e = Math.floor(a / 8) * 4, g, d, i, k = 0;k < 2;++k) {
    for(var j = 0;j < 2;++j) {
      g = b >> 2 * (k * 2 + j) & 3;
      for(var m = 0;m < 2;++m) {
        for(var o = 0;o < 2;++o) {
          d = c + j * 2 + o, i = e + k * 2 + m, this.Sa[i * this.width + d] = g << 2 & 12
        }
      }
    }
  }
}, toJSON:function() {
  return{tile:this.Zc, attrib:this.Sa}
}, t:function(a) {
  this.Zc = a.tile;
  this.Sa = a.attrib
}};
s.O.oe = function() {
  this.wc = Array(64);
  this.pd = Array(8);
  this.ve = -1
};
s.O.oe.prototype = {reset:function() {
  this.Id(0)
}, Ng:function() {
  this.wc = [5395026, 11796480, 10485760, 11599933, 7602281, 91, 95, 6208, 12048, 543240, 26368, 1196544, 7153664, 0, 0, 0, 12899815, 16728064, 14421538, 16729963, 14090399, 6818519, 6588, 21681, 27227, 35843, 43776, 2918400, 10777088, 0, 0, 0, 16316664, 16755516, 16742785, 16735173, 16730354, 14633471, 4681215, 46327, 57599, 58229, 259115, 7911470, 15065624, 7895160, 0, 0, 16777215, 16773822, 16300216, 16300248, 16758527, 16761855, 13095423, 10148607, 8973816, 8650717, 12122296, 16119980, 16777136, 
  16308472, 0, 0];
  this.Pg();
  this.Id(0)
}, Pg:function() {
  for(var a, b, c, e, g, d, i, k = 0;k < 8;++k) {
    i = d = g = 1;
    (k & 1) !== 0 && (i = g = 0.75);
    (k & 2) !== 0 && (d = g = 0.75);
    (k & 4) !== 0 && (i = d = 0.75);
    this.pd[k] = Array(64);
    for(e = 0;e < 64;++e) {
      c = this.wc[e], a = Math.floor(this.Bg(c) * g), b = Math.floor(this.wg(c) * d), c = Math.floor(this.ug(c) * i), this.pd[k][e] = this.Cg(a, b, c)
    }
  }
}, Id:function(a) {
  if(a != this.ve) {
    this.ve = a;
    for(var b = 0;b < 64;++b) {
      this.wc[b] = this.pd[a][b]
    }
  }
}, Cc:function(a) {
  return this.wc[a]
}, Bg:function(a) {
  return a >> 16 & 255
}, wg:function(a) {
  return a >> 8 & 255
}, ug:function(a) {
  return a & 255
}, Cg:function(a, b, c) {
  return a << 16 | b << 8 | c
}};
s.O.gd = function() {
  this.S = Array(64);
  this.Ah = this.v = this.Z = this.Ih = this.Hh = this.Eg = this.vh = this.y = this.x = this.G = this.k = f;
  this.Jg = !1;
  this.Oc = Array(8)
};
s.O.gd.prototype = {Sc:function(a, b, c) {
  this.Jg = !0;
  this.G = a << 3;
  for(this.x = 0;this.x < 8;++this.x) {
    this.S[this.G + this.x] = (b >> 7 - this.x & 1) + ((c >> 7 - this.x & 1) << 1), this.S[this.G + this.x] === 0 && (this.Oc[a] = !1)
  }
}, Qc:function(a, b, c, e, g, d, i, k, j, m, o, n, l) {
  if(!(d < -7 || d >= 256 || i < -7 || i >= 240)) {
    if(this.vh = e - b, this.Eg = g - c, d < 0 && (b -= d), d + e >= 256 && (e = 256 - d), i < 0 && (c -= i), i + g >= 240 && (g = 240 - i), !m && !o) {
      this.k = (i << 8) + d;
      for(this.y = this.G = 0;this.y < 8;++this.y) {
        for(this.x = 0;this.x < 8;++this.x) {
          if(this.x >= b && this.x < e && this.y >= c && this.y < g && (this.Z = this.S[this.G], this.v = l[this.k], this.Z !== 0 && n <= (this.v & 255))) {
            a[this.k] = j[this.Z + k], this.v = this.v & 3840 | n, l[this.k] = this.v
          }
          ++this.k;
          ++this.G
        }
        this.k -= 8;
        this.k += 256
      }
    }else {
      if(m && !o) {
        this.k = (i << 8) + d;
        this.G = 7;
        for(this.y = 0;this.y < 8;++this.y) {
          for(this.x = 0;this.x < 8;++this.x) {
            if(this.x >= b && this.x < e && this.y >= c && this.y < g && (this.Z = this.S[this.G], this.v = l[this.k], this.Z !== 0 && n <= (this.v & 255))) {
              a[this.k] = j[this.Z + k], this.v = this.v & 3840 | n, l[this.k] = this.v
            }
            ++this.k;
            --this.G
          }
          this.k -= 8;
          this.k += 256;
          this.G += 16
        }
      }else {
        if(o && !m) {
          this.k = (i << 8) + d;
          this.G = 56;
          for(this.y = 0;this.y < 8;++this.y) {
            for(this.x = 0;this.x < 8;++this.x) {
              if(this.x >= b && this.x < e && this.y >= c && this.y < g && (this.Z = this.S[this.G], this.v = l[this.k], this.Z !== 0 && n <= (this.v & 255))) {
                a[this.k] = j[this.Z + k], this.v = this.v & 3840 | n, l[this.k] = this.v
              }
              ++this.k;
              ++this.G
            }
            this.k -= 8;
            this.k += 256;
            this.G -= 16
          }
        }else {
          this.k = (i << 8) + d;
          this.G = 63;
          for(this.y = 0;this.y < 8;++this.y) {
            for(this.x = 0;this.x < 8;++this.x) {
              if(this.x >= b && this.x < e && this.y >= c && this.y < g && (this.Z = this.S[this.G], this.v = l[this.k], this.Z !== 0 && n <= (this.v & 255))) {
                a[this.k] = j[this.Z + k], this.v = this.v & 3840 | n, l[this.k] = this.v
              }
              ++this.k;
              --this.G
            }
            this.k -= 8;
            this.k += 256
          }
        }
      }
    }
  }
}, toJSON:function() {
  return{opaque:this.Oc, pix:this.S}
}, t:function(a) {
  this.Oc = a.opaque;
  this.S = a.pix
}};
s.pe = function(a) {
  this.a = a;
  this.e = Array(92);
  for(a = 0;a < 92;++a) {
    this.e[a] = "Unknown Mapper"
  }
  this.e[0] = "Direct Access";
  this.e[1] = "Nintendo MMC1";
  this.e[2] = "UNROM";
  this.e[3] = "CNROM";
  this.e[4] = "Nintendo MMC3";
  this.e[5] = "Nintendo MMC5";
  this.e[6] = "FFE F4xxx";
  this.e[7] = "AOROM";
  this.e[8] = "FFE F3xxx";
  this.e[9] = "Nintendo MMC2";
  this.e[10] = "Nintendo MMC4";
  this.e[11] = "Color Dreams Chip";
  this.e[12] = "FFE F6xxx";
  this.e[15] = "100-in-1 switch";
  this.e[16] = "Bandai chip";
  this.e[17] = "FFE F8xxx";
  this.e[18] = "Jaleco SS8806 chip";
  this.e[19] = "Namcot 106 chip";
  this.e[20] = "Famicom Disk System";
  this.e[21] = "Konami VRC4a";
  this.e[22] = "Konami VRC2a";
  this.e[23] = "Konami VRC2a";
  this.e[24] = "Konami VRC6";
  this.e[25] = "Konami VRC4b";
  this.e[32] = "Irem G-101 chip";
  this.e[33] = "Taito TC0190/TC0350";
  this.e[34] = "32kB ROM switch";
  this.e[64] = "Tengen RAMBO-1 chip";
  this.e[65] = "Irem H-3001 chip";
  this.e[66] = "GNROM switch";
  this.e[67] = "SunSoft3 chip";
  this.e[68] = "SunSoft4 chip";
  this.e[69] = "SunSoft5 FME-7 chip";
  this.e[71] = "Camerica chip";
  this.e[78] = "Irem 74HC161/32-based";
  this.e[91] = "Pirate HK-SF3 chip"
};
s.pe.prototype = {pc:0, lc:1, tf:2, qe:3, dg:4, ea:f, c:f, Ga:f, ub:f, z:f, s:f, Ba:f, hd:f, qh:f, xe:f, Aa:f, eb:!1, load:function(a) {
  var b, c;
  if(a.indexOf("NES\u001a") === -1) {
    this.a.ui.updateStatus("Not a valid NES ROM.")
  }else {
    this.ea = Array(16);
    for(b = 0;b < 16;++b) {
      this.ea[b] = a.charCodeAt(b) & 255
    }
    this.z = this.ea[4];
    this.s = this.ea[5] * 2;
    this.Ba = (this.ea[6] & 1) !== 0 ? 1 : 0;
    this.hd = (this.ea[6] & 2) !== 0;
    this.qh = (this.ea[6] & 4) !== 0;
    this.xe = (this.ea[6] & 8) !== 0;
    this.Aa = this.ea[6] >> 4 | this.ea[7] & 240;
    c = !1;
    for(b = 8;b < 16;++b) {
      if(this.ea[b] !== 0) {
        c = !0;
        break
      }
    }
    c && (this.Aa &= 15);
    this.c = Array(this.z);
    var e = 16;
    for(b = 0;b < this.z;++b) {
      this.c[b] = Array(16384);
      for(c = 0;c < 16384;++c) {
        if(e + c >= a.length) {
          break
        }
        this.c[b][c] = a.charCodeAt(e + c) & 255
      }
      e += 16384
    }
    this.Ga = Array(this.s);
    for(b = 0;b < this.s;++b) {
      this.Ga[b] = Array(4096);
      for(c = 0;c < 4096;++c) {
        if(e + c >= a.length) {
          break
        }
        this.Ga[b][c] = a.charCodeAt(e + c) & 255
      }
      e += 4096
    }
    this.ub = Array(this.s);
    for(b = 0;b < this.s;++b) {
      this.ub[b] = Array(256);
      for(c = 0;c < 256;++c) {
        this.ub[b][c] = new s.O.gd
      }
    }
    for(a = 0;a < this.s;++a) {
      for(b = 0;b < 4096;++b) {
        c = b >> 4, e = b % 16, e < 8 ? this.ub[a][c].Sc(e, this.Ga[a][b], this.Ga[a][b + 8]) : this.ub[a][c].Sc(e - 8, this.Ga[a][b - 8], this.Ga[a][b])
      }
    }
    this.eb = !0
  }
}, zg:function() {
  if(this.xe) {
    return this.tf
  }
  if(this.Ba === 0) {
    return this.lc
  }
  return this.pc
}, yg:function() {
  if(this.Aa >= 0 && this.Aa < this.e.length) {
    return this.e[this.Aa]
  }
  return"Unknown Mapper, " + this.Aa
}, Qg:function() {
  return typeof s.g[this.Aa] !== "undefined"
}, ig:function() {
  return this.Qg() ? new s.g[this.Aa](this.a) : (this.a.ui.updateStatus("This ROM uses a mapper not supported by JSNES: " + this.yg() + "(" + this.Aa + ")"), f)
}};
s.sf = function(a) {
  this.a = a;
  this.enable = function() {
  };
  this.updateStatus = function() {
  };
  this.gf = function() {
  };
  this.hf = function() {
  }
};
typeof jQuery !== "undefined" && function(a) {
  a.fn.cg = function(b) {
    function c(c) {
      var d = this;
      d.a = c;
      d.root = a("<div></div>");
      d.screen = a('<canvas class="nes-screen" width="256" height="240"></canvas>').appendTo(d.root);
      d.screen[0].getContext ? (d.Zg = a('<div class="nes-roms"></div>').appendTo(d.root), d.bc = a("<select></select>").appendTo(d.Zg), d.controls = a('<div class="nes-controls"></div>').appendTo(d.root), d.I = {pause:a('<input type="button" value="pause" class="nes-pause" disabled="disabled">').appendTo(d.controls), Te:a('<input type="button" value="restart" class="nes-restart" disabled="disabled">').appendTo(d.controls), hc:a('<input type="button" value="enable sound" class="nes-enablesound">').appendTo(d.controls), 
      zoom:a('<input type="button" value="zoom in" class="nes-zoom">').appendTo(d.controls)}, d.status = a('<p class="nes-status">Booting up...</p>').appendTo(d.root), d.root.appendTo(e), d.bc.change(function() {
        d.Ab()
      }), d.I.pause.click(function() {
        d.a.kb ? (d.a.stop(), d.updateStatus("Paused"), d.I.pause.attr("value", "resume")) : (d.a.start(), d.I.pause.attr("value", "pause"))
      }), d.I.Te.click(function() {
        d.a.Oe();
        d.a.start()
      }), d.I.hc.click(function() {
        d.a.C.emulateSound ? (d.a.C.emulateSound = !1, d.I.hc.attr("value", "enable sound")) : (d.a.C.emulateSound = !0, d.I.hc.attr("value", "disable sound"))
      }), d.Ud = !1, d.I.zoom.click(function() {
        d.Ud ? (d.screen.animate({width:"256px", height:"240px"}), d.I.zoom.attr("value", "zoom in"), d.Ud = !1) : (d.screen.animate({width:"512px", height:"480px"}), d.I.zoom.attr("value", "zoom out"), d.Ud = !0)
      }), a.offset && d.screen.mousedown(function(a) {
        if(d.a.h) {
          d.a.h.Kc = !0, d.a.h.Lc = a.pageX - d.screen.offset().left, d.a.h.Mc = a.pageY - d.screen.offset().top
        }
      }).mouseup(function() {
        setTimeout(function() {
          if(d.a.h) {
            d.a.h.Kc = !1, d.a.h.Lc = 0, d.a.h.Mc = 0
          }
        }, 500)
      }), typeof b != "undefined" && d.fh(b), d.Pb = d.screen[0].getContext("2d"), d.Pb.getImageData ? (d.sc = d.Pb.getImageData(0, 0, 256, 240), d.Xg(), a(document).bind("keydown", function(a) {
        d.a.Wb.Be(a)
      }).bind("keyup", function(a) {
        d.a.Wb.De(a)
      }).bind("keypress", function(a) {
        d.a.Wb.Ce(a)
      }), d.ng = new DynamicAudio({swf:c.C.swfPath + "dynamicaudio.swf"})) : e.html("Your browser doesn't support writing pixels directly to the <code>&lt;canvas&gt;</code> tag. Try the latest versions of Google Chrome, Safari, Opera or Firefox!")) : e.html("Your browser doesn't support the <code>&lt;canvas&gt;</code> tag. Try Google Chrome, Safari, Opera or Firefox!")
    }
    var e = this;
    c.prototype = {Ab:function() {
      var b = this;
      b.updateStatus("Downloading...");
      a.ajax({url:escape(b.bc.val()), xhr:function() {
        var d = a.ajaxSettings.xhr();
        typeof d.overrideMimeType !== "undefined" && d.overrideMimeType("text/plain; charset=x-user-defined");
        return b.xhr = d
      }, complete:function(a) {
        s.da.Kg() ? (a = JSNESBinaryToArray(a.responseBody).toArray(), a = String.fromCharCode.apply(void 0, a)) : a = a.responseText;
        b.a.Jc(a);
        b.a.start();
        b.enable()
      }})
    }, Xg:function() {
      this.Pb.fillStyle = "black";
      this.Pb.fillRect(0, 0, 256, 240);
      for(var a = 3;a < this.sc.data.length - 3;a += 4) {
        this.sc.data[a] = 255
      }
    }, enable:function() {
      this.I.pause.attr("disabled", f);
      this.a.kb ? this.I.pause.attr("value", "pause") : this.I.pause.attr("value", "resume");
      this.I.Te.attr("disabled", f);
      this.a.C.emulateSound ? this.I.hc.attr("value", "disable sound") : this.I.hc.attr("value", "enable sound")
    }, updateStatus:function(a) {
      this.status.text(a)
    }, fh:function(b) {
      this.bc.children().remove();
      a("<option>Select a ROM...</option>").appendTo(this.bc);
      for(var d in b) {
        if(b.hasOwnProperty(d)) {
          for(var c = a("<optgroup></optgroup>").attr("label", d), e = 0;e < b[d].length;++e) {
            a("<option>" + b[d][e][0] + "</option>").attr("value", b[d][e][1]).appendTo(c)
          }
          this.bc.append(c)
        }
      }
    }, gf:function(a) {
      return this.ng.writeInt(a)
    }, hf:function(a, b) {
      var c = this.sc.data, e, j, m;
      for(j = 0;j < 61440;++j) {
        e = a[j], e != b[j] && (m = j * 4, c[m] = e & 255, c[m + 1] = e >> 8 & 255, c[m + 2] = e >> 16 & 255, b[j] = e)
      }
      this.Pb.putImageData(this.sc, 0, 0)
    }};
    return c
  }
}(jQuery);
window.$ = $;
$.fn.JSNESUI = $.fn.cg;
window.JSNES = s;
s.prototype.loadRom = s.prototype.Jc;
s.prototype.start = s.prototype.start;
s.prototype.frame = s.prototype.frame;
s.prototype.reloadRom = s.prototype.Oe;
s.prototype.stop = s.prototype.stop;
s.prototype.toJSON = s.prototype.toJSON;
s.prototype.fromJSON = s.prototype.t;
s.CPU = s.Ka;
s.CPU.prototype.toJSON = s.Ka.prototype.toJSON;
s.CPU.prototype.fromJSON = s.Ka.prototype.t;
s.PPU = s.O;
s.PPU.prototype.toJSON = s.O.prototype.toJSON;
s.PPU.prototype.fromJSON = s.O.prototype.t;
s.Keyboard = s.vb;
s.Keyboard.prototype.keyDown = s.vb.prototype.Be;
s.Keyboard.prototype.keyUp = s.vb.prototype.De;
s.Keyboard.prototype.keyPress = s.vb.prototype.Ce;
s.prototype.isRunning = s.prototype.kb;
s.prototype.fpsFrameCount = s.prototype.Sb;
s.prototype.limitFrames = s.prototype.xd;
s.prototype.romData = s.prototype.ac;
s.prototype.reset = s.prototype.reset;
s.prototype.printFps = s.prototype.Dd;
s.prototype.resetFps = s.prototype.Se;
s.prototype.setFramerate = s.prototype.bh;
s.prototype.setLimitFrames = s.prototype.dh;

