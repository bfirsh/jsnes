var f=null;function h(a){return function(b){this[a]=b}}
function s(a){this.C={ui:s.tf,swfPath:"lib/",preferredFrameRate:60,fpsInterval:500,showDisplay:!0,emulateSound:!1,sampleRate:44100,CPU_FREQ_NTSC:1789772.5,CPU_FREQ_PAL:1773447.4};if(typeof a!="undefined")for(var b in this.C)typeof a[b]!="undefined"&&(this.C[b]=a[b]);this.nb=1E3/this.C.preferredFrameRate;this.ui=new this.C.ui(this);this.f=new s.Pa(this);this.j=new s.O(this);this.u=new s.N(this);this.h=f;this.dc=new s.Ab;this.ui.updateStatus("Ready to load a ROM.")}s.VERSION="<%= version %>";
s.prototype={pb:!1,Yb:0,Bd:!0,hc:f,reset:function(){this.h!==f&&this.h.reset();this.f.reset();this.j.reset();this.u.reset()},start:function(){var a=this;if(this.c!==f&&this.c.hb){if(!this.pb)this.pb=!0,this.tg=setInterval(function(){a.frame()},this.nb/2),this.Ue(),this.Hd(),this.fpsInterval=setInterval(function(){a.Hd()},this.C.fpsInterval)}else this.ui.updateStatus("There is no ROM loaded, or it is invalid.")},frame:function(){this.j.oh();var a=0,b=this.C.emulateSound,c=this.f,e=this.j,g=this.u;
a:for(;;){c.cyclesToHalt===0?(a=c.pg(),b&&g.rd(a),a*=3):c.cyclesToHalt>8?(a=24,b&&g.rd(8),c.cyclesToHalt-=8):(a=c.cyclesToHalt*3,b&&g.rd(c.cyclesToHalt),c.cyclesToHalt=0);for(;a>0;--a){e.curX===e.oa&&e.f_spVisibility===1&&e.scanline-21===e.pa&&e.lc(e.ve,!0);if(e.requestEndFrame&&(--e.nmiCounter,e.nmiCounter===0)){e.requestEndFrame=!1;e.ph();break a}++e.curX;if(e.curX===341)e.curX=0,e.sg()}}if(this.Bd&&this.zd)for(;+new Date-this.zd<this.nb;);++this.Yb;this.zd=+new Date},Hd:function(){var a=+new Date,
b="Running";this.yd&&(b+=": "+(this.Yb/((a-this.yd)/1E3)).toFixed(2)+" FPS");this.ui.updateStatus(b);this.Yb=0;this.yd=a},stop:function(){clearInterval(this.tg);clearInterval(this.fpsInterval);this.pb=!1},Qe:function(){this.hc!==f&&this.Oc(this.hc)},Oc:function(a){this.pb&&this.stop();this.ui.updateStatus("Loading ROM...");this.c=new s.te(this);this.c.load(a);if(this.c.hb){this.reset();this.h=this.c.jg();if(!this.h)return;this.h.Hb();this.j.Lb(this.c.Ag());this.hc=a;this.ui.updateStatus("Successfully loaded. Ready to be started.")}else this.ui.updateStatus("Invalid ROM!");
return this.c.hb},Ue:function(){this.yd=f;this.Yb=0},dh:function(a){this.C.preferredFrameRate=a;this.nb=1E3/a;this.u.Lh(this.C.sampleRate,!1)},eh:function(a){this.Bd=a;this.zd=f},toJSON:function(){return{romData:this.hc,cpu:this.f.toJSON(),mmap:this.h.toJSON(),ppu:this.j.toJSON()}},t:function(a){this.Oc(a.romData);this.f.t(a.cpu);this.h.t(a.mmap);this.j.t(a.ppu)}};s.da={Eb:function(a,b,c,e,g){for(var d=0;d<g;++d)c[e+d]=a[b+d]},Ch:function(a){for(var b=Array(a.length),c=0;c<a.length;++c)b[c]=a[c];return b},t:function(a,b){for(var c=0;c<a.kb.length;++c)a[a.kb[c]]=b[a.kb[c]]},toJSON:function(a){for(var b={},c=0;c<a.kb.length;++c)b[a.kb[c]]=a[a.kb[c]];return b},Lg:function(){return/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)}};s.Pa=function(a){this.a=a;this.irqType=this.irqRequested=this.ig=this.cyclesToHalt=this.Ib=this.F_BRK_NEW=this.F_BRK=this.F_NOTUSED_NEW=this.F_NOTUSED=this.F_ZERO=this.F_SIGN=this.F_OVERFLOW=this.F_INTERRUPT_NEW=this.F_INTERRUPT=this.F_DECIMAL=this.F_CARRY=this.REG_STATUS=this.REG_PC_NEW=this.REG_PC=this.REG_SP=this.REG_Y=this.REG_X=this.REG_ACC=this.mem=f;this.reset()};
s.Pa.prototype={ld:0,cg:1,vc:2,reset:function(){this.mem=Array(65536);for(var a=0;a<8192;++a)this.mem[a]=255;for(var b=0;b<4;++b)a=b*2048,this.mem[a+8]=247,this.mem[a+9]=239,this.mem[a+10]=223,this.mem[a+15]=191;for(a=8193;a<this.mem.length;++a)this.mem[a]=0;this.REG_Y=this.REG_X=this.REG_ACC=0;this.REG_SP=511;this.REG_PC_NEW=this.REG_PC=32767;this.REG_STATUS=40;this.hh(40);this.F_DECIMAL=this.F_CARRY=0;this.F_INTERRUPT_NEW=this.F_INTERRUPT=1;this.F_SIGN=this.F_OVERFLOW=0;this.F_BRK_NEW=this.F_BRK=
this.F_NOTUSED_NEW=this.F_NOTUSED=this.F_ZERO=1;this.Ib=(new s.Pa.re).Ib;this.cyclesToHalt=0;this.irqRequested=this.ig=!1;this.irqType=f},pg:function(){var a,b;if(this.irqRequested){a=this.F_CARRY|(this.F_ZERO===0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7;this.REG_PC_NEW=this.REG_PC;this.F_INTERRUPT_NEW=this.F_INTERRUPT;switch(this.irqType){case 0:if(this.F_INTERRUPT!=0)break;this.kg(a);break;case 1:this.lg(a);break;case 2:this.mg()}this.REG_PC=
this.REG_PC_NEW;this.F_INTERRUPT=this.F_INTERRUPT_NEW;this.F_BRK=this.F_BRK_NEW;this.irqRequested=!1}a=this.Ib[this.a.h.load(this.REG_PC+1)];var c=a>>24;b=0;var e=a>>8&255,g=this.REG_PC;this.REG_PC+=a>>16&255;var d=0;switch(e){case 0:d=this.load(g+2);break;case 1:d=this.load(g+2);d+=d<128?this.REG_PC:this.REG_PC-256;break;case 3:d=this.qb(g+2);break;case 4:d=this.REG_ACC;break;case 5:d=this.REG_PC;break;case 6:d=this.load(g+2)+this.REG_X&255;break;case 7:d=this.load(g+2)+this.REG_Y&255;break;case 8:d=
this.qb(g+2);(d&65280)!=(d+this.REG_X&65280)&&(b=1);d+=this.REG_X;break;case 9:d=this.qb(g+2);(d&65280)!=(d+this.REG_Y&65280)&&(b=1);d+=this.REG_Y;break;case 10:d=this.load(g+2);(d&65280)!=(d+this.REG_X&65280)&&(b=1);d+=this.REG_X;d&=255;d=this.qb(d);break;case 11:d=this.qb(this.load(g+2));(d&65280)!=(d+this.REG_Y&65280)&&(b=1);d+=this.REG_Y;break;case 12:d=this.qb(g+2),d=d<8191?this.mem[d]+(this.mem[d&65280|(d&255)+1&255]<<8):this.a.h.load(d)+(this.a.h.load(d&65280|(d&255)+1&255)<<8)}d&=65535;switch(a&
255){case 0:a=this.REG_ACC+this.load(d)+this.F_CARRY;this.F_OVERFLOW=((this.REG_ACC^this.load(d))&128)==0&&((this.REG_ACC^a)&128)!=0?1:0;this.F_CARRY=a>255?1:0;this.F_SIGN=a>>7&1;this.F_ZERO=a&255;this.REG_ACC=a&255;c+=b;break;case 1:this.REG_ACC&=this.load(d);this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;e!=11&&(c+=b);break;case 2:e==4?(this.F_CARRY=this.REG_ACC>>7&1,this.REG_ACC=this.REG_ACC<<1&255,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC):(a=this.load(d),this.F_CARRY=a>>
7&1,a=a<<1&255,this.F_SIGN=a>>7&1,this.F_ZERO=a,this.write(d,a));break;case 3:if(this.F_CARRY==0)c+=(g&65280)!=(d&65280)?2:1,this.REG_PC=d;break;case 4:if(this.F_CARRY==1)c+=(g&65280)!=(d&65280)?2:1,this.REG_PC=d;break;case 5:if(this.F_ZERO==0)c+=(g&65280)!=(d&65280)?2:1,this.REG_PC=d;break;case 6:a=this.load(d);this.F_SIGN=a>>7&1;this.F_OVERFLOW=a>>6&1;a&=this.REG_ACC;this.F_ZERO=a;break;case 7:if(this.F_SIGN==1)++c,this.REG_PC=d;break;case 8:if(this.F_ZERO!=0)c+=(g&65280)!=(d&65280)?2:1,this.REG_PC=
d;break;case 9:if(this.F_SIGN==0)c+=(g&65280)!=(d&65280)?2:1,this.REG_PC=d;break;case 10:this.REG_PC+=2;this.push(this.REG_PC>>8&255);this.push(this.REG_PC&255);this.F_BRK=1;this.push(this.F_CARRY|(this.F_ZERO==0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7);this.F_INTERRUPT=1;this.REG_PC=this.qb(65534);--this.REG_PC;break;case 11:if(this.F_OVERFLOW==0)c+=(g&65280)!=(d&65280)?2:1,this.REG_PC=d;break;case 12:if(this.F_OVERFLOW==1)c+=
(g&65280)!=(d&65280)?2:1,this.REG_PC=d;break;case 13:this.F_CARRY=0;break;case 14:this.F_DECIMAL=0;break;case 15:this.F_INTERRUPT=0;break;case 16:this.F_OVERFLOW=0;break;case 17:a=this.REG_ACC-this.load(d);this.F_CARRY=a>=0?1:0;this.F_SIGN=a>>7&1;this.F_ZERO=a&255;c+=b;break;case 18:a=this.REG_X-this.load(d);this.F_CARRY=a>=0?1:0;this.F_SIGN=a>>7&1;this.F_ZERO=a&255;break;case 19:a=this.REG_Y-this.load(d);this.F_CARRY=a>=0?1:0;this.F_SIGN=a>>7&1;this.F_ZERO=a&255;break;case 20:a=this.load(d)-1&255;
this.F_SIGN=a>>7&1;this.F_ZERO=a;this.write(d,a);break;case 21:this.REG_X=this.REG_X-1&255;this.F_SIGN=this.REG_X>>7&1;this.F_ZERO=this.REG_X;break;case 22:this.REG_Y=this.REG_Y-1&255;this.F_SIGN=this.REG_Y>>7&1;this.F_ZERO=this.REG_Y;break;case 23:this.REG_ACC=(this.load(d)^this.REG_ACC)&255;this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;c+=b;break;case 24:a=this.load(d)+1&255;this.F_SIGN=a>>7&1;this.F_ZERO=a;this.write(d,a&255);break;case 25:this.REG_X=this.REG_X+1&255;this.F_SIGN=this.REG_X>>
7&1;this.F_ZERO=this.REG_X;break;case 26:++this.REG_Y;this.REG_Y&=255;this.F_SIGN=this.REG_Y>>7&1;this.F_ZERO=this.REG_Y;break;case 27:this.REG_PC=d-1;break;case 28:this.push(this.REG_PC>>8&255);this.push(this.REG_PC&255);this.REG_PC=d-1;break;case 29:this.REG_ACC=this.load(d);this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;c+=b;break;case 30:this.REG_X=this.load(d);this.F_SIGN=this.REG_X>>7&1;this.F_ZERO=this.REG_X;c+=b;break;case 31:this.REG_Y=this.load(d);this.F_SIGN=this.REG_Y>>7&1;this.F_ZERO=
this.REG_Y;c+=b;break;case 32:e==4?(a=this.REG_ACC&255,this.F_CARRY=a&1,a>>=1,this.REG_ACC=a):(a=this.load(d)&255,this.F_CARRY=a&1,a>>=1,this.write(d,a));this.F_SIGN=0;this.F_ZERO=a;break;case 33:break;case 34:a=(this.load(d)|this.REG_ACC)&255;this.F_SIGN=a>>7&1;this.REG_ACC=this.F_ZERO=a;e!=11&&(c+=b);break;case 35:this.push(this.REG_ACC);break;case 36:this.F_BRK=1;this.push(this.F_CARRY|(this.F_ZERO==0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<
6|this.F_SIGN<<7);break;case 37:this.REG_ACC=this.vb();this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;break;case 38:a=this.vb();this.F_CARRY=a&1;this.F_ZERO=(a>>1&1)==1?0:1;this.F_INTERRUPT=a>>2&1;this.F_DECIMAL=a>>3&1;this.F_BRK=a>>4&1;this.F_NOTUSED=a>>5&1;this.F_OVERFLOW=a>>6&1;this.F_SIGN=a>>7&1;this.F_NOTUSED=1;break;case 39:e==4?(a=this.REG_ACC,b=this.F_CARRY,this.F_CARRY=a>>7&1,this.REG_ACC=a=(a<<1&255)+b):(a=this.load(d),b=this.F_CARRY,this.F_CARRY=a>>7&1,a=(a<<1&255)+b,this.write(d,
a));this.F_SIGN=a>>7&1;this.F_ZERO=a;break;case 40:e==4?(b=this.F_CARRY<<7,this.F_CARRY=this.REG_ACC&1,this.REG_ACC=a=(this.REG_ACC>>1)+b):(a=this.load(d),b=this.F_CARRY<<7,this.F_CARRY=a&1,a=(a>>1)+b,this.write(d,a));this.F_SIGN=a>>7&1;this.F_ZERO=a;break;case 41:a=this.vb();this.F_CARRY=a&1;this.F_ZERO=(a>>1&1)==0?1:0;this.F_INTERRUPT=a>>2&1;this.F_DECIMAL=a>>3&1;this.F_BRK=a>>4&1;this.F_NOTUSED=a>>5&1;this.F_OVERFLOW=a>>6&1;this.F_SIGN=a>>7&1;this.REG_PC=this.vb();this.REG_PC+=this.vb()<<8;if(this.REG_PC==
65535)return;--this.REG_PC;this.F_NOTUSED=1;break;case 42:this.REG_PC=this.vb();this.REG_PC+=this.vb()<<8;if(this.REG_PC==65535)return;break;case 43:a=this.REG_ACC-this.load(d)-(1-this.F_CARRY);this.F_SIGN=a>>7&1;this.F_ZERO=a&255;this.F_OVERFLOW=((this.REG_ACC^a)&128)!=0&&((this.REG_ACC^this.load(d))&128)!=0?1:0;this.F_CARRY=a<0?0:1;this.REG_ACC=a&255;e!=11&&(c+=b);break;case 44:this.F_CARRY=1;break;case 45:this.F_DECIMAL=1;break;case 46:this.F_INTERRUPT=1;break;case 47:this.write(d,this.REG_ACC);
break;case 48:this.write(d,this.REG_X);break;case 49:this.write(d,this.REG_Y);break;case 50:this.REG_X=this.REG_ACC;this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;break;case 51:this.REG_Y=this.REG_ACC;this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;break;case 52:this.REG_X=this.REG_SP-256;this.F_SIGN=this.REG_SP>>7&1;this.F_ZERO=this.REG_X;break;case 53:this.REG_ACC=this.REG_X;this.F_SIGN=this.REG_X>>7&1;this.F_ZERO=this.REG_X;break;case 54:this.REG_SP=this.REG_X+256;this.nh();break;
case 55:this.REG_ACC=this.REG_Y;this.F_SIGN=this.REG_Y>>7&1;this.F_ZERO=this.REG_Y;break;default:this.a.stop(),this.a.Dh="Game crashed, invalid opcode at address $"+g.toString(16)}return c},load:function(a){return a<8192?this.mem[a&2047]:this.a.h.load(a)},qb:function(a){return a<8191?this.mem[a&2047]|this.mem[a+1&2047]<<8:this.a.h.load(a)|this.a.h.load(a+1)<<8},write:function(a,b){a<8192?this.mem[a&2047]=b:this.a.h.write(a,b)},wb:function(a){if(!(this.irqRequested&&a==this.ld))this.irqRequested=!0,
this.irqType=a},push:function(a){this.a.h.write(this.REG_SP,a);--this.REG_SP;this.REG_SP=256|this.REG_SP&255},nh:function(){this.REG_SP=256|this.REG_SP&255},vb:function(){++this.REG_SP;this.REG_SP=256|this.REG_SP&255;return this.a.h.load(this.REG_SP)},De:function(a){this.cyclesToHalt+=a},lg:function(a){if((this.a.h.load(8192)&128)!=0)++this.REG_PC_NEW,this.push(this.REG_PC_NEW>>8&255),this.push(this.REG_PC_NEW&255),this.push(a),this.REG_PC_NEW=this.a.h.load(65530)|this.a.h.load(65531)<<8,--this.REG_PC_NEW},
mg:function(){this.REG_PC_NEW=this.a.h.load(65532)|this.a.h.load(65533)<<8;--this.REG_PC_NEW},kg:function(a){++this.REG_PC_NEW;this.push(this.REG_PC_NEW>>8&255);this.push(this.REG_PC_NEW&255);this.push(a);this.F_INTERRUPT_NEW=1;this.F_BRK_NEW=0;this.REG_PC_NEW=this.a.h.load(65534)|this.a.h.load(65535)<<8;--this.REG_PC_NEW},hh:function(a){this.F_CARRY=a&1;this.F_ZERO=a>>1&1;this.F_INTERRUPT=a>>2&1;this.F_DECIMAL=a>>3&1;this.F_BRK=a>>4&1;this.F_NOTUSED=a>>5&1;this.F_OVERFLOW=a>>6&1;this.F_SIGN=a>>7&
1},kb:["mem","cyclesToHalt","irqRequested","irqType","REG_ACC","REG_X","REG_Y","REG_SP","REG_PC","REG_PC_NEW","REG_STATUS","F_CARRY","F_DECIMAL","F_INTERRUPT","F_INTERRUPT_NEW","F_OVERFLOW","F_SIGN","F_ZERO","F_NOTUSED","F_NOTUSED_NEW","F_BRK","F_BRK_NEW"],toJSON:function(){return s.da.toJSON(this)},t:function(a){s.da.t(this,a)}};
s.Pa.re=function(){this.Ib=Array(256);for(var a=0;a<256;++a)this.Ib[a]=255;this.b(this.Qa,105,this.ca,2,2);this.b(this.Qa,101,this.q,2,3);this.b(this.Qa,117,this.H,2,4);this.b(this.Qa,109,this.o,3,4);this.b(this.Qa,125,this.M,3,4);this.b(this.Qa,121,this.Aa,3,4);this.b(this.Qa,97,this.Na,2,6);this.b(this.Qa,113,this.Ma,2,5);this.b(this.Ra,41,this.ca,2,2);this.b(this.Ra,37,this.q,2,3);this.b(this.Ra,53,this.H,2,4);this.b(this.Ra,45,this.o,3,4);this.b(this.Ra,61,this.M,3,4);this.b(this.Ra,57,this.Aa,
3,4);this.b(this.Ra,33,this.Na,2,6);this.b(this.Ra,49,this.Ma,2,5);this.b(this.Pb,10,this.rc,1,2);this.b(this.Pb,6,this.q,2,5);this.b(this.Pb,22,this.H,2,6);this.b(this.Pb,14,this.o,3,6);this.b(this.Pb,30,this.M,3,7);this.b(this.vf,144,this.Oa,2,2);this.b(this.wf,176,this.Oa,2,2);this.b(this.xf,240,this.Oa,2,2);this.b(this.ce,36,this.q,2,3);this.b(this.ce,44,this.o,3,4);this.b(this.yf,48,this.Oa,2,2);this.b(this.zf,208,this.Oa,2,2);this.b(this.Af,16,this.Oa,2,2);this.b(this.Bf,0,this.n,1,7);this.b(this.Cf,
80,this.Oa,2,2);this.b(this.Df,112,this.Oa,2,2);this.b(this.Ef,24,this.n,1,2);this.b(this.Ff,216,this.n,1,2);this.b(this.Gf,88,this.n,1,2);this.b(this.Hf,184,this.n,1,2);this.b(this.Sa,201,this.ca,2,2);this.b(this.Sa,197,this.q,2,3);this.b(this.Sa,213,this.H,2,4);this.b(this.Sa,205,this.o,3,4);this.b(this.Sa,221,this.M,3,4);this.b(this.Sa,217,this.Aa,3,4);this.b(this.Sa,193,this.Na,2,6);this.b(this.Sa,209,this.Ma,2,5);this.b(this.gd,224,this.ca,2,2);this.b(this.gd,228,this.q,2,3);this.b(this.gd,236,
this.o,3,4);this.b(this.hd,192,this.ca,2,2);this.b(this.hd,196,this.q,2,3);this.b(this.hd,204,this.o,3,4);this.b(this.tc,198,this.q,2,5);this.b(this.tc,214,this.H,2,6);this.b(this.tc,206,this.o,3,6);this.b(this.tc,222,this.M,3,7);this.b(this.If,202,this.n,1,2);this.b(this.Jf,136,this.n,1,2);this.b(this.Ta,73,this.ca,2,2);this.b(this.Ta,69,this.q,2,3);this.b(this.Ta,85,this.H,2,4);this.b(this.Ta,77,this.o,3,4);this.b(this.Ta,93,this.M,3,4);this.b(this.Ta,89,this.Aa,3,4);this.b(this.Ta,65,this.Na,2,
6);this.b(this.Ta,81,this.Ma,2,5);this.b(this.uc,230,this.q,2,5);this.b(this.uc,246,this.H,2,6);this.b(this.uc,238,this.o,3,6);this.b(this.uc,254,this.M,3,7);this.b(this.Kf,232,this.n,1,2);this.b(this.Lf,200,this.n,1,2);this.b(this.de,76,this.o,3,3);this.b(this.de,108,this.kf,3,5);this.b(this.Mf,32,this.o,3,6);this.b(this.Ua,169,this.ca,2,2);this.b(this.Ua,165,this.q,2,3);this.b(this.Ua,181,this.H,2,4);this.b(this.Ua,173,this.o,3,4);this.b(this.Ua,189,this.M,3,4);this.b(this.Ua,185,this.Aa,3,4);this.b(this.Ua,
161,this.Na,2,6);this.b(this.Ua,177,this.Ma,2,5);this.b(this.Qb,162,this.ca,2,2);this.b(this.Qb,166,this.q,2,3);this.b(this.Qb,182,this.Zd,2,4);this.b(this.Qb,174,this.o,3,4);this.b(this.Qb,190,this.Aa,3,4);this.b(this.Rb,160,this.ca,2,2);this.b(this.Rb,164,this.q,2,3);this.b(this.Rb,180,this.H,2,4);this.b(this.Rb,172,this.o,3,4);this.b(this.Rb,188,this.M,3,4);this.b(this.Sb,74,this.rc,1,2);this.b(this.Sb,70,this.q,2,5);this.b(this.Sb,86,this.H,2,6);this.b(this.Sb,78,this.o,3,6);this.b(this.Sb,94,
this.M,3,7);this.b(this.Nf,234,this.n,1,2);this.b(this.Va,9,this.ca,2,2);this.b(this.Va,5,this.q,2,3);this.b(this.Va,21,this.H,2,4);this.b(this.Va,13,this.o,3,4);this.b(this.Va,29,this.M,3,4);this.b(this.Va,25,this.Aa,3,4);this.b(this.Va,1,this.Na,2,6);this.b(this.Va,17,this.Ma,2,5);this.b(this.Of,72,this.n,1,3);this.b(this.Pf,8,this.n,1,3);this.b(this.Qf,104,this.n,1,4);this.b(this.Rf,40,this.n,1,4);this.b(this.Tb,42,this.rc,1,2);this.b(this.Tb,38,this.q,2,5);this.b(this.Tb,54,this.H,2,6);this.b(this.Tb,
46,this.o,3,6);this.b(this.Tb,62,this.M,3,7);this.b(this.Ub,106,this.rc,1,2);this.b(this.Ub,102,this.q,2,5);this.b(this.Ub,118,this.H,2,6);this.b(this.Ub,110,this.o,3,6);this.b(this.Ub,126,this.M,3,7);this.b(this.Sf,64,this.n,1,6);this.b(this.Tf,96,this.n,1,6);this.b(this.Wa,233,this.ca,2,2);this.b(this.Wa,229,this.q,2,3);this.b(this.Wa,245,this.H,2,4);this.b(this.Wa,237,this.o,3,4);this.b(this.Wa,253,this.M,3,4);this.b(this.Wa,249,this.Aa,3,4);this.b(this.Wa,225,this.Na,2,6);this.b(this.Wa,241,this.Ma,
2,5);this.b(this.Uf,56,this.n,1,2);this.b(this.Vf,248,this.n,1,2);this.b(this.Wf,120,this.n,1,2);this.b(this.jb,133,this.q,2,3);this.b(this.jb,149,this.H,2,4);this.b(this.jb,141,this.o,3,4);this.b(this.jb,157,this.M,3,5);this.b(this.jb,153,this.Aa,3,5);this.b(this.jb,129,this.Na,2,6);this.b(this.jb,145,this.Ma,2,6);this.b(this.jd,134,this.q,2,3);this.b(this.jd,150,this.Zd,2,4);this.b(this.jd,142,this.o,3,4);this.b(this.kd,132,this.q,2,3);this.b(this.kd,148,this.H,2,4);this.b(this.kd,140,this.o,3,
4);this.b(this.Xf,170,this.n,1,2);this.b(this.Yf,168,this.n,1,2);this.b(this.Zf,186,this.n,1,2);this.b(this.$f,138,this.n,1,2);this.b(this.ag,154,this.n,1,2);this.b(this.bg,152,this.n,1,2);this.Eh=[7,6,2,8,3,3,5,5,3,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,3,2,2,2,3,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,5,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,6,2,6,4,4,4,4,
2,5,2,5,5,5,5,5,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,5,2,5,4,4,4,4,2,4,2,4,4,4,4,4,2,6,2,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,3,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7];this.d=Array(56);this.d[0]="ADC";this.d[1]="AND";this.d[2]="ASL";this.d[3]="BCC";this.d[4]="BCS";this.d[5]="BEQ";this.d[6]="BIT";this.d[7]="BMI";this.d[8]="BNE";this.d[9]="BPL";this.d[10]="BRK";this.d[11]="BVC";this.d[12]="BVS";this.d[13]="CLC";this.d[14]="CLD";this.d[15]="CLI";this.d[16]="CLV";
this.d[17]="CMP";this.d[18]="CPX";this.d[19]="CPY";this.d[20]="DEC";this.d[21]="DEX";this.d[22]="DEY";this.d[23]="EOR";this.d[24]="INC";this.d[25]="INX";this.d[26]="INY";this.d[27]="JMP";this.d[28]="JSR";this.d[29]="LDA";this.d[30]="LDX";this.d[31]="LDY";this.d[32]="LSR";this.d[33]="NOP";this.d[34]="ORA";this.d[35]="PHA";this.d[36]="PHP";this.d[37]="PLA";this.d[38]="PLP";this.d[39]="ROL";this.d[40]="ROR";this.d[41]="RTI";this.d[42]="RTS";this.d[43]="SBC";this.d[44]="SEC";this.d[45]="SED";this.d[46]=
"SEI";this.d[47]="STA";this.d[48]="STX";this.d[49]="STY";this.d[50]="TAX";this.d[51]="TAY";this.d[52]="TSX";this.d[53]="TXA";this.d[54]="TXS";this.d[55]="TYA";this.Ah=["Zero Page           ","Relative            ","Implied             ","Absolute            ","Accumulator         ","Immediate           ","Zero Page,X         ","Zero Page,Y         ","Absolute,X          ","Absolute,Y          ","Preindexed Indirect ","Postindexed Indirect","Indirect Absolute   "]};
s.Pa.re.prototype={Qa:0,Ra:1,Pb:2,vf:3,wf:4,xf:5,ce:6,yf:7,zf:8,Af:9,Bf:10,Cf:11,Df:12,Ef:13,Ff:14,Gf:15,Hf:16,Sa:17,gd:18,hd:19,tc:20,If:21,Jf:22,Ta:23,uc:24,Kf:25,Lf:26,de:27,Mf:28,Ua:29,Qb:30,Rb:31,Sb:32,Nf:33,Va:34,Of:35,Pf:36,Qf:37,Rf:38,Tb:39,Ub:40,Sf:41,Tf:42,Wa:43,Uf:44,Vf:45,Wf:46,jb:47,jd:48,kd:49,Xf:50,Yf:51,Zf:52,$f:53,ag:54,bg:55,q:0,Oa:1,n:2,o:3,rc:4,ca:5,H:6,Zd:7,M:8,Aa:9,Na:10,Ma:11,kf:12,b:function(a,b,c,e,g){this.Ib[b]=a&255|(c&255)<<8|(e&255)<<16|(g&255)<<24}};s.Ab=function(){var a;this.K={ee:0,fe:1,ke:2,le:3,me:4,ge:5,he:6,je:7};this.ra=Array(8);for(a=0;a<this.ra.length;++a)this.ra[a]=64;this.sa=Array(8);for(a=0;a<this.sa.length;++a)this.sa[a]=64};
s.Ab.prototype={Xe:function(a,b){switch(a){case 88:this.ra[this.K.ee]=b;break;case 90:this.ra[this.K.fe]=b;break;case 17:this.ra[this.K.ke]=b;break;case 13:this.ra[this.K.le]=b;break;case 38:this.ra[this.K.me]=b;break;case 40:this.ra[this.K.ge]=b;break;case 37:this.ra[this.K.he]=b;break;case 39:this.ra[this.K.je]=b;break;case 103:this.sa[this.K.ee]=b;break;case 105:this.sa[this.K.fe]=b;break;case 99:this.sa[this.K.ke]=b;break;case 97:this.sa[this.K.le]=b;break;case 104:this.sa[this.K.me]=b;break;
case 98:this.sa[this.K.ge]=b;break;case 100:this.sa[this.K.he]=b;break;case 102:this.sa[this.K.je]=b;break;default:return!0}return!1},Fe:function(a){!this.Xe(a.keyCode,65)&&a.preventDefault&&a.preventDefault()},He:function(a){!this.Xe(a.keyCode,64)&&a.preventDefault&&a.preventDefault()},Ge:function(a){a.preventDefault()}};s.g={};s.g[0]=h("a");
s.g[0].prototype={reset:function(){this.Kc=this.bb=this.ab=0;this.Pc=!1;this.Rc=this.Qc=f},write:function(a,b){a<8192?this.a.f.mem[a&2047]=b:a>16407?this.a.f.mem[a]=b:a>8199&&a<16384?this.Pe(8192+(a&7),b):this.Pe(a,b)},load:function(a){a&=65535;return a>16407?this.a.f.mem[a]:a>=8192?this.Xg(a):this.a.f.mem[a&2047]},Xg:function(a){switch(a>>12){case 2:case 3:switch(a&7){case 0:return this.a.f.mem[8192];case 1:return this.a.f.mem[8193];case 2:return this.a.j.Wg();case 3:return 0;case 4:return this.a.j.lh();
case 5:return 0;case 6:return 0;case 7:return this.a.j.uh()}break;case 4:switch(a-16405){case 0:return this.a.u.Me(a);case 1:return this.Mg();case 2:if(this.Pc){for(var a=Math.max(0,this.Qc-4),b=Math.min(256,this.Qc+4),c=Math.min(240,this.Rc+4),e=0,g=Math.max(0,this.Rc-4);g<c;++g)for(var d=a;d<b;++d)if(this.a.j.buffer[(g<<8)+d]==16777215){e|=8;console.debug("Clicked on white!");break}e|=this.Pc?16:0;return(this.Ee()|e)&65535}else return this.Ee()}}return 0},Pe:function(a,b){switch(a){case 8192:this.a.f.mem[a]=
b;this.a.j.ef(b);break;case 8193:this.a.f.mem[a]=b;this.a.j.ff(b);break;case 8195:this.a.j.yh(b);break;case 8196:this.a.j.mh(b);break;case 8197:this.a.j.bh(b);break;case 8198:this.a.j.zh(b);break;case 8199:this.a.j.vh(b);break;case 16404:this.a.j.kh(b);break;case 16405:this.a.u.F(a,b);break;case 16406:if(b===0&&this.Kc===1)this.bb=this.ab=0;this.Kc=b;break;case 16407:this.a.u.F(a,b);break;default:a>=16384&&a<=16407&&this.a.u.F(a,b)}},Mg:function(){var a;switch(this.ab){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a=
this.a.dc.ra[this.ab];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:a=0;break;case 19:a=1;break;default:a=0}++this.ab;if(this.ab==24)this.ab=0;return a},Ee:function(){var a;switch(this.bb){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a=this.a.dc.sa[this.bb];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:a=0;break;case 19:a=1;break;default:a=0}++this.bb;if(this.bb==24)this.bb=0;return a},Hb:function(){!this.a.c.hb||
this.a.c.z<1?alert("NoMapper: Invalid ROM! Unable to load."):(this.Pg(),this.Nc(),this.Cd(),this.a.f.wb(this.a.f.vc))},Pg:function(){this.a.c.z>1?(this.V(0,32768),this.V(1,49152)):(this.V(0,32768),this.V(0,49152))},Nc:function(){this.a.c.s>0&&(this.a.c.s==1?(this.va(0,0),this.va(0,4096)):(this.va(0,0),this.va(1,4096)))},Cd:function(){if(this.a.c.od){var a=this.a.c.od;a!==f&&a.length==8192&&s.da.Eb(a,0,this.a.f.mem,24576,8192)}},V:function(a,b){a%=this.a.c.z;s.da.Eb(this.a.c.c[a],0,this.a.f.mem,b,
16384)},va:function(a,b){this.a.c.s!==0&&(this.a.j.Ka(),s.da.Eb(this.a.c.La[a%this.a.c.s],0,this.a.j.vramMem,b,4096),s.da.Eb(this.a.c.zb[a%this.a.c.s],0,this.a.j.D,b>>4,256))},Ng:function(a,b){this.V(a*2%this.a.c.z,b);this.V((a*2+1)%this.a.c.z,b+16384)},Je:function(a,b){this.a.c.s!==0&&(this.a.j.Ka(),this.va(a%this.a.c.s,b),this.va((a+1)%this.a.c.s,b+4096))},L:function(a,b){if(this.a.c.s!==0){this.a.j.Ka();var c=Math.floor(a/4)%this.a.c.s;s.da.Eb(this.a.c.La[c],0,this.a.j.vramMem,a%4*1024,1024);for(var c=
this.a.c.zb[c],e=b>>4,g=0;g<64;++g)this.a.j.D[e+g]=c[(a%4<<6)+g]}},ha:function(a,b){s.da.Eb(this.a.c.c[Math.floor(a/2)%this.a.c.z],a%2*8192,this.a.f.mem,b,8192)},toJSON:function(){return{joy1StrobeState:this.ab,joy2StrobeState:this.bb,joypadLastWrite:this.Kc}},t:function(a){this.ab=a.joy1StrobeState;this.bb=a.joy2StrobeState;this.Kc=a.joypadLastWrite}};s.g[1]=h("a");s.g[1].prototype=new s.g[0];
s.g[1].prototype.reset=function(){s.g[0].prototype.reset.apply(this);this.Tc=this.ia=this.wa=this.Ha=0;this.ub=this.tb=1;this.Xc=this.xb=this.xa=this.ib=0};
s.g[1].prototype.write=function(a,b){if(a<32768)s.g[0].prototype.write.apply(this,arguments);else if((b&128)!==0){if(this.Ha=this.wa=0,v(a)===0)this.ub=this.tb=1}else if(this.Ha=this.Ha&255-(1<<this.wa)|(b&1)<<this.wa,++this.wa,this.wa==5){var c=this.Ha,e;switch(v(a)){case 0:e=c&3;if(e!==this.ia)this.ia=e,(this.ia&2)===0?this.a.j.Lb(this.a.c.ue):(this.ia&1)!==0?this.a.j.Lb(this.a.c.sc):this.a.j.Lb(this.a.c.wc);this.tb=c>>2&1;this.ub=c>>3&1;this.ib=c>>4&1;break;case 1:this.xa=c>>4&1;this.a.c.s>0&&
(this.ib===0?this.xa===0?this.Je(c&15,0):this.Je(Math.floor(this.a.c.s/2)+(c&15),0):this.xa===0?this.va(c&15,0):this.va(Math.floor(this.a.c.s/2)+(c&15),0));break;case 2:this.xb=c>>4&1;this.a.c.s>0&&this.ib===1&&(this.xb===0?this.va(c&15,4096):this.va(Math.floor(this.a.c.s/2)+(c&15),4096));break;default:e=0,this.a.c.z>=32?this.ib===0?this.xa===1&&(e=16):e=(this.xa|this.xb<<1)<<3:this.a.c.z>=16&&this.xa===1&&(e=8),this.ub===0?this.Ng(e+(c&15),32768):(c=e*2+(c&15),this.tb===0?this.V(c,49152):this.V(c,
32768))}this.wa=this.Ha=0}};function v(a){return a>=32768&&a<=40959?0:a>=40960&&a<=49151?1:a>=49152&&a<=57343?2:3}s.g[1].prototype.Hb=function(){this.a.c.hb?(this.V(0,32768),this.V(this.a.c.z-1,49152),this.Nc(),this.Cd(),this.a.f.wb(this.a.f.vc)):alert("MMC1: Invalid ROM! Unable to load.")};s.g[1].prototype.toJSON=function(){var a=s.g[0].prototype.toJSON.apply(this);a.ia=this.ia;a.Tc=this.Tc;a.tb=this.tb;a.ub=this.ub;a.ib=this.ib;a.xa=this.xa;a.xb=this.xb;a.Xc=this.Xc;a.Ha=this.Ha;a.wa=this.wa;return a};
s.g[1].prototype.t=function(a){s.g[0].prototype.t.apply(this,a);this.ia=a.ia;this.Tc=a.Tc;this.tb=a.tb;this.ub=a.ub;this.ib=a.ib;this.xa=a.xa;this.xb=a.xb;this.Xc=a.Xc;this.Ha=a.Ha;this.wa=a.wa};s.g[2]=h("a");s.g[2].prototype=new s.g[0];s.g[2].prototype.write=function(a,b){a<32768?s.g[0].prototype.write.apply(this,arguments):this.V(b,32768)};s.g[2].prototype.Hb=function(){this.a.c.hb?(this.V(0,32768),this.V(this.a.c.z-1,49152),this.Nc(),this.a.f.wb(this.a.f.vc)):alert("UNROM: Invalid ROM! Unable to load.")};
s.g[4]=function(a){this.a=a;this.pf=0;this.qf=1;this.lf=2;this.mf=3;this.nf=4;this.of=5;this.rf=6;this.sf=7;this.Fb=this.cc=this.bc=this.Uc=this.ea=this.Ga=this.Db=f;this.Fa=!1};s.g[4].prototype=new s.g[0];
s.g[4].prototype.write=function(a,b){if(a<32768)s.g[0].prototype.write.apply(this,arguments);else switch(a){case 32768:this.Db=b&7;var c=b>>6&1;if(c!=this.Ga)this.Fa=!0;this.Ga=c;this.ea=b>>7&1;break;case 32769:c=b;switch(this.Db){case this.pf:this.ea===0?(this.L(c,0),this.L(c+1,1024)):(this.L(c,4096),this.L(c+1,5120));break;case this.qf:this.ea===0?(this.L(c,2048),this.L(c+1,3072)):(this.L(c,6144),this.L(c+1,7168));break;case this.lf:this.ea===0?this.L(c,4096):this.L(c,0);break;case this.mf:this.ea===
0?this.L(c,5120):this.L(c,1024);break;case this.nf:this.ea===0?this.L(c,6144):this.L(c,2048);break;case this.of:this.ea===0?this.L(c,7168):this.L(c,3072);break;case this.rf:if(this.Fa)this.Ga===0?this.ha((this.a.c.z-1)*2,49152):this.ha((this.a.c.z-1)*2,32768),this.Fa=!1;this.Ga===0?this.ha(c,32768):this.ha(c,49152);break;case this.sf:if(this.ha(c,40960),this.Fa)this.Ga===0?this.ha((this.a.c.z-1)*2,49152):this.ha((this.a.c.z-1)*2,32768),this.Fa=!1}break;case 40960:(b&1)!==0?this.a.j.Lb(this.a.c.sc):
this.a.j.Lb(this.a.c.wc);break;case 49152:this.bc=b;break;case 49153:this.cc=b;break;case 57344:this.Fb=0;break;case 57345:this.Fb=1}};s.g[4].prototype.Hb=function(){this.a.c.hb?(this.ha((this.a.c.z-1)*2,49152),this.ha((this.a.c.z-1)*2+1,57344),this.ha(0,32768),this.ha(1,40960),this.Nc(),this.Cd(),this.a.f.wb(this.a.f.vc)):alert("MMC3: Invalid ROM! Unable to load.")};
s.g[4].prototype.toJSON=function(){var a=s.g[0].prototype.toJSON.apply(this);a.Db=this.Db;a.Ga=this.Ga;a.ea=this.ea;a.Uc=this.Uc;a.bc=this.bc;a.cc=this.cc;a.Fb=this.Fb;a.Fa=this.Fa;return a};s.g[4].prototype.t=function(a){s.g[0].prototype.t.apply(this,a);this.Db=a.Db;this.Ga=a.Ga;this.ea=a.ea;this.Uc=a.Uc;this.bc=a.bc;this.cc=a.cc;this.Fb=a.Fb;this.Fa=a.Fa};s.N=function(a){this.a=a;this.aa=new s.N.fd(this,!0);this.ba=new s.N.fd(this,!1);this.W=new s.N.be(this);this.ja=new s.N.ae(this);this.Q=new s.N.$d(this);this.Gh=f;this.Hc=4;this.ac=2048;this.xe=f;this.we=8192;this.Bb=0;this.We=44100;this.gb=this.fb=this.B=this.A=this.Ie=f;this.jc=Array(this.we*2);this.$b=!1;this.Fh=this.Zb=f;this.Jc=this.Kh=this.qh=!1;this.ah=this.Yc=this.nb=this.kc=this.Xb=this.Y=this.ec=f;this.Ja=0;this.P=this.la=this.ya=this.na=this.ma=f;this.td=this.Ae=this.bd=this.ad=this.Gd=
this.Fd=0;this.r=256;this.Ed=this.Dd=this.Gc=this.Ze=this.$e=this.cf=this.bf=this.af=this.Qd=this.Rd=this.Ud=this.Td=this.Sd=f;this.sb=[80,170,100,150,128];this.fh(this.sb);this.Ig();this.Hg();this.Jg();this.Gg();for(a=0;a<20;++a)a===16?this.F(16400,16):this.F(16384+a,0);this.reset()};
s.N.prototype={reset:function(){this.We=this.a.C.sampleRate;this.Yc=Math.floor(1024*this.a.C.CPU_FREQ_NTSC*this.a.C.Vg/(this.We*60));this.nb=Math.floor(14915*this.a.C.Vg/60);this.Bb=this.kc=0;this.df(0);this.ah=this.Xb=this.Y=this.ec=0;this.ac=2048;this.Jc=this.$b=!1;this.Zg();this.aa.reset();this.ba.reset();this.W.reset();this.ja.reset();this.Q.reset();this.la=this.ya=this.na=this.ma=this.P=this.Bb=0;this.$b=!1;this.Hc=4;this.xe=255;this.qh=!1;this.bd=this.ad=this.Gd=this.Fd=0;this.Dd=-5E5;this.Ed=
5E5},Me:function(){var a=0;a|=this.aa.Za();a|=this.ba.Za()<<1;a|=this.W.Za()<<2;a|=this.ja.Za()<<3;a|=this.Q.Za()<<4;a|=(this.Zb&&this.$b?1:0)<<6;a|=this.Q.yg()<<7;this.Zb=!1;this.Q.ob=!1;return a&65535},F:function(a,b){if(a>=16384&&a<16388)this.aa.F(a,b);else if(a>=16388&&a<16392)this.ba.F(a,b);else if(a>=16392&&a<16396)this.W.F(a,b);else if(a>=16396&&a<=16399)this.ja.F(a,b);else if(a===16400)this.Q.F(a,b);else if(a===16401)this.Q.F(a,b);else if(a===16402)this.Q.F(a,b);else if(a===16403)this.Q.F(a,
b);else if(a===16405){this.df(b);if(b!==0&&this.ac>0)this.Jc=!0;this.Q.F(a,b)}else if(a===16407)this.Xb=b>>7&1,this.ec=0,this.Zb=!1,this.$b=(b>>6&1)===0?!0:!1,this.Xb===0?this.Y=this.Hc=4:(this.Hc=5,this.Y=0,this.Ce())},Zg:function(){this.Y=this.Xb===0?4:0},df:function(a){this.xe=a&65535;this.aa.eb((a&1)!==0);this.ba.eb((a&2)!==0);this.W.eb((a&4)!==0);this.ja.eb((a&8)!==0);this.Q.eb((a&16)!==0)},rd:function(a){if(this.ac>0&&this.Jc){if(this.ac-=a,this.ac<=0)this.Jc=!1}else{a+=this.Gc;var b=this.Yc-
this.kc;a<<10>b?(this.Gc=(a<<10)-b>>10,a-=this.Gc):this.Gc=0;var c=this.Q,e=this.W,g=this.aa,d=this.ba,b=this.ja;if(c.isEnabled)for(c.$c-=a<<3;c.$c<=0&&c.Fc>0;)c.$c+=c.Fc,c.gg();if(e.i>0)for(e.w-=a;e.w<=0;)if(e.w+=e.i+1,e.Gb>0&&e.l>0&&(++e.yb,e.yb&=31,e.isEnabled))e.p=e.yb>=16?e.yb&15:15-(e.yb&15),e.p<<=4;g.w-=a;g.w<=0&&(g.w+=g.i+1<<1,++g.Nb,g.Nb&=7,g.za());d.w-=a;d.w<=0&&(d.w+=d.i+1<<1,++d.Nb,d.Nb&=7,d.za());c=a;if(b.w-c>0)b.w-=c,b.P+=c,b.xc+=c*b.p;else for(;--c>0;){if(--b.w<=0&&b.i>0)b.mc<<=1,b.pc=
(b.mc<<(b.Id===0?1:6)^b.mc)&32768,b.pc!==0?(b.mc|=1,b.Vc=0,b.p=0):(b.Vc=1,b.p=b.isEnabled&&b.l>0?b.r:0),b.w+=b.i;b.xc+=b.p;++b.P}this.$b&&this.Zb&&this.a.f.wb(this.a.f.ld);this.ec+=a<<1;this.ec>=this.nb&&(this.ec-=this.nb,this.Ce());this.fg(a);this.kc+=a<<10;this.kc>=this.Yc&&(this.Ia(),this.kc-=this.Yc)}},fg:function(a){if(this.W.Ld){this.Ja=Math.floor((this.W.w<<4)/(this.W.i+1));if(this.Ja>16)this.Ja=16;if(this.W.yb>=16)this.Ja=16-this.Ja;this.Ja+=this.W.p}a===2?(this.ya+=this.Ja<<1,this.la+=this.Q.Ia<<
1,this.ma+=this.aa.p<<1,this.na+=this.ba.p<<1,this.P+=2):a===4?(this.ya+=this.Ja<<2,this.la+=this.Q.Ia<<2,this.ma+=this.aa.p<<2,this.na+=this.ba.p<<2,this.P+=4):(this.ya+=a*this.Ja,this.la+=a*this.Q.Ia,this.ma+=a*this.aa.p,this.na+=a*this.ba.p,this.P+=a)},Ce:function(){++this.Y;if(this.Y>=this.Hc)this.Y=0;if(this.Y===1||this.Y===3)this.W.Cb(),this.aa.Cb(),this.ba.Cb(),this.ja.Cb(),this.aa.ye(),this.ba.ye();this.Y>=0&&this.Y<4&&(this.aa.Ac(),this.ba.Ac(),this.ja.Ac(),this.W.hg());if(this.Y===3&&this.Xb===
0)this.Zb=!0},Ia:function(){var a,b;this.P>0?(this.ma<<=4,this.ma=Math.floor(this.ma/this.P),this.na<<=4,this.na=Math.floor(this.na/this.P),this.ya=Math.floor(this.ya/this.P),this.la<<=4,this.la=Math.floor(this.la/this.P),this.P=0):(this.ma=this.aa.p<<4,this.na=this.ba.p<<4,this.ya=this.W.p,this.la=this.Q.Ia<<4);var c=Math.floor((this.ja.xc<<4)/this.ja.P);this.ja.xc=c>>4;this.ja.P=1;a=this.ma*this.Sd+this.na*this.Td>>8;b=3*this.ya*this.Ud+(c<<1)*this.Rd+this.la*this.Qd>>8;a>=this.fb.length&&(a=this.fb.length-
1);b>=this.gb.length&&(b=this.gb.length-1);var e=this.fb[a]+this.gb[b]-this.td;a=this.ma*this.af+this.na*this.bf>>8;b=3*this.ya*this.cf+(c<<1)*this.$e+this.la*this.Ze>>8;a>=this.fb.length&&(a=this.fb.length-1);b>=this.gb.length&&(b=this.gb.length-1);a=this.fb[a]+this.gb[b]-this.td;e-=this.Fd;this.Fd+=e;this.ad+=e-(this.ad>>10);e=this.ad;a-=this.Gd;this.Gd+=a;this.bd+=a-(this.bd>>10);a=this.bd;if(e>this.Dd)this.Dd=e;if(e<this.Ed)this.Ed=e;this.jc[++this.Bb]=e;this.jc[++this.Bb]=a;if(this.Bb===this.jc.length)this.a.ui.hf(this.jc),
this.jc=Array(this.we*2),this.Bb=0;this.la=this.ya=this.na=this.ma=0},wd:function(a){return this.Ie[a>>3]},wg:function(a){if(a>=0&&a<16)return this.A[a];return 0},Bg:function(a){if(a>=0&&a<16)return this.B[a];return 0},fh:function(a){for(var b=0;b<5;++b)this.sb[b]=a[b];this.sh()},sh:function(){this.Sd=this.sb[0]*this.r>>8;this.Td=this.sb[1]*this.r>>8;this.Ud=this.sb[2]*this.r>>8;this.Rd=this.sb[3]*this.r>>8;this.Qd=this.sb[4]*this.r>>8;this.af=this.r-this.Sd;this.bf=this.r-this.Td;this.cf=this.r-
this.Ud;this.$e=this.r-this.Rd;this.Ze=this.r-this.Qd},Ig:function(){this.Ie=[10,254,20,2,40,4,80,6,160,8,60,10,14,12,26,14,12,16,24,18,48,20,96,22,192,24,72,26,16,28,32,30]},Hg:function(){this.A=Array(16);this.A[0]=3424;this.A[1]=3040;this.A[2]=2720;this.A[3]=2560;this.A[4]=2288;this.A[5]=2032;this.A[6]=1808;this.A[7]=1712;this.A[8]=1520;this.A[9]=1280;this.A[10]=1136;this.A[11]=1024;this.A[12]=848;this.A[13]=672;this.A[14]=576;this.A[15]=432},Jg:function(){this.B=Array(16);this.B[0]=4;this.B[1]=
8;this.B[2]=16;this.B[3]=32;this.B[4]=64;this.B[5]=96;this.B[6]=128;this.B[7]=160;this.B[8]=202;this.B[9]=254;this.B[10]=380;this.B[11]=508;this.B[12]=762;this.B[13]=1016;this.B[14]=2034;this.B[15]=4068},Gg:function(){var a,b,c=0,e=0;this.fb=Array(512);this.gb=Array(3264);for(b=0;b<512;++b)a=95.52/(8128/(b/16)+100),a*=0.98411,a*=5E4,a=Math.floor(a),this.fb[b]=a,a>c&&(c=a);for(b=0;b<3264;++b)a=163.67/(24329/(b/16)+100),a*=0.98411,a*=5E4,a=Math.floor(a),this.gb[b]=a,a>e&&(e=a);this.Ae=c+e;this.td=this.Ae/
2}};s.N.$d=function(a){this.u=a;this.pe=0;this.oe=1;this.ne=2;this.xd=this.isEnabled=f;this.ob=!1;this.data=this.Dc=this.Ia=this.Oe=this.Ne=this.$c=this.ka=this.Jb=this.cb=this.gc=this.Ya=this.Ec=this.Fc=this.Kb=f;this.reset()};
s.N.$d.prototype={gg:function(){if(this.xd)(this.data&1)===0?this.Ya>0&&--this.Ya:this.Ya<63&&++this.Ya,this.Ia=this.isEnabled?(this.Ya<<1)+this.Dc:0,this.data>>=1;--this.Ec;if(this.Ec<=0)this.xd=!1,this.rg(),this.Ec=8;this.ob&&this.u.a.f.wb(this.u.a.f.ld)},rg:function(){if(this.ka===0&&this.Kb===this.oe)this.cb=this.gc,this.ka=this.Jb;if(this.ka>0&&(this.Tg(),this.ka===0&&this.Kb===this.ne))this.ob=!0},Tg:function(){this.data=this.u.a.h.load(this.cb);this.u.a.f.De(4);--this.ka;++this.cb;if(this.cb>
65535)this.cb=32768;this.xd=!0},F:function(a,b){if(a===16400){if(b>>6===0)this.Kb=this.pe;else if((b>>6&1)===1)this.Kb=this.oe;else if(b>>6===2)this.Kb=this.ne;if((b&128)===0)this.ob=!1;this.Fc=this.u.wg(b&15)}else if(a===16401)this.Ya=b>>1&63,this.Dc=b&1,this.Ia=(this.Ya<<1)+this.Dc;else if(a===16402)this.cb=this.gc=b<<6|49152,this.Ne=b;else if(a===16403)this.ka=this.Jb=(b<<4)+1,this.Oe=b;else if(a===16405)(b>>4&1)===0?this.ka=0:(this.cb=this.gc,this.ka=this.Jb),this.ob=!1},eb:function(a){if(!this.isEnabled&&
a)this.ka=this.Jb;this.isEnabled=a},Za:function(){return this.ka===0||!this.isEnabled?0:1},yg:function(){return this.ob?1:0},reset:function(){this.ob=this.isEnabled=!1;this.Kb=this.pe;this.data=this.Oe=this.Ne=this.$c=this.Dc=this.Ia=this.ka=this.Jb=this.cb=this.gc=this.Ya=this.Ec=this.Fc=0}};s.N.ae=function(a){this.u=a;this.r=this.R=this.Ba=this.U=this.i=this.w=this.l=this.ih=this.mb=this.ga=this.lb=this.Ca=this.isEnabled=f;this.mc=16384;this.p=this.Id=this.Vc=f;this.xc=0;this.P=1;this.pc=f;this.reset()};
s.N.ae.prototype={reset:function(){this.i=this.w=0;this.isEnabled=!1;this.l=0;this.ih=this.lb=this.Ca=this.ga=!1;this.r=this.R=this.Ba=this.U=0;this.mc=1;this.pc=this.p=this.Id=this.Vc=0},Cb:function(){this.ga&&this.l>0&&(--this.l,this.l===0&&this.za())},Ac:function(){if(this.mb)this.mb=!1,this.Ba=this.U+1,this.R=15;else if(--this.Ba<=0)this.Ba=this.U+1,this.R>0?--this.R:this.R=this.lb?15:0;this.r=this.Ca?this.U:this.R;this.za()},za:function(){if(this.isEnabled&&this.l>0)this.p=this.Vc*this.r},F:function(a,
b){if(a===16396)this.Ca=(b&16)!==0,this.U=b&15,this.lb=(b&32)!==0,this.ga=(b&32)===0,this.r=this.Ca?this.U:this.R;else if(a===16398)this.i=this.u.Bg(b&15),this.Id=b>>7;else if(a===16399)this.l=this.u.wd(b&248),this.mb=!0},eb:function(a){this.isEnabled=a;if(!a)this.l=0;this.za()},Za:function(){return this.l===0||!this.isEnabled?0:1}};
s.N.fd=function(a,b){this.u=a;this.ng=[0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,1,0,0,1,1,1,1,1];this.Hh=[1,-1,0,0,0,0,0,0,1,0,-1,0,0,0,0,0,1,0,0,0,-1,0,0,0,-1,0,1,0,0,0,0,0];this.Ye=b;this.th=this.p=this.Mh=this.ud=this.r=this.R=this.Ba=this.U=this.Ob=this.ed=this.dd=this.cd=this.Nb=this.l=this.i=this.w=this.Xd=this.Wd=this.mb=this.lb=this.Ca=this.Vd=this.ga=this.isEnabled=f;this.reset()};
s.N.fd.prototype={reset:function(){this.th=this.ud=this.r=this.R=this.Ba=this.U=this.Ob=this.ed=this.dd=this.cd=this.Nb=this.l=this.i=this.w=0;this.lb=this.Ca=this.Wd=this.Vd=this.ga=this.isEnabled=!1},Cb:function(){this.ga&&this.l>0&&(--this.l,this.l===0&&this.za())},Ac:function(){if(this.mb)this.mb=!1,this.Ba=this.U+1,this.R=15;else if(--this.Ba<=0)this.Ba=this.U+1,this.R>0?--this.R:this.R=this.lb?15:0;this.r=this.Ca?this.U:this.R;this.za()},ye:function(){if(--this.cd<=0&&(this.cd=this.dd+1,this.Vd&&
this.Ob>0&&this.i>7))if(this.Wd=!1,this.ed===0){if(this.i+=this.i>>this.Ob,this.i>4095)this.i=4095,this.Wd=!0}else this.i-=(this.i>>this.Ob)-(this.Ye?1:0);if(this.Xd)this.Xd=!1,this.cd=this.dd+1},za:function(){this.p=this.isEnabled&&this.l>0&&this.i>7?this.ed===0&&this.i+(this.i>>this.Ob)>4095?0:this.r*this.ng[(this.ud<<3)+this.Nb]:0},F:function(a,b){var c=this.Ye?0:4;if(a===16384+c)this.Ca=(b&16)!==0,this.U=b&15,this.lb=(b&32)!==0,this.ud=b>>6&3,this.ga=(b&32)===0,this.r=this.Ca?this.U:this.R,this.za();
else if(a===16385+c)this.Vd=(b&128)!==0,this.dd=b>>4&7,this.ed=b>>3&1,this.Ob=b&7,this.Xd=!0;else if(a===16386+c)this.i&=1792,this.i|=b;else if(a===16387+c){this.i&=255;this.i|=(b&7)<<8;if(this.isEnabled)this.l=this.u.wd(b&248);this.mb=!0}},eb:function(a){this.isEnabled=a;if(!a)this.l=0;this.za()},Za:function(){return this.l===0||!this.isEnabled?0:1}};s.N.be=function(a){this.u=a;this.pc=this.p=this.Ad=this.Gb=this.l=this.yb=this.i=this.w=this.Lc=this.Mc=this.ga=this.Ld=this.isEnabled=f;this.reset()};
s.N.be.prototype={reset:function(){this.yb=this.i=this.w=0;this.Ld=this.isEnabled=!1;this.l=0;this.ga=!1;this.Ad=this.Gb=0;this.Mc=!0;this.Lc=!1;this.pc=0;this.p=15},Cb:function(){this.ga&&this.l>0&&(--this.l,this.l===0&&this.qc())},hg:function(){this.Mc?(this.Gb=this.Ad,this.qc()):this.Gb>0&&(--this.Gb,this.qc());if(!this.Lc)this.Mc=!1},Za:function(){return this.l===0||!this.isEnabled?0:1},Me:function(){return 0},F:function(a,b){if(a===16392)this.Lc=(b&128)!==0,this.Ad=b&127,this.ga=!this.Lc;else if(a===
16394)this.i&=1792,this.i|=b;else if(a===16395)this.i&=255,this.i|=(b&7)<<8,this.l=this.u.wd(b&248),this.Mc=!0;this.qc()},eb:function(a){this.isEnabled=a;if(!a)this.l=0;this.qc()},qc:function(){this.Ld=this.isEnabled&&this.i>7&&this.Gb>0&&this.l>0}};s.O=function(a){this.a=a;this.rb=this.vramMirrorTable=this.Ea=this.currentMirroring=this.ntable1=this.D=this.imgPalette=this.sprPalette=this.hitSpr0=this.pa=this.oa=this.pd=this.$a=this.X=this.Mb=this.qa=this.m=this.T=this.curX=this.lastRenderedScanline=this.scanline=this.scantile=this.validTileData=this.pixrendered=this.bgbuffer=this.Le=this.buffer=this.Xa=this.curNt=this.regS=this.regFH=this.regHT=this.regVT=this.regH=this.regV=this.regFV=this.cntHT=this.cntVT=this.cntH=this.cntV=this.cntFV=this.f_dispType=
this.f_bgClipping=this.f_spClipping=this.f_bgVisibility=this.f_spVisibility=this.f_color=this.f_nTblAddress=this.f_addrInc=this.f_spPatternTable=this.f_bgPatternTable=this.f_spriteSize=this.f_nmiOnVblank=this.scanlineAlreadyRendered=this.nmiCounter=this.validTileData=this.dummyCycleToggle=this.nmiOk=this.requestEndFrame=this.currentMirroring=this.sramAddress=this.firstWrite=this.vramBufferedReadValue=this.vramTmpAddress=this.vramAddress=this.spriteMem=this.vramMem=f;this.jh=!1;this.qd=!0;this.reset()};
s.O.prototype={ve:6,md:7,reset:function(){var a;this.vramMem=Array(32768);this.spriteMem=Array(256);for(a=0;a<this.vramMem.length;++a)this.vramMem[a]=0;for(a=0;a<this.spriteMem.length;++a)this.spriteMem[a]=0;this.vramTmpAddress=this.vramAddress=f;this.vramBufferedReadValue=0;this.firstWrite=!0;this.sramAddress=0;this.currentMirroring=-1;this.validTileData=this.dummyCycleToggle=this.nmiOk=this.requestEndFrame=!1;this.nmiCounter=0;this.scanlineAlreadyRendered=f;this.regS=this.regFH=this.regHT=this.regVT=
this.regH=this.regV=this.regFV=this.cntHT=this.cntVT=this.cntH=this.cntV=this.cntFV=this.f_dispType=this.f_bgClipping=this.f_spClipping=this.f_bgVisibility=this.f_spVisibility=this.f_color=this.f_nTblAddress=this.f_addrInc=this.f_spPatternTable=this.f_bgPatternTable=this.f_spriteSize=this.f_nmiOnVblank=0;this.curNt=f;this.Xa=Array(32);this.buffer=Array(61440);this.Le=Array(61440);this.bgbuffer=Array(61440);this.pixrendered=Array(61440);this.validTileData=f;this.scantile=Array(32);this.scanline=0;
this.lastRenderedScanline=-1;this.curX=0;this.T=Array(64);this.m=Array(64);this.qa=Array(64);this.Mb=Array(64);this.X=Array(64);this.$a=Array(64);this.pd=Array(64);this.pa=this.oa=0;this.hitSpr0=!1;this.sprPalette=Array(16);this.imgPalette=Array(16);this.D=Array(512);for(a=0;a<512;++a)this.D[a]=new s.O.nd;this.ntable1=Array(4);this.currentMirroring=-1;this.Ea=Array(4);for(a=0;a<4;++a)this.Ea[a]=new s.O.qe(32,32,"Nt"+a);this.vramMirrorTable=Array(32768);for(a=0;a<32768;++a)this.vramMirrorTable[a]=
a;this.rb=new s.O.se;this.rb.Og();this.ef(0);this.ff(0)},Lb:function(a){if(a!=this.currentMirroring){this.currentMirroring=a;this.Ka();if(this.vramMirrorTable===f)this.vramMirrorTable=Array(32768);for(var b=0;b<32768;++b)this.vramMirrorTable[b]=b;this.J(16160,16128,32);this.J(16192,16128,32);this.J(16256,16128,32);this.J(16320,16128,32);this.J(12288,8192,3840);this.J(16384,0,16384);a==this.a.c.sc?(this.ntable1[0]=0,this.ntable1[1]=0,this.ntable1[2]=1,this.ntable1[3]=1,this.J(9216,8192,1024),this.J(11264,
10240,1024)):a==this.a.c.wc?(this.ntable1[0]=0,this.ntable1[1]=1,this.ntable1[2]=0,this.ntable1[3]=1,this.J(10240,8192,1024),this.J(11264,9216,1024)):a==this.a.c.ue?(this.ntable1[0]=0,this.ntable1[1]=0,this.ntable1[2]=0,this.ntable1[3]=0,this.J(9216,8192,1024),this.J(10240,8192,1024),this.J(11264,8192,1024)):a==this.a.c.eg?(this.ntable1[0]=1,this.ntable1[1]=1,this.ntable1[2]=1,this.ntable1[3]=1,this.J(9216,9216,1024),this.J(10240,9216,1024),this.J(11264,9216,1024)):(this.ntable1[0]=0,this.ntable1[1]=
1,this.ntable1[2]=2,this.ntable1[3]=3)}},J:function(a,b,c){for(var e=0;e<c;++e)this.vramMirrorTable[a+e]=b+e},ph:function(){this.a.f.wb(this.a.f.cg);this.lastRenderedScanline<239&&this.Se(this.lastRenderedScanline+1,240-this.lastRenderedScanline);this.qg();this.lastRenderedScanline=-1},sg:function(){switch(this.scanline){case 19:if(this.dummyCycleToggle)this.curX=1,this.dummyCycleToggle=!this.dummyCycleToggle;break;case 20:this.lc(this.md,!1);this.lc(this.ve,!1);this.hitSpr0=!1;this.pa=this.oa=-1;
if(this.f_bgVisibility==1||this.f_spVisibility==1)this.cntFV=this.regFV,this.cntV=this.regV,this.cntH=this.regH,this.cntVT=this.regVT,this.cntHT=this.regHT,this.f_bgVisibility==1&&this.Re(!1,0);this.f_bgVisibility==1&&this.f_spVisibility==1&&this.Wb(0);break;case 261:this.lc(this.md,!0);this.requestEndFrame=!0;this.nmiCounter=9;this.scanline=-1;break;default:if(this.scanline>=21&&this.scanline<=260&&this.f_bgVisibility==1){if(!this.scanlineAlreadyRendered)this.cntHT=this.regHT,this.cntH=this.regH,
this.Re(!0,this.scanline+1-21);this.scanlineAlreadyRendered=!1;if(!this.hitSpr0&&this.f_spVisibility==1&&this.T[0]>=-7&&this.T[0]<256&&this.m[0]+1<=this.scanline-20&&this.m[0]+1+(this.f_spriteSize===0?8:16)>=this.scanline-20&&this.Wb(this.scanline-20))this.hitSpr0=!0}}++this.scanline;this.Kd();this.Bc()},oh:function(){var a=0;if(this.f_dispType===0)a=this.imgPalette[0];else switch(this.f_color){case 0:a=0;break;case 1:a=65280;break;case 2:a=16711680;break;case 3:a=0;break;case 4:a=255;break;default:a=
0}var b=this.buffer,c;for(c=0;c<61440;++c)b[c]=a;a=this.pixrendered;for(c=0;c<a.length;++c)a[c]=65},qg:function(){var a,b,c=this.buffer;if(this.jh){if(this.T[0]>=0&&this.T[0]<256&&this.m[0]>=0&&this.m[0]<240){for(a=0;a<256;++a)c[(this.m[0]<<8)+a]=16733525;for(a=0;a<240;++a)c[(a<<8)+this.T[0]]=16733525}if(this.oa>=0&&this.oa<256&&this.pa>=0&&this.pa<240){for(a=0;a<256;++a)c[(this.pa<<8)+a]=5635925;for(a=0;a<240;++a)c[(a<<8)+this.oa]=5635925}}if(this.qd||this.f_bgClipping===0||this.f_spClipping===0)for(b=
0;b<240;++b)for(a=0;a<8;++a)c[(b<<8)+a]=0;if(this.qd)for(b=0;b<240;++b)for(a=0;a<8;++a)c[(b<<8)+255-a]=0;if(this.qd)for(b=0;b<8;++b)for(a=0;a<256;++a)c[(b<<8)+a]=0,c[(239-b<<8)+a]=0;this.a.C.showDisplay&&this.a.ui.jf(c,this.Le)},ef:function(a){this.Ka();this.f_nmiOnVblank=a>>7&1;this.f_spriteSize=a>>5&1;this.f_bgPatternTable=a>>4&1;this.f_spPatternTable=a>>3&1;this.f_addrInc=a>>2&1;this.f_nTblAddress=a&3;this.regV=a>>1&1;this.regH=a&1;this.regS=a>>4&1},ff:function(a){this.Ka();this.f_color=a>>5&7;
this.f_spVisibility=a>>4&1;this.f_bgVisibility=a>>3&1;this.f_spClipping=a>>2&1;this.f_bgClipping=a>>1&1;this.f_dispType=a&1;this.f_dispType===0&&this.rb.Md(this.f_color);this.gf()},lc:function(a,b){var c=1<<a;this.a.f.mem[8194]=this.a.f.mem[8194]&255-c|(b?c:0)},Wg:function(){var a=this.a.f.mem[8194];this.firstWrite=!0;this.lc(this.md,!1);return a},yh:h("sramAddress"),lh:function(){return this.spriteMem[this.sramAddress]},mh:function(a){this.spriteMem[this.sramAddress]=a;this.Nd(this.sramAddress,a);
++this.sramAddress;this.sramAddress%=256},bh:function(a){this.Ka();this.firstWrite?(this.regHT=a>>3&31,this.regFH=a&7):(this.regFV=a&7,this.regVT=a>>3&31);this.firstWrite=!this.firstWrite},zh:function(a){this.firstWrite?(this.regFV=a>>4&3,this.regV=a>>3&1,this.regH=a>>2&1,this.regVT=this.regVT&7|(a&3)<<3):(this.Ka(),this.regVT=this.regVT&24|a>>5&7,this.regHT=a&31,this.cntFV=this.regFV,this.cntV=this.regV,this.cntH=this.regH,this.cntVT=this.regVT,this.cntHT=this.regHT,this.Wb(this.scanline-20));this.firstWrite=
!this.firstWrite;this.Bc()},uh:function(){var a;this.Bc();this.Kd();if(this.vramAddress<=16127)return a=this.vramBufferedReadValue,this.vramBufferedReadValue=this.vramAddress<8192?this.vramMem[this.vramAddress]:this.Ke(this.vramAddress),this.vramAddress+=this.f_addrInc==1?32:1,this.sd(),this.Jd(),a;a=this.Ke(this.vramAddress);this.vramAddress+=this.f_addrInc==1?32:1;this.sd();this.Jd();return a},vh:function(a){this.Ka();this.Bc();this.Kd();this.vramAddress>=8192?this.Sg(this.vramAddress,a):this.ta(this.vramAddress,
a);this.vramAddress+=this.f_addrInc==1?32:1;this.Jd();this.sd()},kh:function(a){a*=256;for(var b,c=this.sramAddress;c<256;++c)b=this.a.f.mem[a+c],this.spriteMem[c]=b,this.Nd(c,b);this.a.f.De(513)},Jd:function(){var a=this.vramTmpAddress>>8&255;this.regFV=a>>4&7;this.regV=a>>3&1;this.regH=a>>2&1;this.regVT=this.regVT&7|(a&3)<<3;a=this.vramTmpAddress&255;this.regVT=this.regVT&24|a>>5&7;this.regHT=a&31},sd:function(){var a=this.vramAddress>>8&255;this.cntFV=a>>4&3;this.cntV=a>>3&1;this.cntH=a>>2&1;this.cntVT=
this.cntVT&7|(a&3)<<3;a=this.vramAddress&255;this.cntVT=this.cntVT&24|a>>5&7;this.cntHT=a&31},Kd:function(){var a=(this.regFV&7)<<4;a|=(this.regV&1)<<3;a|=(this.regH&1)<<2;a|=this.regVT>>3&3;var b=(this.regVT&7)<<5;b|=this.regHT&31;this.vramTmpAddress=(a<<8|b)&32767},Bc:function(){var a=(this.cntFV&7)<<4;a|=(this.cntV&1)<<3;a|=(this.cntH&1)<<2;a|=this.cntVT>>3&3;var b=(this.cntVT&7)<<5;b|=this.cntHT&31;this.vramAddress=(a<<8|b)&32767},Ke:function(a){return this.vramMem[this.vramMirrorTable[a]]},Sg:function(a,
b){a>=16128&&a<16160?a==16128||a==16144?(this.ta(16128,b),this.ta(16144,b)):a==16132||a==16148?(this.ta(16132,b),this.ta(16148,b)):a==16136||a==16152?(this.ta(16136,b),this.ta(16152,b)):a==16140||a==16156?(this.ta(16140,b),this.ta(16156,b)):this.ta(a,b):a<this.vramMirrorTable.length?this.ta(this.vramMirrorTable[a],b):alert("Invalid VRAM address: "+a.toString(16))},Ka:function(){if(this.scanline>=21&&this.scanline<=260)this.Se(this.lastRenderedScanline+1,this.scanline-21-this.lastRenderedScanline),
this.lastRenderedScanline=this.scanline-21},Se:function(a,b){this.f_spVisibility==1&&this.Te(a,b,!0);if(this.f_bgVisibility==1){var c=a+b<<8;c>61440&&(c=61440);for(var e=this.buffer,g=this.bgbuffer,d=this.pixrendered,i=a<<8;i<c;++i)d[i]>255&&(e[i]=g[i])}this.f_spVisibility==1&&this.Te(a,b,!1);this.validTileData=!1},Re:function(a,b){var c=this.regS===0?0:256,e=(b<<8)-this.regFH;this.curNt=this.ntable1[this.cntV+this.cntV+this.cntH];this.cntHT=this.regHT;this.cntH=this.regH;this.curNt=this.ntable1[this.cntV+
this.cntV+this.cntH];if(b<240&&b-this.cntFV>=0){for(var g=this.cntFV<<3,d=this.scantile,i=this.Xa,k=this.D,j=this.Ea,m=this.imgPalette,o=this.pixrendered,n=a?this.bgbuffer:this.buffer,l,t,r,p=0;p<32;++p){if(b>=0){this.validTileData?(l=d[p],t=l.S,r=i[p]):(l=k[c+j[this.curNt].Eg(this.cntHT,this.cntVT)],t=l.S,r=j[this.curNt].ug(this.cntHT,this.cntVT),d[p]=l,i[p]=r);var q=0,u=(p<<3)-this.regFH;if(u>-8)if(u<0&&(e-=u,q=-u),l.fc[this.cntFV])for(;q<8;++q)n[e]=m[t[g+q]+r],o[e]|=256,++e;else for(;q<8;++q)l=
t[g+q],l!==0&&(n[e]=m[l+r],o[e]|=256),++e}if(++this.cntHT==32)this.cntHT=0,++this.cntH,this.cntH%=2,this.curNt=this.ntable1[(this.cntV<<1)+this.cntH]}this.validTileData=!0}++this.cntFV;if(this.cntFV==8){this.cntFV=0;++this.cntVT;if(this.cntVT==30)this.cntVT=0,++this.cntV,this.cntV%=2,this.curNt=this.ntable1[(this.cntV<<1)+this.cntH];else if(this.cntVT==32)this.cntVT=0;this.validTileData=!1}},Te:function(a,b,c){if(this.f_spVisibility===1)for(var e=0;e<64;++e)if(this.pd[e]==c&&this.T[e]>=0&&this.T[e]<
256&&this.m[e]+8>=a&&this.m[e]<a+b)if(this.f_spriteSize===0){this.Od=0;this.Pd=8;if(this.m[e]<a)this.Od=a-this.m[e]-1;if(this.m[e]+8>a+b)this.Pd=a+b-this.m[e]+1;this.f_spPatternTable===0?this.D[this.qa[e]].Wc(this.buffer,0,this.Od,8,this.Pd,this.T[e],this.m[e]+1,this.Mb[e],this.sprPalette,this.$a[e],this.X[e],e,this.pixrendered):this.D[this.qa[e]+256].Wc(this.buffer,0,this.Od,8,this.Pd,this.T[e],this.m[e]+1,this.Mb[e],this.sprPalette,this.$a[e],this.X[e],e,this.pixrendered)}else{var g=this.qa[e];
(g&1)!==0&&(g=this.qa[e]-1+256);var d=0,i=8;this.m[e]<a&&(d=a-this.m[e]-1);this.m[e]+8>a+b&&(i=a+b-this.m[e]);this.D[g+(this.X[e]?1:0)].Wc(this.buffer,0,d,8,i,this.T[e],this.m[e]+1,this.Mb[e],this.sprPalette,this.$a[e],this.X[e],e,this.pixrendered);d=0;i=8;this.m[e]+8<a&&(d=a-(this.m[e]+8+1));this.m[e]+16>a+b&&(i=a+b-(this.m[e]+8));this.D[g+(this.X[e]?0:1)].Wc(this.buffer,0,d,8,i,this.T[e],this.m[e]+1+8,this.Mb[e],this.sprPalette,this.$a[e],this.X[e],e,this.pixrendered)}},Wb:function(a){this.pa=this.oa=
-1;var b,c=this.f_spPatternTable===0?0:256,e,g,d;e=this.T[0];b=this.m[0]+1;if(this.f_spriteSize===0){if(b<=a&&b+8>a&&e>=-7&&e<256)if(c=this.D[this.qa[0]+c],b=this.X[0]?7-(a-b):a-b,b*=8,d=a*256+e,this.$a[0])for(g=7;g>=0;--g){if(e>=0&&e<256&&d>=0&&d<61440&&this.pixrendered[d]!==0&&c.S[b+g]!==0)return this.oa=d%256,this.pa=a,!0;++e;++d}else for(g=0;g<8;++g){if(e>=0&&e<256&&d>=0&&d<61440&&this.pixrendered[d]!==0&&c.S[b+g]!==0)return this.oa=d%256,this.pa=a,!0;++e;++d}}else if(b<=a&&b+16>a&&e>=-7&&e<256)if(b=
this.X[0]?15-(a-b):a-b,b<8?c=this.D[this.qa[0]+(this.X[0]?1:0)+((this.qa[0]&1)!==0?255:0)]:(c=this.D[this.qa[0]+(this.X[0]?0:1)+((this.qa[0]&1)!==0?255:0)],this.X[0]?b=15-b:b-=8),b*=8,d=a*256+e,this.$a[0])for(g=7;g>=0;--g){if(e>=0&&e<256&&d>=0&&d<61440&&this.pixrendered[d]!==0&&c.S[b+g]!==0)return this.oa=d%256,this.pa=a,!0;++e;++d}else for(g=0;g<8;++g){if(e>=0&&e<256&&d>=0&&d<61440&&this.pixrendered[d]!==0&&c.S[b+g]!==0)return this.oa=d%256,this.pa=a,!0;++e;++d}return!1},ta:function(a,b){this.vramMem[a]=
b;a<8192?(this.vramMem[a]=b,this.Ug(a,b)):a>=8192&&a<9152?this.Sc(this.ntable1[0],a-8192,b):a>=9152&&a<9216?this.yc(this.ntable1[0],a-9152,b):a>=9216&&a<10176?this.Sc(this.ntable1[1],a-9216,b):a>=10176&&a<10240?this.yc(this.ntable1[1],a-10176,b):a>=10240&&a<11200?this.Sc(this.ntable1[2],a-10240,b):a>=11200&&a<11264?this.yc(this.ntable1[2],a-11200,b):a>=11264&&a<12224?this.Sc(this.ntable1[3],a-11264,b):a>=12224&&a<12288?this.yc(this.ntable1[3],a-12224,b):a>=16128&&a<16160&&this.gf()},gf:function(){var a;
for(a=0;a<16;++a)this.imgPalette[a]=this.f_dispType===0?this.rb.Ic(this.vramMem[16128+a]&63):this.rb.Ic(this.vramMem[16128+a]&32);for(a=0;a<16;++a)this.sprPalette[a]=this.f_dispType===0?this.rb.Ic(this.vramMem[16144+a]&63):this.rb.Ic(this.vramMem[16144+a]&32)},Ug:function(a,b){var c=Math.floor(a/16),e=a%16;e<8?this.D[c].Zc(e,b,this.vramMem[a+8]):this.D[c].Zc(e-8,this.vramMem[a-8],b)},Sc:function(a,b,c){this.Ea[a].oc[b]=c;this.Wb(this.scanline-20)},yc:function(a,b,c){this.Ea[a].xh(b,c)},Nd:function(a,
b){var c=Math.floor(a/4);c===0&&this.Wb(this.scanline-20);a%4===0?this.m[c]=b:a%4==1?this.qa[c]=b:a%4==2?(this.X[c]=(b&128)!==0,this.$a[c]=(b&64)!==0,this.pd[c]=(b&32)!==0,this.Mb[c]=(b&3)<<2):a%4==3&&(this.T[c]=b)},kb:["vramMem","spriteMem","cntFV","cntV","cntH","cntVT","cntHT","regFV","regV","regH","regVT","regHT","regFH","regS","vramAddress","vramTmpAddress","f_nmiOnVblank","f_spriteSize","f_bgPatternTable","f_spPatternTable","f_addrInc","f_nTblAddress","f_color","f_spVisibility","f_bgVisibility",
"f_spClipping","f_bgClipping","f_dispType","vramBufferedReadValue","firstWrite","currentMirroring","vramMirrorTable","ntable1","sramAddress","hitSpr0","sprPalette","imgPalette","curX","scanline","lastRenderedScanline","curNt","scantile","attrib","buffer","bgbuffer","pixrendered","requestEndFrame","nmiOk","dummyCycleToggle","nmiCounter","validTileData","scanlineAlreadyRendered"],toJSON:function(){var a,b=s.da.toJSON(this);b.nameTable=[];for(a=0;a<this.Ea.length;++a)b.nameTable[a]=this.Ea[a].toJSON();
b.ptTile=[];for(a=0;a<this.D.length;++a)b.ptTile[a]=this.D[a].toJSON();return b},t:function(a){var b;s.da.t(this,a);for(b=0;b<this.Ea.length;++b)this.Ea[b].t(a.nameTable[b]);for(b=0;b<this.D.length;++b)this.D[b].t(a.ptTile[b]);for(b=0;b<this.spriteMem.length;++b)this.Nd(b,this.spriteMem[b])}};s.O.qe=function(a,b,c){this.width=a;this.height=b;this.name=c;this.oc=Array(a*b);this.Xa=Array(a*b)};
s.O.qe.prototype={Eg:function(a,b){return this.oc[b*this.width+a]},ug:function(a,b){return this.Xa[b*this.width+a]},xh:function(a,b){for(var c=a%8*4,e=Math.floor(a/8)*4,g,d,i,k=0;k<2;++k)for(var j=0;j<2;++j){g=b>>2*(k*2+j)&3;for(var m=0;m<2;++m)for(var o=0;o<2;++o)d=c+j*2+o,i=e+k*2+m,this.Xa[i*this.width+d]=g<<2&12}},toJSON:function(){return{tile:this.oc,attrib:this.Xa}},t:function(a){this.oc=a.oc;this.Xa=a.Xa}};s.O.se=function(){this.Cc=Array(64);this.vd=Array(8);this.ze=-1};
s.O.se.prototype={reset:function(){this.Md(0)},Og:function(){this.Cc=[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,
16308472,0,0];this.Qg();this.Md(0)},Qg:function(){for(var a,b,c,e,g,d,i,k=0;k<8;++k){i=d=g=1;(k&1)!==0&&(i=g=0.75);(k&2)!==0&&(d=g=0.75);(k&4)!==0&&(i=d=0.75);this.vd[k]=Array(64);for(e=0;e<64;++e)c=this.Cc[e],a=Math.floor(this.Cg(c)*g),b=Math.floor(this.xg(c)*d),c=Math.floor(this.vg(c)*i),this.vd[k][e]=this.Dg(a,b,c)}},Md:function(a){if(a!=this.ze){this.ze=a;for(var b=0;b<64;++b)this.Cc[b]=this.vd[a][b]}},Ic:function(a){return this.Cc[a]},Cg:function(a){return a>>16&255},xg:function(a){return a>>
8&255},vg:function(a){return a&255},Dg:function(a,b,c){return a<<16|b<<8|c}};s.O.nd=function(){this.S=Array(64);this.Bh=this.v=this.Z=this.Jh=this.Ih=this.Fg=this.wh=this.y=this.x=this.G=this.k=f;this.Kg=!1;this.fc=Array(8)};
s.O.nd.prototype={Zc:function(a,b,c){this.Kg=!0;this.G=a<<3;for(this.x=0;this.x<8;++this.x)this.S[this.G+this.x]=(b>>7-this.x&1)+((c>>7-this.x&1)<<1),this.S[this.G+this.x]===0&&(this.fc[a]=!1)},Wc:function(a,b,c,e,g,d,i,k,j,m,o,n,l){if(!(d<-7||d>=256||i<-7||i>=240))if(this.wh=e-b,this.Fg=g-c,d<0&&(b-=d),d+e>=256&&(e=256-d),i<0&&(c-=i),i+g>=240&&(g=240-i),!m&&!o){this.k=(i<<8)+d;for(this.y=this.G=0;this.y<8;++this.y){for(this.x=0;this.x<8;++this.x){if(this.x>=b&&this.x<e&&this.y>=c&&this.y<g&&(this.Z=
this.S[this.G],this.v=l[this.k],this.Z!==0&&n<=(this.v&255)))a[this.k]=j[this.Z+k],this.v=this.v&3840|n,l[this.k]=this.v;++this.k;++this.G}this.k-=8;this.k+=256}}else if(m&&!o){this.k=(i<<8)+d;this.G=7;for(this.y=0;this.y<8;++this.y){for(this.x=0;this.x<8;++this.x){if(this.x>=b&&this.x<e&&this.y>=c&&this.y<g&&(this.Z=this.S[this.G],this.v=l[this.k],this.Z!==0&&n<=(this.v&255)))a[this.k]=j[this.Z+k],this.v=this.v&3840|n,l[this.k]=this.v;++this.k;--this.G}this.k-=8;this.k+=256;this.G+=16}}else if(o&&
!m){this.k=(i<<8)+d;this.G=56;for(this.y=0;this.y<8;++this.y){for(this.x=0;this.x<8;++this.x){if(this.x>=b&&this.x<e&&this.y>=c&&this.y<g&&(this.Z=this.S[this.G],this.v=l[this.k],this.Z!==0&&n<=(this.v&255)))a[this.k]=j[this.Z+k],this.v=this.v&3840|n,l[this.k]=this.v;++this.k;++this.G}this.k-=8;this.k+=256;this.G-=16}}else{this.k=(i<<8)+d;this.G=63;for(this.y=0;this.y<8;++this.y){for(this.x=0;this.x<8;++this.x){if(this.x>=b&&this.x<e&&this.y>=c&&this.y<g&&(this.Z=this.S[this.G],this.v=l[this.k],this.Z!==
0&&n<=(this.v&255)))a[this.k]=j[this.Z+k],this.v=this.v&3840|n,l[this.k]=this.v;++this.k;--this.G}this.k-=8;this.k+=256}}},toJSON:function(){return{opaque:this.fc,pix:this.S}},t:function(a){this.fc=a.fc;this.S=a.S}};s.te=function(a){this.a=a;this.e=Array(92);for(a=0;a<92;++a)this.e[a]="Unknown Mapper";this.e[0]="Direct Access";this.e[1]="Nintendo MMC1";this.e[2]="UNROM";this.e[3]="CNROM";this.e[4]="Nintendo MMC3";this.e[5]="Nintendo MMC5";this.e[6]="FFE F4xxx";this.e[7]="AOROM";this.e[8]="FFE F3xxx";this.e[9]="Nintendo MMC2";this.e[10]="Nintendo MMC4";this.e[11]="Color Dreams Chip";this.e[12]="FFE F6xxx";this.e[15]="100-in-1 switch";this.e[16]="Bandai chip";this.e[17]="FFE F8xxx";this.e[18]="Jaleco SS8806 chip";
this.e[19]="Namcot 106 chip";this.e[20]="Famicom Disk System";this.e[21]="Konami VRC4a";this.e[22]="Konami VRC2a";this.e[23]="Konami VRC2a";this.e[24]="Konami VRC6";this.e[25]="Konami VRC4b";this.e[32]="Irem G-101 chip";this.e[33]="Taito TC0190/TC0350";this.e[34]="32kB ROM switch";this.e[64]="Tengen RAMBO-1 chip";this.e[65]="Irem H-3001 chip";this.e[66]="GNROM switch";this.e[67]="SunSoft3 chip";this.e[68]="SunSoft4 chip";this.e[69]="SunSoft5 FME-7 chip";this.e[71]="Camerica chip";this.e[78]="Irem 74HC161/32-based";
this.e[91]="Pirate HK-SF3 chip"};
s.te.prototype={wc:0,sc:1,uf:2,ue:3,eg:4,fa:f,c:f,La:f,zb:f,z:f,s:f,ia:f,od:f,rh:f,Be:f,Da:f,hb:!1,load:function(a){var b,c;if(a.indexOf("NES\u001a")===-1)this.a.ui.updateStatus("Not a valid NES ROM.");else{this.fa=Array(16);for(b=0;b<16;++b)this.fa[b]=a.charCodeAt(b)&255;this.z=this.fa[4];this.s=this.fa[5]*2;this.ia=(this.fa[6]&1)!==0?1:0;this.od=(this.fa[6]&2)!==0;this.rh=(this.fa[6]&4)!==0;this.Be=(this.fa[6]&8)!==0;this.Da=this.fa[6]>>4|this.fa[7]&240;c=!1;for(b=8;b<16;++b)if(this.fa[b]!==0){c=
!0;break}c&&(this.Da&=15);this.c=Array(this.z);var e=16;for(b=0;b<this.z;++b){this.c[b]=Array(16384);for(c=0;c<16384;++c){if(e+c>=a.length)break;this.c[b][c]=a.charCodeAt(e+c)&255}e+=16384}this.La=Array(this.s);for(b=0;b<this.s;++b){this.La[b]=Array(4096);for(c=0;c<4096;++c){if(e+c>=a.length)break;this.La[b][c]=a.charCodeAt(e+c)&255}e+=4096}this.zb=Array(this.s);for(b=0;b<this.s;++b){this.zb[b]=Array(256);for(c=0;c<256;++c)this.zb[b][c]=new s.O.nd}for(a=0;a<this.s;++a)for(b=0;b<4096;++b)c=b>>4,e=
b%16,e<8?this.zb[a][c].Zc(e,this.La[a][b],this.La[a][b+8]):this.zb[a][c].Zc(e-8,this.La[a][b-8],this.La[a][b]);this.hb=!0}},Ag:function(){if(this.Be)return this.uf;if(this.ia===0)return this.sc;return this.wc},zg:function(){if(this.Da>=0&&this.Da<this.e.length)return this.e[this.Da];return"Unknown Mapper, "+this.Da},Rg:function(){return typeof s.g[this.Da]!=="undefined"},jg:function(){return this.Rg()?new s.g[this.Da](this.a):(this.a.ui.updateStatus("This ROM uses a mapper not supported by JSNES: "+
this.zg()+"("+this.Da+")"),f)}};s.tf=function(a){this.a=a;this.enable=function(){};this.updateStatus=function(){};this.hf=function(){};this.jf=function(){}};
typeof jQuery!=="undefined"&&function(a){a.fn.dg=function(b){function c(c){var d=this;d.a=c;d.root=a("<div></div>");d.screen=a('<canvas class="nes-screen" width="256" height="240"></canvas>').appendTo(d.root);d.screen[0].getContext?(d.$g=a('<div class="nes-roms"></div>').appendTo(d.root),d.ic=a("<select></select>").appendTo(d.$g),d.controls=a('<div class="nes-controls"></div>').appendTo(d.root),d.I={pause:a('<input type="button" value="pause" class="nes-pause" disabled="disabled">').appendTo(d.controls),
Ve:a('<input type="button" value="restart" class="nes-restart" disabled="disabled">').appendTo(d.controls),nc:a('<input type="button" value="enable sound" class="nes-enablesound">').appendTo(d.controls),zoom:a('<input type="button" value="zoom in" class="nes-zoom">').appendTo(d.controls)},d.status=a('<p class="nes-status">Booting up...</p>').appendTo(d.root),d.root.appendTo(e),d.ic.change(function(){d.Hb()}),d.I.pause.click(function(){d.a.pb?(d.a.stop(),d.updateStatus("Paused"),d.I.pause.attr("value",
"resume")):(d.a.start(),d.I.pause.attr("value","pause"))}),d.I.Ve.click(function(){d.a.Qe();d.a.start()}),d.I.nc.click(function(){d.a.C.emulateSound?(d.a.C.emulateSound=!1,d.I.nc.attr("value","enable sound")):(d.a.C.emulateSound=!0,d.I.nc.attr("value","disable sound"))}),d.Yd=!1,d.I.zoom.click(function(){d.Yd?(d.screen.animate({width:"256px",height:"240px"}),d.I.zoom.attr("value","zoom in"),d.Yd=!1):(d.screen.animate({width:"512px",height:"480px"}),d.I.zoom.attr("value","zoom out"),d.Yd=!0)}),a.offset&&
d.screen.mousedown(function(a){if(d.a.h)d.a.h.Pc=!0,d.a.h.Qc=a.pageX-d.screen.offset().left,d.a.h.Rc=a.pageY-d.screen.offset().top}).mouseup(function(){setTimeout(function(){if(d.a.h)d.a.h.Pc=!1,d.a.h.Qc=0,d.a.h.Rc=0},500)}),typeof b!="undefined"&&d.gh(b),d.Vb=d.screen[0].getContext("2d"),d.Vb.getImageData?(d.zc=d.Vb.getImageData(0,0,256,240),d.Yg(),a(document).bind("keydown",function(a){d.a.dc.Fe(a)}).bind("keyup",function(a){d.a.dc.He(a)}).bind("keypress",function(a){d.a.dc.Ge(a)}),d.og=new DynamicAudio({swf:c.C.swfPath+
"dynamicaudio.swf"})):e.html("Your browser doesn't support writing pixels directly to the <code>&lt;canvas&gt;</code> tag. Try the latest versions of Google Chrome, Safari, Opera or Firefox!")):e.html("Your browser doesn't support the <code>&lt;canvas&gt;</code> tag. Try Google Chrome, Safari, Opera or Firefox!")}var e=this;c.prototype={Hb:function(){var b=this;b.updateStatus("Downloading...");a.ajax({url:escape(b.ic.val()),xhr:function(){var d=a.ajaxSettings.xhr();typeof d.overrideMimeType!=="undefined"&&
d.overrideMimeType("text/plain; charset=x-user-defined");return b.xhr=d},complete:function(a){s.da.Lg()?(a=JSNESBinaryToArray(a.responseBody).toArray(),a=String.fromCharCode.apply(void 0,a)):a=a.responseText;b.a.Oc(a);b.a.start();b.enable()}})},Yg:function(){this.Vb.fillStyle="black";this.Vb.fillRect(0,0,256,240);for(var a=3;a<this.zc.data.length-3;a+=4)this.zc.data[a]=255},enable:function(){this.I.pause.attr("disabled",f);this.a.pb?this.I.pause.attr("value","pause"):this.I.pause.attr("value","resume");
this.I.Ve.attr("disabled",f);this.a.C.emulateSound?this.I.nc.attr("value","disable sound"):this.I.nc.attr("value","enable sound")},updateStatus:function(a){this.status.text(a)},gh:function(b){this.ic.children().remove();a("<option>Select a ROM...</option>").appendTo(this.ic);for(var d in b)if(b.hasOwnProperty(d)){for(var c=a("<optgroup></optgroup>").attr("label",d),e=0;e<b[d].length;++e)a("<option>"+b[d][e][0]+"</option>").attr("value",b[d][e][1]).appendTo(c);this.ic.append(c)}},hf:function(a){return this.og.writeInt(a)},
jf:function(a,b){var c=this.zc.data,e,j,m;for(j=0;j<61440;++j)e=a[j],e!=b[j]&&(m=j*4,c[m]=e&255,c[m+1]=e>>8&255,c[m+2]=e>>16&255,b[j]=e);this.Vb.putImageData(this.zc,0,0)}};return c}}(jQuery);window.$=$;$.fn.JSNESUI=$.fn.dg;window.JSNES=s;s.prototype.loadRom=s.prototype.Oc;s.prototype.start=s.prototype.start;s.prototype.frame=s.prototype.frame;s.prototype.reloadRom=s.prototype.Qe;s.prototype.stop=s.prototype.stop;s.prototype.toJSON=s.prototype.toJSON;s.prototype.fromJSON=s.prototype.t;s.CPU=s.Pa;s.CPU.prototype.toJSON=s.Pa.prototype.toJSON;s.CPU.prototype.fromJSON=s.Pa.prototype.t;s.PPU=s.O;s.PPU.prototype.toJSON=s.O.prototype.toJSON;s.PPU.prototype.fromJSON=s.O.prototype.t;
s.Keyboard=s.Ab;s.Keyboard.prototype.keyDown=s.Ab.prototype.Fe;s.Keyboard.prototype.keyUp=s.Ab.prototype.He;s.Keyboard.prototype.keyPress=s.Ab.prototype.Ge;s.prototype.isRunning=s.prototype.pb;s.prototype.fpsFrameCount=s.prototype.Yb;s.prototype.limitFrames=s.prototype.Bd;s.prototype.romData=s.prototype.hc;s.prototype.reset=s.prototype.reset;s.prototype.printFps=s.prototype.Hd;s.prototype.resetFps=s.prototype.Ue;s.prototype.setFramerate=s.prototype.dh;s.prototype.setLimitFrames=s.prototype.eh;
