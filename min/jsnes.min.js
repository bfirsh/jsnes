var f=true,h=null,j=false;function k(a){return function(b){this[a]=b}}
function u(a){this.D={ui:u.vf,swfPath:"lib/",preferredFrameRate:60,fpsInterval:500,showDisplay:f,emulateSound:j,sampleRate:44100,CPU_FREQ_NTSC:1789772.5,CPU_FREQ_PAL:1773447.4};if(typeof a!="undefined")for(var b in this.D)if(typeof a[b]!="undefined")this.D[b]=a[b];this.ob=1E3/this.D.preferredFrameRate;this.Aa=new this.D.ui(this);this.f=new u.Ra(this);this.j=new u.P(this);this.v=new u.O(this);this.h=h;this.ec=new u.Bb;this.Aa.updateStatus("Ready to load a ROM.")}u.VERSION="<%= version %>";
u.prototype={qb:j,Zb:0,Cd:f,ic:h,reset:function(){this.h!==h&&this.h.reset();this.f.reset();this.j.reset();this.v.reset()},start:function(){var a=this;if(this.c!==h&&this.c.ib){if(!this.qb){this.qb=f;this.vg=setInterval(function(){a.frame()},this.ob/2);this.We();this.Id();this.fpsInterval=setInterval(function(){a.Id()},this.D.fpsInterval)}}else this.Aa.updateStatus("There is no ROM loaded, or it is invalid.")},frame:function(){this.j.qh();var a=0,b=this.D.emulateSound,d=this.f,e=this.j,g=this.v;a:for(;;){if(d.cyclesToHalt===
0){a=d.rg();b&&g.sd(a);a*=3}else if(d.cyclesToHalt>8){a=24;b&&g.sd(8);d.cyclesToHalt-=8}else{a=d.cyclesToHalt*3;b&&g.sd(d.cyclesToHalt);d.cyclesToHalt=0}for(;a>0;a--){e.curX===e.pa&&e.f_spVisibility===1&&e.scanline-21===e.qa&&e.mc(e.we,f);if(e.requestEndFrame){e.nmiCounter--;if(e.nmiCounter===0){e.requestEndFrame=j;e.rh();break a}}e.curX++;if(e.curX===341){e.curX=0;e.ug()}}}if(this.Cd)if(this.Ad)for(;+new Date-this.Ad<this.ob;);this.Zb++;this.Ad=+new Date},Id:function(){var a=+new Date,b="Running";
if(this.zd)b+=": "+(this.Zb/((a-this.zd)/1E3)).toFixed(2)+" FPS";this.Aa.updateStatus(b);this.Zb=0;this.zd=a},stop:function(){clearInterval(this.vg);clearInterval(this.fpsInterval);this.qb=j},Se:function(){this.ic!==h&&this.Pc(this.ic)},Pc:function(a){this.qb&&this.stop();this.Aa.updateStatus("Loading ROM...");this.c=new u.ue(this);this.c.load(a);if(this.c.ib){this.reset();this.h=this.c.lg();if(!this.h)return;this.h.Ib();this.j.Mb(this.c.Cg());this.ic=a;this.Aa.updateStatus("Successfully loaded. Ready to be started.")}else this.Aa.updateStatus("Invalid ROM!");
return this.c.ib},We:function(){this.zd=h;this.Zb=0},fh:function(a){this.D.preferredFrameRate=a;this.ob=1E3/a;this.v.Oh(this.D.sampleRate,j)},gh:function(a){this.Cd=a;this.Ad=h},toJSON:function(){return{romData:this.ic,cpu:this.f.toJSON(),mmap:this.h.toJSON(),ppu:this.j.toJSON()}},u:function(a){this.Pc(a.romData);this.f.u(a.cpu);this.h.u(a.mmap);this.j.u(a.ppu)}};u.ea={Fb:function(a,b,d,e,g){for(var c=0;c<g;++c)d[e+c]=a[b+c]},Eh:function(a){for(var b=Array(a.length),d=0;d<a.length;d++)b[d]=a[d];return b},u:function(a,b){for(var d=0;d<a.lb.length;d++)a[a.lb[d]]=b[a.lb[d]]},toJSON:function(a){for(var b={},d=0;d<a.lb.length;d++)b[a.lb[d]]=a[a.lb[d]];return b},Ng:function(){return/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)}};u.Ra=function(a){this.a=a;this.irqType=this.irqRequested=this.kg=this.cyclesToHalt=this.Jb=this.F_BRK_NEW=this.F_BRK=this.F_NOTUSED_NEW=this.F_NOTUSED=this.F_ZERO=this.F_SIGN=this.F_OVERFLOW=this.F_INTERRUPT_NEW=this.F_INTERRUPT=this.F_DECIMAL=this.F_CARRY=this.REG_STATUS=this.REG_PC_NEW=this.REG_PC=this.REG_SP=this.REG_Y=this.REG_X=this.REG_ACC=this.mem=h;this.reset()};
u.Ra.prototype={md:0,eg:1,wc:2,reset:function(){this.mem=Array(65536);for(var a=0;a<8192;a++)this.mem[a]=255;for(var b=0;b<4;b++){a=b*2048;this.mem[a+8]=247;this.mem[a+9]=239;this.mem[a+10]=223;this.mem[a+15]=191}for(a=8193;a<this.mem.length;a++)this.mem[a]=0;this.REG_Y=this.REG_X=this.REG_ACC=0;this.REG_SP=511;this.REG_PC_NEW=this.REG_PC=32767;this.REG_STATUS=40;this.jh(40);this.F_DECIMAL=this.F_CARRY=0;this.F_INTERRUPT_NEW=this.F_INTERRUPT=1;this.F_SIGN=this.F_OVERFLOW=0;this.F_BRK_NEW=this.F_BRK=
this.F_NOTUSED_NEW=this.F_NOTUSED=this.F_ZERO=1;this.Jb=(new u.Ra.se).Jb;this.cyclesToHalt=0;this.irqRequested=this.kg=j;this.irqType=h},rg:function(){var a,b;if(this.irqRequested){a=this.F_CARRY|(this.F_ZERO===0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7;this.REG_PC_NEW=this.REG_PC;this.F_INTERRUPT_NEW=this.F_INTERRUPT;switch(this.irqType){case 0:if(this.F_INTERRUPT!=0)break;this.mg(a);break;case 1:this.ng(a);break;case 2:this.og()}this.REG_PC=
this.REG_PC_NEW;this.F_INTERRUPT=this.F_INTERRUPT_NEW;this.F_BRK=this.F_BRK_NEW;this.irqRequested=j}a=this.Jb[this.a.h.load(this.REG_PC+1)];var d=a>>24;b=0;var e=a>>8&255,g=this.REG_PC;this.REG_PC+=a>>16&255;var c=0;switch(e){case 0:c=this.load(g+2);break;case 1:c=this.load(g+2);c+=c<128?this.REG_PC:this.REG_PC-256;break;case 3:c=this.rb(g+2);break;case 4:c=this.REG_ACC;break;case 5:c=this.REG_PC;break;case 6:c=this.load(g+2)+this.REG_X&255;break;case 7:c=this.load(g+2)+this.REG_Y&255;break;case 8:c=
this.rb(g+2);if((c&65280)!=(c+this.REG_X&65280))b=1;c+=this.REG_X;break;case 9:c=this.rb(g+2);if((c&65280)!=(c+this.REG_Y&65280))b=1;c+=this.REG_Y;break;case 10:c=this.load(g+2);if((c&65280)!=(c+this.REG_X&65280))b=1;c+=this.REG_X;c&=255;c=this.rb(c);break;case 11:c=this.rb(this.load(g+2));if((c&65280)!=(c+this.REG_Y&65280))b=1;c+=this.REG_Y;break;case 12:c=this.rb(g+2);c=c<8191?this.mem[c]+(this.mem[c&65280|(c&255)+1&255]<<8):this.a.h.load(c)+(this.a.h.load(c&65280|(c&255)+1&255)<<8)}c&=65535;switch(a&
255){case 0:a=this.REG_ACC+this.load(c)+this.F_CARRY;this.F_OVERFLOW=((this.REG_ACC^this.load(c))&128)==0&&((this.REG_ACC^a)&128)!=0?1:0;this.F_CARRY=a>255?1:0;this.F_SIGN=a>>7&1;this.F_ZERO=a&255;this.REG_ACC=a&255;d+=b;break;case 1:this.REG_ACC&=this.load(c);this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;if(e!=11)d+=b;break;case 2:if(e==4){this.F_CARRY=this.REG_ACC>>7&1;this.REG_ACC=this.REG_ACC<<1&255;this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC}else{a=this.load(c);this.F_CARRY=
a>>7&1;a=a<<1&255;this.F_SIGN=a>>7&1;this.F_ZERO=a;this.write(c,a)}break;case 3:if(this.F_CARRY==0){d+=(g&65280)!=(c&65280)?2:1;this.REG_PC=c}break;case 4:if(this.F_CARRY==1){d+=(g&65280)!=(c&65280)?2:1;this.REG_PC=c}break;case 5:if(this.F_ZERO==0){d+=(g&65280)!=(c&65280)?2:1;this.REG_PC=c}break;case 6:a=this.load(c);this.F_SIGN=a>>7&1;this.F_OVERFLOW=a>>6&1;a&=this.REG_ACC;this.F_ZERO=a;break;case 7:if(this.F_SIGN==1){d++;this.REG_PC=c}break;case 8:if(this.F_ZERO!=0){d+=(g&65280)!=(c&65280)?2:1;
this.REG_PC=c}break;case 9:if(this.F_SIGN==0){d+=(g&65280)!=(c&65280)?2:1;this.REG_PC=c}break;case 10:this.REG_PC+=2;this.push(this.REG_PC>>8&255);this.push(this.REG_PC&255);this.F_BRK=1;this.push(this.F_CARRY|(this.F_ZERO==0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7);this.F_INTERRUPT=1;this.REG_PC=this.rb(65534);this.REG_PC--;break;case 11:if(this.F_OVERFLOW==0){d+=(g&65280)!=(c&65280)?2:1;this.REG_PC=c}break;case 12:if(this.F_OVERFLOW==
1){d+=(g&65280)!=(c&65280)?2:1;this.REG_PC=c}break;case 13:this.F_CARRY=0;break;case 14:this.F_DECIMAL=0;break;case 15:this.F_INTERRUPT=0;break;case 16:this.F_OVERFLOW=0;break;case 17:a=this.REG_ACC-this.load(c);this.F_CARRY=a>=0?1:0;this.F_SIGN=a>>7&1;this.F_ZERO=a&255;d+=b;break;case 18:a=this.REG_X-this.load(c);this.F_CARRY=a>=0?1:0;this.F_SIGN=a>>7&1;this.F_ZERO=a&255;break;case 19:a=this.REG_Y-this.load(c);this.F_CARRY=a>=0?1:0;this.F_SIGN=a>>7&1;this.F_ZERO=a&255;break;case 20:a=this.load(c)-
1&255;this.F_SIGN=a>>7&1;this.F_ZERO=a;this.write(c,a);break;case 21:this.REG_X=this.REG_X-1&255;this.F_SIGN=this.REG_X>>7&1;this.F_ZERO=this.REG_X;break;case 22:this.REG_Y=this.REG_Y-1&255;this.F_SIGN=this.REG_Y>>7&1;this.F_ZERO=this.REG_Y;break;case 23:this.REG_ACC=(this.load(c)^this.REG_ACC)&255;this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;d+=b;break;case 24:a=this.load(c)+1&255;this.F_SIGN=a>>7&1;this.F_ZERO=a;this.write(c,a&255);break;case 25:this.REG_X=this.REG_X+1&255;this.F_SIGN=
this.REG_X>>7&1;this.F_ZERO=this.REG_X;break;case 26:this.REG_Y++;this.REG_Y&=255;this.F_SIGN=this.REG_Y>>7&1;this.F_ZERO=this.REG_Y;break;case 27:this.REG_PC=c-1;break;case 28:this.push(this.REG_PC>>8&255);this.push(this.REG_PC&255);this.REG_PC=c-1;break;case 29:this.REG_ACC=this.load(c);this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;d+=b;break;case 30:this.REG_X=this.load(c);this.F_SIGN=this.REG_X>>7&1;this.F_ZERO=this.REG_X;d+=b;break;case 31:this.REG_Y=this.load(c);this.F_SIGN=this.REG_Y>>
7&1;this.F_ZERO=this.REG_Y;d+=b;break;case 32:if(e==4){a=this.REG_ACC&255;this.F_CARRY=a&1;a>>=1;this.REG_ACC=a}else{a=this.load(c)&255;this.F_CARRY=a&1;a>>=1;this.write(c,a)}this.F_SIGN=0;this.F_ZERO=a;break;case 33:break;case 34:a=(this.load(c)|this.REG_ACC)&255;this.F_SIGN=a>>7&1;this.REG_ACC=this.F_ZERO=a;if(e!=11)d+=b;break;case 35:this.push(this.REG_ACC);break;case 36:this.F_BRK=1;this.push(this.F_CARRY|(this.F_ZERO==0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<
5|this.F_OVERFLOW<<6|this.F_SIGN<<7);break;case 37:this.REG_ACC=this.wb();this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;break;case 38:a=this.wb();this.F_CARRY=a&1;this.F_ZERO=(a>>1&1)==1?0:1;this.F_INTERRUPT=a>>2&1;this.F_DECIMAL=a>>3&1;this.F_BRK=a>>4&1;this.F_NOTUSED=a>>5&1;this.F_OVERFLOW=a>>6&1;this.F_SIGN=a>>7&1;this.F_NOTUSED=1;break;case 39:if(e==4){a=this.REG_ACC;b=this.F_CARRY;this.F_CARRY=a>>7&1;this.REG_ACC=a=(a<<1&255)+b}else{a=this.load(c);b=this.F_CARRY;this.F_CARRY=a>>7&1;
a=(a<<1&255)+b;this.write(c,a)}this.F_SIGN=a>>7&1;this.F_ZERO=a;break;case 40:if(e==4){b=this.F_CARRY<<7;this.F_CARRY=this.REG_ACC&1;this.REG_ACC=a=(this.REG_ACC>>1)+b}else{a=this.load(c);b=this.F_CARRY<<7;this.F_CARRY=a&1;a=(a>>1)+b;this.write(c,a)}this.F_SIGN=a>>7&1;this.F_ZERO=a;break;case 41:a=this.wb();this.F_CARRY=a&1;this.F_ZERO=(a>>1&1)==0?1:0;this.F_INTERRUPT=a>>2&1;this.F_DECIMAL=a>>3&1;this.F_BRK=a>>4&1;this.F_NOTUSED=a>>5&1;this.F_OVERFLOW=a>>6&1;this.F_SIGN=a>>7&1;this.REG_PC=this.wb();
this.REG_PC+=this.wb()<<8;if(this.REG_PC==65535)return;this.REG_PC--;this.F_NOTUSED=1;break;case 42:this.REG_PC=this.wb();this.REG_PC+=this.wb()<<8;if(this.REG_PC==65535)return;break;case 43:a=this.REG_ACC-this.load(c)-(1-this.F_CARRY);this.F_SIGN=a>>7&1;this.F_ZERO=a&255;this.F_OVERFLOW=((this.REG_ACC^a)&128)!=0&&((this.REG_ACC^this.load(c))&128)!=0?1:0;this.F_CARRY=a<0?0:1;this.REG_ACC=a&255;if(e!=11)d+=b;break;case 44:this.F_CARRY=1;break;case 45:this.F_DECIMAL=1;break;case 46:this.F_INTERRUPT=
1;break;case 47:this.write(c,this.REG_ACC);break;case 48:this.write(c,this.REG_X);break;case 49:this.write(c,this.REG_Y);break;case 50:this.REG_X=this.REG_ACC;this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;break;case 51:this.REG_Y=this.REG_ACC;this.F_SIGN=this.REG_ACC>>7&1;this.F_ZERO=this.REG_ACC;break;case 52:this.REG_X=this.REG_SP-256;this.F_SIGN=this.REG_SP>>7&1;this.F_ZERO=this.REG_X;break;case 53:this.REG_ACC=this.REG_X;this.F_SIGN=this.REG_X>>7&1;this.F_ZERO=this.REG_X;break;case 54:this.REG_SP=
this.REG_X+256;this.ph();break;case 55:this.REG_ACC=this.REG_Y;this.F_SIGN=this.REG_Y>>7&1;this.F_ZERO=this.REG_Y;break;default:this.a.stop();this.a.Fh="Game crashed, invalid opcode at address $"+g.toString(16)}return d},load:function(a){return a<8192?this.mem[a&2047]:this.a.h.load(a)},rb:function(a){return a<8191?this.mem[a&2047]|this.mem[a+1&2047]<<8:this.a.h.load(a)|this.a.h.load(a+1)<<8},write:function(a,b){if(a<8192)this.mem[a&2047]=b;else this.a.h.write(a,b)},xb:function(a){if(this.irqRequested)if(a==
this.md)return;this.irqRequested=f;this.irqType=a},push:function(a){this.a.h.write(this.REG_SP,a);this.REG_SP--;this.REG_SP=256|this.REG_SP&255},ph:function(){this.REG_SP=256|this.REG_SP&255},wb:function(){this.REG_SP++;this.REG_SP=256|this.REG_SP&255;return this.a.h.load(this.REG_SP)},Fe:function(a){this.cyclesToHalt+=a},ng:function(a){if((this.a.h.load(8192)&128)!=0){this.REG_PC_NEW++;this.push(this.REG_PC_NEW>>8&255);this.push(this.REG_PC_NEW&255);this.push(a);this.REG_PC_NEW=this.a.h.load(65530)|
this.a.h.load(65531)<<8;this.REG_PC_NEW--}},og:function(){this.REG_PC_NEW=this.a.h.load(65532)|this.a.h.load(65533)<<8;this.REG_PC_NEW--},mg:function(a){this.REG_PC_NEW++;this.push(this.REG_PC_NEW>>8&255);this.push(this.REG_PC_NEW&255);this.push(a);this.F_INTERRUPT_NEW=1;this.F_BRK_NEW=0;this.REG_PC_NEW=this.a.h.load(65534)|this.a.h.load(65535)<<8;this.REG_PC_NEW--},jh:function(a){this.F_CARRY=a&1;this.F_ZERO=a>>1&1;this.F_INTERRUPT=a>>2&1;this.F_DECIMAL=a>>3&1;this.F_BRK=a>>4&1;this.F_NOTUSED=a>>
5&1;this.F_OVERFLOW=a>>6&1;this.F_SIGN=a>>7&1},lb:["mem","cyclesToHalt","irqRequested","irqType","REG_ACC","REG_X","REG_Y","REG_SP","REG_PC","REG_PC_NEW","REG_STATUS","F_CARRY","F_DECIMAL","F_INTERRUPT","F_INTERRUPT_NEW","F_OVERFLOW","F_SIGN","F_ZERO","F_NOTUSED","F_NOTUSED_NEW","F_BRK","F_BRK_NEW"],toJSON:function(){return u.ea.toJSON(this)},u:function(a){u.ea.u(this,a)}};
u.Ra.se=function(){this.Jb=Array(256);for(var a=0;a<256;a++)this.Jb[a]=255;this.b(this.Sa,105,this.da,2,2);this.b(this.Sa,101,this.r,2,3);this.b(this.Sa,117,this.I,2,4);this.b(this.Sa,109,this.p,3,4);this.b(this.Sa,125,this.N,3,4);this.b(this.Sa,121,this.Ca,3,4);this.b(this.Sa,97,this.Pa,2,6);this.b(this.Sa,113,this.Oa,2,5);this.b(this.Ta,41,this.da,2,2);this.b(this.Ta,37,this.r,2,3);this.b(this.Ta,53,this.I,2,4);this.b(this.Ta,45,this.p,3,4);this.b(this.Ta,61,this.N,3,4);this.b(this.Ta,57,this.Ca,
3,4);this.b(this.Ta,33,this.Pa,2,6);this.b(this.Ta,49,this.Oa,2,5);this.b(this.Qb,10,this.sc,1,2);this.b(this.Qb,6,this.r,2,5);this.b(this.Qb,22,this.I,2,6);this.b(this.Qb,14,this.p,3,6);this.b(this.Qb,30,this.N,3,7);this.b(this.xf,144,this.Qa,2,2);this.b(this.yf,176,this.Qa,2,2);this.b(this.zf,240,this.Qa,2,2);this.b(this.de,36,this.r,2,3);this.b(this.de,44,this.p,3,4);this.b(this.Af,48,this.Qa,2,2);this.b(this.Bf,208,this.Qa,2,2);this.b(this.Cf,16,this.Qa,2,2);this.b(this.Df,0,this.n,1,7);this.b(this.Ef,
80,this.Qa,2,2);this.b(this.Ff,112,this.Qa,2,2);this.b(this.Gf,24,this.n,1,2);this.b(this.Hf,216,this.n,1,2);this.b(this.If,88,this.n,1,2);this.b(this.Jf,184,this.n,1,2);this.b(this.Ua,201,this.da,2,2);this.b(this.Ua,197,this.r,2,3);this.b(this.Ua,213,this.I,2,4);this.b(this.Ua,205,this.p,3,4);this.b(this.Ua,221,this.N,3,4);this.b(this.Ua,217,this.Ca,3,4);this.b(this.Ua,193,this.Pa,2,6);this.b(this.Ua,209,this.Oa,2,5);this.b(this.hd,224,this.da,2,2);this.b(this.hd,228,this.r,2,3);this.b(this.hd,236,
this.p,3,4);this.b(this.jd,192,this.da,2,2);this.b(this.jd,196,this.r,2,3);this.b(this.jd,204,this.p,3,4);this.b(this.uc,198,this.r,2,5);this.b(this.uc,214,this.I,2,6);this.b(this.uc,206,this.p,3,6);this.b(this.uc,222,this.N,3,7);this.b(this.Kf,202,this.n,1,2);this.b(this.Lf,136,this.n,1,2);this.b(this.Va,73,this.da,2,2);this.b(this.Va,69,this.r,2,3);this.b(this.Va,85,this.I,2,4);this.b(this.Va,77,this.p,3,4);this.b(this.Va,93,this.N,3,4);this.b(this.Va,89,this.Ca,3,4);this.b(this.Va,65,this.Pa,2,
6);this.b(this.Va,81,this.Oa,2,5);this.b(this.vc,230,this.r,2,5);this.b(this.vc,246,this.I,2,6);this.b(this.vc,238,this.p,3,6);this.b(this.vc,254,this.N,3,7);this.b(this.Mf,232,this.n,1,2);this.b(this.Nf,200,this.n,1,2);this.b(this.ee,76,this.p,3,3);this.b(this.ee,108,this.mf,3,5);this.b(this.Of,32,this.p,3,6);this.b(this.Wa,169,this.da,2,2);this.b(this.Wa,165,this.r,2,3);this.b(this.Wa,181,this.I,2,4);this.b(this.Wa,173,this.p,3,4);this.b(this.Wa,189,this.N,3,4);this.b(this.Wa,185,this.Ca,3,4);this.b(this.Wa,
161,this.Pa,2,6);this.b(this.Wa,177,this.Oa,2,5);this.b(this.Rb,162,this.da,2,2);this.b(this.Rb,166,this.r,2,3);this.b(this.Rb,182,this.$d,2,4);this.b(this.Rb,174,this.p,3,4);this.b(this.Rb,190,this.Ca,3,4);this.b(this.Sb,160,this.da,2,2);this.b(this.Sb,164,this.r,2,3);this.b(this.Sb,180,this.I,2,4);this.b(this.Sb,172,this.p,3,4);this.b(this.Sb,188,this.N,3,4);this.b(this.Tb,74,this.sc,1,2);this.b(this.Tb,70,this.r,2,5);this.b(this.Tb,86,this.I,2,6);this.b(this.Tb,78,this.p,3,6);this.b(this.Tb,94,
this.N,3,7);this.b(this.Pf,234,this.n,1,2);this.b(this.Xa,9,this.da,2,2);this.b(this.Xa,5,this.r,2,3);this.b(this.Xa,21,this.I,2,4);this.b(this.Xa,13,this.p,3,4);this.b(this.Xa,29,this.N,3,4);this.b(this.Xa,25,this.Ca,3,4);this.b(this.Xa,1,this.Pa,2,6);this.b(this.Xa,17,this.Oa,2,5);this.b(this.Qf,72,this.n,1,3);this.b(this.Rf,8,this.n,1,3);this.b(this.Sf,104,this.n,1,4);this.b(this.Tf,40,this.n,1,4);this.b(this.Ub,42,this.sc,1,2);this.b(this.Ub,38,this.r,2,5);this.b(this.Ub,54,this.I,2,6);this.b(this.Ub,
46,this.p,3,6);this.b(this.Ub,62,this.N,3,7);this.b(this.Vb,106,this.sc,1,2);this.b(this.Vb,102,this.r,2,5);this.b(this.Vb,118,this.I,2,6);this.b(this.Vb,110,this.p,3,6);this.b(this.Vb,126,this.N,3,7);this.b(this.Uf,64,this.n,1,6);this.b(this.Vf,96,this.n,1,6);this.b(this.Ya,233,this.da,2,2);this.b(this.Ya,229,this.r,2,3);this.b(this.Ya,245,this.I,2,4);this.b(this.Ya,237,this.p,3,4);this.b(this.Ya,253,this.N,3,4);this.b(this.Ya,249,this.Ca,3,4);this.b(this.Ya,225,this.Pa,2,6);this.b(this.Ya,241,this.Oa,
2,5);this.b(this.Wf,56,this.n,1,2);this.b(this.Xf,248,this.n,1,2);this.b(this.Yf,120,this.n,1,2);this.b(this.kb,133,this.r,2,3);this.b(this.kb,149,this.I,2,4);this.b(this.kb,141,this.p,3,4);this.b(this.kb,157,this.N,3,5);this.b(this.kb,153,this.Ca,3,5);this.b(this.kb,129,this.Pa,2,6);this.b(this.kb,145,this.Oa,2,6);this.b(this.kd,134,this.r,2,3);this.b(this.kd,150,this.$d,2,4);this.b(this.kd,142,this.p,3,4);this.b(this.ld,132,this.r,2,3);this.b(this.ld,148,this.I,2,4);this.b(this.ld,140,this.p,3,
4);this.b(this.Zf,170,this.n,1,2);this.b(this.$f,168,this.n,1,2);this.b(this.ag,186,this.n,1,2);this.b(this.bg,138,this.n,1,2);this.b(this.cg,154,this.n,1,2);this.b(this.dg,152,this.n,1,2);this.Gh=[7,6,2,8,3,3,5,5,3,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,3,2,2,2,3,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,5,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,6,2,6,4,4,4,4,
2,5,2,5,5,5,5,5,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,5,2,5,4,4,4,4,2,4,2,4,4,4,4,4,2,6,2,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,3,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7];this.d=Array(56);this.d[0]="ADC";this.d[1]="AND";this.d[2]="ASL";this.d[3]="BCC";this.d[4]="BCS";this.d[5]="BEQ";this.d[6]="BIT";this.d[7]="BMI";this.d[8]="BNE";this.d[9]="BPL";this.d[10]="BRK";this.d[11]="BVC";this.d[12]="BVS";this.d[13]="CLC";this.d[14]="CLD";this.d[15]="CLI";this.d[16]="CLV";
this.d[17]="CMP";this.d[18]="CPX";this.d[19]="CPY";this.d[20]="DEC";this.d[21]="DEX";this.d[22]="DEY";this.d[23]="EOR";this.d[24]="INC";this.d[25]="INX";this.d[26]="INY";this.d[27]="JMP";this.d[28]="JSR";this.d[29]="LDA";this.d[30]="LDX";this.d[31]="LDY";this.d[32]="LSR";this.d[33]="NOP";this.d[34]="ORA";this.d[35]="PHA";this.d[36]="PHP";this.d[37]="PLA";this.d[38]="PLP";this.d[39]="ROL";this.d[40]="ROR";this.d[41]="RTI";this.d[42]="RTS";this.d[43]="SBC";this.d[44]="SEC";this.d[45]="SED";this.d[46]=
"SEI";this.d[47]="STA";this.d[48]="STX";this.d[49]="STY";this.d[50]="TAX";this.d[51]="TAY";this.d[52]="TSX";this.d[53]="TXA";this.d[54]="TXS";this.d[55]="TYA";this.Ch=["Zero Page           ","Relative            ","Implied             ","Absolute            ","Accumulator         ","Immediate           ","Zero Page,X         ","Zero Page,Y         ","Absolute,X          ","Absolute,Y          ","Preindexed Indirect ","Postindexed Indirect","Indirect Absolute   "]};
u.Ra.se.prototype={Sa:0,Ta:1,Qb:2,xf:3,yf:4,zf:5,de:6,Af:7,Bf:8,Cf:9,Df:10,Ef:11,Ff:12,Gf:13,Hf:14,If:15,Jf:16,Ua:17,hd:18,jd:19,uc:20,Kf:21,Lf:22,Va:23,vc:24,Mf:25,Nf:26,ee:27,Of:28,Wa:29,Rb:30,Sb:31,Tb:32,Pf:33,Xa:34,Qf:35,Rf:36,Sf:37,Tf:38,Ub:39,Vb:40,Uf:41,Vf:42,Ya:43,Wf:44,Xf:45,Yf:46,kb:47,kd:48,ld:49,Zf:50,$f:51,ag:52,bg:53,cg:54,dg:55,r:0,Qa:1,n:2,p:3,sc:4,da:5,I:6,$d:7,N:8,Ca:9,Pa:10,Oa:11,mf:12,b:function(a,b,d,e,g){this.Jb[b]=a&255|(d&255)<<8|(e&255)<<16|(g&255)<<24}};u.Bb=function(){var a;this.L={fe:0,ge:1,le:2,me:3,ne:4,he:5,je:6,ke:7};this.sa=Array(8);for(a=0;a<this.sa.length;a++)this.sa[a]=64;this.ta=Array(8);for(a=0;a<this.ta.length;a++)this.ta[a]=64};
u.Bb.prototype={Ze:function(a,b){switch(a){case 88:this.sa[this.L.fe]=b;break;case 90:this.sa[this.L.ge]=b;break;case 17:this.sa[this.L.le]=b;break;case 13:this.sa[this.L.me]=b;break;case 38:this.sa[this.L.ne]=b;break;case 40:this.sa[this.L.he]=b;break;case 37:this.sa[this.L.je]=b;break;case 39:this.sa[this.L.ke]=b;break;case 103:this.ta[this.L.fe]=b;break;case 105:this.ta[this.L.ge]=b;break;case 99:this.ta[this.L.le]=b;break;case 97:this.ta[this.L.me]=b;break;case 104:this.ta[this.L.ne]=b;break;
case 98:this.ta[this.L.he]=b;break;case 100:this.ta[this.L.je]=b;break;case 102:this.ta[this.L.ke]=b;break;default:return f}return j},He:function(a){!this.Ze(a.keyCode,65)&&a.preventDefault&&a.preventDefault()},Je:function(a){!this.Ze(a.keyCode,64)&&a.preventDefault&&a.preventDefault()},Ie:function(a){a.preventDefault()}};u.g={};u.g[0]=k("a");
u.g[0].prototype={reset:function(){this.Lc=this.db=this.cb=0;this.Qc=j;this.Sc=this.Rc=h},write:function(a,b){if(a<8192)this.a.f.mem[a&2047]=b;else if(a>16407)this.a.f.mem[a]=b;else a>8199&&a<16384?this.Re(8192+(a&7),b):this.Re(a,b)},load:function(a){a&=65535;return a>16407?this.a.f.mem[a]:a>=8192?this.Zg(a):this.a.f.mem[a&2047]},Zg:function(a){switch(a>>12){case 2:case 3:switch(a&7){case 0:return this.a.f.mem[8192];case 1:return this.a.f.mem[8193];case 2:return this.a.j.Yg();case 3:return 0;case 4:return this.a.j.nh();
case 5:return 0;case 6:return 0;case 7:return this.a.j.wh()}break;case 4:switch(a-16405){case 0:return this.a.v.Oe(a);case 1:return this.Og();case 2:if(this.Qc){a=Math.max(0,this.Rc-4);for(var b=Math.min(256,this.Rc+4),d=Math.min(240,this.Sc+4),e=0,g=Math.max(0,this.Sc-4);g<d;g++)for(var c=a;c<b;c++)if(this.a.j.buffer[(g<<8)+c]==16777215){e|=8;console.debug("Clicked on white!");break}e|=this.Qc?16:0;return(this.Ge()|e)&65535}else return this.Ge()}}return 0},Re:function(a,b){switch(a){case 8192:this.a.f.mem[a]=
b;this.a.j.gf(b);break;case 8193:this.a.f.mem[a]=b;this.a.j.hf(b);break;case 8195:this.a.j.Ah(b);break;case 8196:this.a.j.oh(b);break;case 8197:this.a.j.eh(b);break;case 8198:this.a.j.Bh(b);break;case 8199:this.a.j.xh(b);break;case 16404:this.a.j.mh(b);break;case 16405:this.a.v.G(a,b);break;case 16406:if(b===0&&this.Lc===1)this.db=this.cb=0;this.Lc=b;break;case 16407:this.a.v.G(a,b);break;default:a>=16384&&a<=16407&&this.a.v.G(a,b)}},Og:function(){var a;switch(this.cb){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a=
this.a.ec.sa[this.cb];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:a=0;break;case 19:a=1;break;default:a=0}this.cb++;if(this.cb==24)this.cb=0;return a},Ge:function(){var a;switch(this.db){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a=this.a.ec.ta[this.db];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:a=0;break;case 19:a=1;break;default:a=0}this.db++;if(this.db==24)this.db=0;return a},Ib:function(){if(!this.a.c.ib||
this.a.c.A<1)alert("NoMapper: Invalid ROM! Unable to load.");else{this.Rg();this.Oc();this.Dd();this.a.f.xb(this.a.f.wc)}},Rg:function(){if(this.a.c.A>1){this.W(0,32768);this.W(1,49152)}else{this.W(0,32768);this.W(0,49152)}},Oc:function(){if(this.a.c.t>0)if(this.a.c.t==1){this.wa(0,0);this.wa(0,4096)}else{this.wa(0,0);this.wa(1,4096)}},Dd:function(){if(this.a.c.pd){var a=this.a.c.pd;a!==h&&a.length==8192&&u.ea.Fb(a,0,this.a.f.mem,24576,8192)}},W:function(a,b){a%=this.a.c.A;u.ea.Fb(this.a.c.c[a],0,
this.a.f.mem,b,16384)},wa:function(a,b){if(this.a.c.t!==0){this.a.j.Ma();u.ea.Fb(this.a.c.Na[a%this.a.c.t],0,this.a.j.vramMem,b,4096);u.ea.Fb(this.a.c.Ab[a%this.a.c.t],0,this.a.j.F,b>>4,256)}},Pg:function(a,b){this.W(a*2%this.a.c.A,b);this.W((a*2+1)%this.a.c.A,b+16384)},Le:function(a,b){if(this.a.c.t!==0){this.a.j.Ma();this.wa(a%this.a.c.t,b);this.wa((a+1)%this.a.c.t,b+4096)}},M:function(a,b){if(this.a.c.t!==0){this.a.j.Ma();var d=Math.floor(a/4)%this.a.c.t;u.ea.Fb(this.a.c.Na[d],0,this.a.j.vramMem,
a%4*1024,1024);d=this.a.c.Ab[d];for(var e=b>>4,g=0;g<64;g++)this.a.j.F[e+g]=d[(a%4<<6)+g]}},ia:function(a,b){u.ea.Fb(this.a.c.c[Math.floor(a/2)%this.a.c.A],a%2*8192,this.a.f.mem,b,8192)},toJSON:function(){return{joy1StrobeState:this.cb,joy2StrobeState:this.db,joypadLastWrite:this.Lc}},u:function(a){this.cb=a.joy1StrobeState;this.db=a.joy2StrobeState;this.Lc=a.joypadLastWrite}};u.g[1]=k("a");u.g[1].prototype=new u.g[0];
u.g[1].prototype.reset=function(){u.g[0].prototype.reset.apply(this);this.Uc=this.ja=this.xa=this.Ja=0;this.vb=this.ub=1;this.Yc=this.yb=this.ya=this.jb=0};
u.g[1].prototype.write=function(a,b){if(a<32768)u.g[0].prototype.write.apply(this,arguments);else if((b&128)!==0){this.Ja=this.xa=0;if(x(a)===0)this.vb=this.ub=1}else{this.Ja=this.Ja&255-(1<<this.xa)|(b&1)<<this.xa;this.xa++;if(this.xa==5){var d=this.Ja,e;switch(x(a)){case 0:e=d&3;if(e!==this.ja){this.ja=e;if((this.ja&2)===0)this.a.j.Mb(this.a.c.ve);else(this.ja&1)!==0?this.a.j.Mb(this.a.c.tc):this.a.j.Mb(this.a.c.xc)}this.ub=d>>2&1;this.vb=d>>3&1;this.jb=d>>4&1;break;case 1:this.ya=d>>4&1;if(this.a.c.t>
0)if(this.jb===0)this.ya===0?this.Le(d&15,0):this.Le(Math.floor(this.a.c.t/2)+(d&15),0);else this.ya===0?this.wa(d&15,0):this.wa(Math.floor(this.a.c.t/2)+(d&15),0);break;case 2:this.yb=d>>4&1;if(this.a.c.t>0)if(this.jb===1)this.yb===0?this.wa(d&15,4096):this.wa(Math.floor(this.a.c.t/2)+(d&15),4096);break;default:e=0;if(this.a.c.A>=32)if(this.jb===0){if(this.ya===1)e=16}else e=(this.ya|this.yb<<1)<<3;else if(this.a.c.A>=16)if(this.ya===1)e=8;if(this.vb===0)this.Pg(e+(d&15),32768);else{d=e*2+(d&15);
this.ub===0?this.W(d,49152):this.W(d,32768)}}this.xa=this.Ja=0}}};function x(a){return a>=32768&&a<=40959?0:a>=40960&&a<=49151?1:a>=49152&&a<=57343?2:3}u.g[1].prototype.Ib=function(){if(this.a.c.ib){this.W(0,32768);this.W(this.a.c.A-1,49152);this.Oc();this.Dd();this.a.f.xb(this.a.f.wc)}else alert("MMC1: Invalid ROM! Unable to load.")};
u.g[1].prototype.toJSON=function(){var a=u.g[0].prototype.toJSON.apply(this);a.ja=this.ja;a.Uc=this.Uc;a.ub=this.ub;a.vb=this.vb;a.jb=this.jb;a.ya=this.ya;a.yb=this.yb;a.Yc=this.Yc;a.Ja=this.Ja;a.xa=this.xa;return a};u.g[1].prototype.u=function(a){u.g[0].prototype.u.apply(this,a);this.ja=a.ja;this.Uc=a.Uc;this.ub=a.ub;this.vb=a.vb;this.jb=a.jb;this.ya=a.ya;this.yb=a.yb;this.Yc=a.Yc;this.Ja=a.Ja;this.xa=a.xa};u.g[2]=k("a");u.g[2].prototype=new u.g[0];
u.g[2].prototype.write=function(a,b){a<32768?u.g[0].prototype.write.apply(this,arguments):this.W(b,32768)};u.g[2].prototype.Ib=function(){if(this.a.c.ib){this.W(0,32768);this.W(this.a.c.A-1,49152);this.Oc();this.a.f.xb(this.a.f.wc)}else alert("UNROM: Invalid ROM! Unable to load.")};u.g[4]=function(a){this.a=a;this.rf=0;this.sf=1;this.nf=2;this.of=3;this.pf=4;this.qf=5;this.tf=6;this.uf=7;this.Gb=this.dc=this.cc=this.Vc=this.fa=this.Ia=this.Eb=h;this.Ha=j};u.g[4].prototype=new u.g[0];
u.g[4].prototype.write=function(a,b){if(a<32768)u.g[0].prototype.write.apply(this,arguments);else switch(a){case 32768:this.Eb=b&7;var d=b>>6&1;if(d!=this.Ia)this.Ha=f;this.Ia=d;this.fa=b>>7&1;break;case 32769:switch(this.Eb){case this.rf:if(this.fa===0){this.M(b,0);this.M(b+1,1024)}else{this.M(b,4096);this.M(b+1,5120)}break;case this.sf:if(this.fa===0){this.M(b,2048);this.M(b+1,3072)}else{this.M(b,6144);this.M(b+1,7168)}break;case this.nf:this.fa===0?this.M(b,4096):this.M(b,0);break;case this.of:this.fa===
0?this.M(b,5120):this.M(b,1024);break;case this.pf:this.fa===0?this.M(b,6144):this.M(b,2048);break;case this.qf:this.fa===0?this.M(b,7168):this.M(b,3072);break;case this.tf:if(this.Ha){this.Ia===0?this.ia((this.a.c.A-1)*2,49152):this.ia((this.a.c.A-1)*2,32768);this.Ha=j}this.Ia===0?this.ia(b,32768):this.ia(b,49152);break;case this.uf:this.ia(b,40960);if(this.Ha){this.Ia===0?this.ia((this.a.c.A-1)*2,49152):this.ia((this.a.c.A-1)*2,32768);this.Ha=j}}break;case 40960:(b&1)!==0?this.a.j.Mb(this.a.c.tc):
this.a.j.Mb(this.a.c.xc);break;case 49152:this.cc=b;break;case 49153:this.dc=b;break;case 57344:this.Gb=0;break;case 57345:this.Gb=1}};u.g[4].prototype.Ib=function(){if(this.a.c.ib){this.ia((this.a.c.A-1)*2,49152);this.ia((this.a.c.A-1)*2+1,57344);this.ia(0,32768);this.ia(1,40960);this.Oc();this.Dd();this.a.f.xb(this.a.f.wc)}else alert("MMC3: Invalid ROM! Unable to load.")};
u.g[4].prototype.toJSON=function(){var a=u.g[0].prototype.toJSON.apply(this);a.Eb=this.Eb;a.Ia=this.Ia;a.fa=this.fa;a.Vc=this.Vc;a.cc=this.cc;a.dc=this.dc;a.Gb=this.Gb;a.Ha=this.Ha;return a};u.g[4].prototype.u=function(a){u.g[0].prototype.u.apply(this,a);this.Eb=a.Eb;this.Ia=a.Ia;this.fa=a.fa;this.Vc=a.Vc;this.cc=a.cc;this.dc=a.dc;this.Gb=a.Gb;this.Ha=a.Ha};u.O=function(a){this.a=a;this.ba=new u.O.gd(this,f);this.ca=new u.O.gd(this,j);this.X=new u.O.ce(this);this.ka=new u.O.be(this);this.R=new u.O.ae(this);this.Ih=h;this.Ic=4;this.bc=2048;this.ye=h;this.xe=8192;this.Cb=0;this.Ye=44100;this.hb=this.gb=this.C=this.B=this.Ke=h;this.kc=Array(this.xe*2);this.ac=j;this.Hh=this.$b=h;this.Kc=this.Mh=this.sh=j;this.dh=this.Zc=this.ob=this.lc=this.Yb=this.Z=this.fc=h;this.La=0;this.Q=this.ma=this.za=this.oa=this.na=h;this.ud=this.Be=this.cd=this.bd=this.Hd=this.Gd=
0;this.s=256;this.Fd=this.Ed=this.Hc=this.af=this.bf=this.ef=this.df=this.cf=this.Rd=this.Sd=this.Vd=this.Ud=this.Td=h;this.tb=[80,170,100,150,128];this.hh(this.tb);this.Kg();this.Jg();this.Lg();this.Ig();for(a=0;a<20;a++)a===16?this.G(16400,16):this.G(16384+a,0);this.reset()};
u.O.prototype={reset:function(){this.Ye=this.a.D.sampleRate;this.Zc=Math.floor(1024*this.a.D.CPU_FREQ_NTSC*this.a.D.Xg/(this.Ye*60));this.ob=Math.floor(14915*this.a.D.Xg/60);this.Cb=this.lc=0;this.ff(0);this.dh=this.Yb=this.Z=this.fc=0;this.bc=2048;this.Kc=this.ac=j;this.ah();this.ba.reset();this.ca.reset();this.X.reset();this.ka.reset();this.R.reset();this.ma=this.za=this.oa=this.na=this.Q=this.Cb=0;this.ac=j;this.Ic=4;this.ye=255;this.sh=j;this.cd=this.bd=this.Hd=this.Gd=0;this.Ed=-5E5;this.Fd=
5E5},Oe:function(){var a=0;a|=this.ba.ab();a|=this.ca.ab()<<1;a|=this.X.ab()<<2;a|=this.ka.ab()<<3;a|=this.R.ab()<<4;a|=(this.$b&&this.ac?1:0)<<6;a|=this.R.Ag()<<7;this.$b=j;this.R.pb=j;return a&65535},G:function(a,b){if(a>=16384&&a<16388)this.ba.G(a,b);else if(a>=16388&&a<16392)this.ca.G(a,b);else if(a>=16392&&a<16396)this.X.G(a,b);else if(a>=16396&&a<=16399)this.ka.G(a,b);else if(a===16400)this.R.G(a,b);else if(a===16401)this.R.G(a,b);else if(a===16402)this.R.G(a,b);else if(a===16403)this.R.G(a,
b);else if(a===16405){this.ff(b);if(b!==0&&this.bc>0)this.Kc=f;this.R.G(a,b)}else if(a===16407){this.Yb=b>>7&1;this.fc=0;this.$b=j;this.ac=(b>>6&1)===0?f:j;if(this.Yb===0)this.Z=this.Ic=4;else{this.Ic=5;this.Z=0;this.Ee()}}},ah:function(){this.Z=this.Yb===0?4:0},ff:function(a){this.ye=a&65535;this.ba.fb((a&1)!==0);this.ca.fb((a&2)!==0);this.X.fb((a&4)!==0);this.ka.fb((a&8)!==0);this.R.fb((a&16)!==0)},sd:function(a){if(this.bc>0)if(this.Kc){this.bc-=a;if(this.bc<=0)this.Kc=j;return}a+=this.Hc;var b=
this.Zc-this.lc;if(a<<10>b){this.Hc=(a<<10)-b>>10;a-=this.Hc}else this.Hc=0;var d=this.R,e=this.X,g=this.ba,c=this.ca;b=this.ka;if(d.o)for(d.ad-=a<<3;d.ad<=0&&d.Gc>0;){d.ad+=d.Gc;d.ig()}if(e.i>0)for(e.z-=a;e.z<=0;){e.z+=e.i+1;if(e.Hb>0&&e.l>0){e.zb++;e.zb&=31;if(e.o){e.q=e.zb>=16?e.zb&15:15-(e.zb&15);e.q<<=4}}}g.z-=a;if(g.z<=0){g.z+=g.i+1<<1;g.Ob++;g.Ob&=7;g.Ba()}c.z-=a;if(c.z<=0){c.z+=c.i+1<<1;c.Ob++;c.Ob&=7;c.Ba()}d=a;if(b.z-d>0){b.z-=d;b.Q+=d;b.yc+=d*b.q}else for(;d-- >0;){if(--b.z<=0&&b.i>0){b.nc<<=
1;b.qc=(b.nc<<(b.Jd===0?1:6)^b.nc)&32768;if(b.qc!==0){b.nc|=1;b.Wc=0;b.q=0}else{b.Wc=1;b.q=b.o&&b.l>0?b.s:0}b.z+=b.i}b.yc+=b.q;b.Q++}this.ac&&this.$b&&this.a.f.xb(this.a.f.md);this.fc+=a<<1;if(this.fc>=this.ob){this.fc-=this.ob;this.Ee()}this.hg(a);this.lc+=a<<10;if(this.lc>=this.Zc){this.Ka();this.lc-=this.Zc}},hg:function(a){if(this.X.Md){this.La=Math.floor((this.X.z<<4)/(this.X.i+1));if(this.La>16)this.La=16;if(this.X.zb>=16)this.La=16-this.La;this.La+=this.X.q}if(a===2){this.za+=this.La<<1;this.ma+=
this.R.Ka<<1;this.na+=this.ba.q<<1;this.oa+=this.ca.q<<1;this.Q+=2}else if(a===4){this.za+=this.La<<2;this.ma+=this.R.Ka<<2;this.na+=this.ba.q<<2;this.oa+=this.ca.q<<2;this.Q+=4}else{this.za+=a*this.La;this.ma+=a*this.R.Ka;this.na+=a*this.ba.q;this.oa+=a*this.ca.q;this.Q+=a}},Ee:function(){this.Z++;if(this.Z>=this.Ic)this.Z=0;if(this.Z===1||this.Z===3){this.X.Db();this.ba.Db();this.ca.Db();this.ka.Db();this.ba.ze();this.ca.ze()}if(this.Z>=0&&this.Z<4){this.ba.Bc();this.ca.Bc();this.ka.Bc();this.X.jg()}if(this.Z===
3&&this.Yb===0)this.$b=f},Ka:function(){var a,b;if(this.Q>0){this.na<<=4;this.na=Math.floor(this.na/this.Q);this.oa<<=4;this.oa=Math.floor(this.oa/this.Q);this.za=Math.floor(this.za/this.Q);this.ma<<=4;this.ma=Math.floor(this.ma/this.Q);this.Q=0}else{this.na=this.ba.q<<4;this.oa=this.ca.q<<4;this.za=this.X.q;this.ma=this.R.Ka<<4}var d=Math.floor((this.ka.yc<<4)/this.ka.Q);this.ka.yc=d>>4;this.ka.Q=1;a=this.na*this.Td+this.oa*this.Ud>>8;b=3*this.za*this.Vd+(d<<1)*this.Sd+this.ma*this.Rd>>8;if(a>=this.gb.length)a=
this.gb.length-1;if(b>=this.hb.length)b=this.hb.length-1;var e=this.gb[a]+this.hb[b]-this.ud;a=this.na*this.cf+this.oa*this.df>>8;b=3*this.za*this.ef+(d<<1)*this.bf+this.ma*this.af>>8;if(a>=this.gb.length)a=this.gb.length-1;if(b>=this.hb.length)b=this.hb.length-1;a=this.gb[a]+this.hb[b]-this.ud;e-=this.Gd;this.Gd+=e;this.bd+=e-(this.bd>>10);e=this.bd;a-=this.Hd;this.Hd+=a;this.cd+=a-(this.cd>>10);a=this.cd;if(e>this.Ed)this.Ed=e;if(e<this.Fd)this.Fd=e;this.kc[this.Cb++]=e;this.kc[this.Cb++]=a;if(this.Cb===
this.kc.length){this.a.Aa.kf(this.kc);this.kc=Array(this.xe*2);this.Cb=0}this.ma=this.za=this.oa=this.na=0},xd:function(a){return this.Ke[a>>3]},yg:function(a){if(a>=0&&a<16)return this.B[a];return 0},Dg:function(a){if(a>=0&&a<16)return this.C[a];return 0},hh:function(a){for(var b=0;b<5;b++)this.tb[b]=a[b];this.uh()},uh:function(){this.Td=this.tb[0]*this.s>>8;this.Ud=this.tb[1]*this.s>>8;this.Vd=this.tb[2]*this.s>>8;this.Sd=this.tb[3]*this.s>>8;this.Rd=this.tb[4]*this.s>>8;this.cf=this.s-this.Td;
this.df=this.s-this.Ud;this.ef=this.s-this.Vd;this.bf=this.s-this.Sd;this.af=this.s-this.Rd},Kg:function(){this.Ke=[10,254,20,2,40,4,80,6,160,8,60,10,14,12,26,14,12,16,24,18,48,20,96,22,192,24,72,26,16,28,32,30]},Jg:function(){this.B=Array(16);this.B[0]=3424;this.B[1]=3040;this.B[2]=2720;this.B[3]=2560;this.B[4]=2288;this.B[5]=2032;this.B[6]=1808;this.B[7]=1712;this.B[8]=1520;this.B[9]=1280;this.B[10]=1136;this.B[11]=1024;this.B[12]=848;this.B[13]=672;this.B[14]=576;this.B[15]=432},Lg:function(){this.C=
Array(16);this.C[0]=4;this.C[1]=8;this.C[2]=16;this.C[3]=32;this.C[4]=64;this.C[5]=96;this.C[6]=128;this.C[7]=160;this.C[8]=202;this.C[9]=254;this.C[10]=380;this.C[11]=508;this.C[12]=762;this.C[13]=1016;this.C[14]=2034;this.C[15]=4068},Ig:function(){var a,b,d=0,e=0;this.gb=Array(512);this.hb=Array(3264);for(b=0;b<512;b++){a=95.52/(8128/(b/16)+100);a*=0.98411;a*=5E4;a=Math.floor(a);this.gb[b]=a;if(a>d)d=a}for(b=0;b<3264;b++){a=163.67/(24329/(b/16)+100);a*=0.98411;a*=5E4;a=Math.floor(a);this.hb[b]=
a;if(a>e)e=a}this.Be=d+e;this.ud=this.Be/2}};u.O.ae=function(a){this.v=a;this.qe=0;this.pe=1;this.oe=2;this.yd=this.o=h;this.pb=j;this.data=this.Ec=this.Ka=this.Qe=this.Pe=this.ad=this.la=this.Kb=this.eb=this.hc=this.$a=this.Fc=this.Gc=this.Lb=h;this.reset()};
u.O.ae.prototype={ig:function(){if(this.yd){if((this.data&1)===0)this.$a>0&&this.$a--;else this.$a<63&&this.$a++;this.Ka=this.o?(this.$a<<1)+this.Ec:0;this.data>>=1}this.Fc--;if(this.Fc<=0){this.yd=j;this.tg();this.Fc=8}this.pb&&this.v.a.f.xb(this.v.a.f.md)},tg:function(){if(this.la===0&&this.Lb===this.pe){this.eb=this.hc;this.la=this.Kb}if(this.la>0){this.Vg();if(this.la===0)if(this.Lb===this.oe)this.pb=f}},Vg:function(){this.data=this.v.a.h.load(this.eb);this.v.a.f.Fe(4);this.la--;this.eb++;if(this.eb>
65535)this.eb=32768;this.yd=f},G:function(a,b){if(a===16400){if(b>>6===0)this.Lb=this.qe;else if((b>>6&1)===1)this.Lb=this.pe;else if(b>>6===2)this.Lb=this.oe;if((b&128)===0)this.pb=j;this.Gc=this.v.yg(b&15)}else if(a===16401){this.$a=b>>1&63;this.Ec=b&1;this.Ka=(this.$a<<1)+this.Ec}else if(a===16402){this.eb=this.hc=b<<6|49152;this.Pe=b}else if(a===16403){this.la=this.Kb=(b<<4)+1;this.Qe=b}else if(a===16405){if((b>>4&1)===0)this.la=0;else{this.eb=this.hc;this.la=this.Kb}this.pb=j}},fb:function(a){if(!this.o&&
a)this.la=this.Kb;this.o=a},ab:function(){return this.la===0||!this.o?0:1},Ag:function(){return this.pb?1:0},reset:function(){this.pb=this.o=j;this.Lb=this.qe;this.data=this.Qe=this.Pe=this.ad=this.Ec=this.Ka=this.la=this.Kb=this.eb=this.hc=this.$a=this.Fc=this.Gc=0}};u.O.be=function(a){this.v=a;this.s=this.S=this.Da=this.V=this.i=this.z=this.l=this.kh=this.nb=this.ha=this.mb=this.Ea=this.o=h;this.nc=16384;this.q=this.Jd=this.Wc=h;this.yc=0;this.Q=1;this.qc=h;this.reset()};
u.O.be.prototype={reset:function(){this.i=this.z=0;this.o=j;this.l=0;this.kh=this.mb=this.Ea=this.ha=j;this.s=this.S=this.Da=this.V=0;this.nc=1;this.qc=this.q=this.Jd=this.Wc=0},Db:function(){if(this.ha&&this.l>0){this.l--;this.l===0&&this.Ba()}},Bc:function(){if(this.nb){this.nb=j;this.Da=this.V+1;this.S=15}else if(--this.Da<=0){this.Da=this.V+1;if(this.S>0)this.S--;else this.S=this.mb?15:0}this.s=this.Ea?this.V:this.S;this.Ba()},Ba:function(){if(this.o&&this.l>0)this.q=this.Wc*this.s},G:function(a,
b){if(a===16396){this.Ea=(b&16)!==0;this.V=b&15;this.mb=(b&32)!==0;this.ha=(b&32)===0;this.s=this.Ea?this.V:this.S}else if(a===16398){this.i=this.v.Dg(b&15);this.Jd=b>>7}else if(a===16399){this.l=this.v.xd(b&248);this.nb=f}},fb:function(a){this.o=a;if(!a)this.l=0;this.Ba()},ab:function(){return this.l===0||!this.o?0:1}};
u.O.gd=function(a,b){this.v=a;this.pg=[0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,1,0,0,1,1,1,1,1];this.Jh=[1,-1,0,0,0,0,0,0,1,0,-1,0,0,0,0,0,1,0,0,0,-1,0,0,0,-1,0,1,0,0,0,0,0];this.$e=b;this.vh=this.q=this.Ph=this.vd=this.s=this.S=this.Da=this.V=this.Pb=this.fd=this.ed=this.dd=this.Ob=this.l=this.i=this.z=this.Yd=this.Xd=this.nb=this.mb=this.Ea=this.Wd=this.ha=this.o=h;this.reset()};
u.O.gd.prototype={reset:function(){this.vh=this.vd=this.s=this.S=this.Da=this.V=this.Pb=this.fd=this.ed=this.dd=this.Ob=this.l=this.i=this.z=0;this.mb=this.Ea=this.Xd=this.Wd=this.ha=this.o=j},Db:function(){if(this.ha&&this.l>0){this.l--;this.l===0&&this.Ba()}},Bc:function(){if(this.nb){this.nb=j;this.Da=this.V+1;this.S=15}else if(--this.Da<=0){this.Da=this.V+1;if(this.S>0)this.S--;else this.S=this.mb?15:0}this.s=this.Ea?this.V:this.S;this.Ba()},ze:function(){if(--this.dd<=0){this.dd=this.ed+1;if(this.Wd&&
this.Pb>0&&this.i>7){this.Xd=j;if(this.fd===0){this.i+=this.i>>this.Pb;if(this.i>4095){this.i=4095;this.Xd=f}}else this.i-=(this.i>>this.Pb)-(this.$e?1:0)}}if(this.Yd){this.Yd=j;this.dd=this.ed+1}},Ba:function(){this.q=this.o&&this.l>0&&this.i>7?this.fd===0&&this.i+(this.i>>this.Pb)>4095?0:this.s*this.pg[(this.vd<<3)+this.Ob]:0},G:function(a,b){var d=this.$e?0:4;if(a===16384+d){this.Ea=(b&16)!==0;this.V=b&15;this.mb=(b&32)!==0;this.vd=b>>6&3;this.ha=(b&32)===0;this.s=this.Ea?this.V:this.S;this.Ba()}else if(a===
16385+d){this.Wd=(b&128)!==0;this.ed=b>>4&7;this.fd=b>>3&1;this.Pb=b&7;this.Yd=f}else if(a===16386+d){this.i&=1792;this.i|=b}else if(a===16387+d){this.i&=255;this.i|=(b&7)<<8;if(this.o)this.l=this.v.xd(b&248);this.nb=f}},fb:function(a){this.o=a;if(!a)this.l=0;this.Ba()},ab:function(){return this.l===0||!this.o?0:1}};u.O.ce=function(a){this.v=a;this.qc=this.q=this.Bd=this.Hb=this.l=this.zb=this.i=this.z=this.Mc=this.Nc=this.ha=this.Md=this.o=h;this.reset()};
u.O.ce.prototype={reset:function(){this.zb=this.i=this.z=0;this.Md=this.o=j;this.l=0;this.ha=j;this.Bd=this.Hb=0;this.Nc=f;this.Mc=j;this.qc=0;this.q=15},Db:function(){if(this.ha&&this.l>0){this.l--;this.l===0&&this.rc()}},jg:function(){if(this.Nc){this.Hb=this.Bd;this.rc()}else if(this.Hb>0){this.Hb--;this.rc()}if(!this.Mc)this.Nc=j},ab:function(){return this.l===0||!this.o?0:1},Oe:function(){return 0},G:function(a,b){if(a===16392){this.Mc=(b&128)!==0;this.Bd=b&127;this.ha=!this.Mc}else if(a===16394){this.i&=
1792;this.i|=b}else if(a===16395){this.i&=255;this.i|=(b&7)<<8;this.l=this.v.xd(b&248);this.Nc=f}this.rc()},fb:function(a){this.o=a;if(!a)this.l=0;this.rc()},rc:function(){this.Md=this.o&&this.i>7&&this.Hb>0&&this.l>0}};u.P=function(a){this.a=a;this.sb=this.vramMirrorTable=this.Ga=this.currentMirroring=this.ntable1=this.F=this.imgPalette=this.sprPalette=this.hitSpr0=this.qa=this.pa=this.qd=this.bb=this.Y=this.Nb=this.ra=this.m=this.U=this.curX=this.lastRenderedScanline=this.scanline=this.scantile=this.validTileData=this.pixrendered=this.bgbuffer=this.Ne=this.buffer=this.Za=this.curNt=this.regS=this.regFH=this.regHT=this.regVT=this.regH=this.regV=this.regFV=this.cntHT=this.cntVT=this.cntH=this.cntV=this.cntFV=this.f_dispType=
this.f_bgClipping=this.f_spClipping=this.f_bgVisibility=this.f_spVisibility=this.f_color=this.f_nTblAddress=this.f_addrInc=this.f_spPatternTable=this.f_bgPatternTable=this.f_spriteSize=this.f_nmiOnVblank=this.scanlineAlreadyRendered=this.nmiCounter=this.validTileData=this.dummyCycleToggle=this.nmiOk=this.requestEndFrame=this.currentMirroring=this.sramAddress=this.firstWrite=this.vramBufferedReadValue=this.vramTmpAddress=this.vramAddress=this.spriteMem=this.vramMem=h;this.lh=j;this.rd=f;this.reset()};
u.P.prototype={we:6,nd:7,reset:function(){var a;this.vramMem=Array(32768);this.spriteMem=Array(256);for(a=0;a<this.vramMem.length;a++)this.vramMem[a]=0;for(a=0;a<this.spriteMem.length;a++)this.spriteMem[a]=0;this.vramTmpAddress=this.vramAddress=h;this.vramBufferedReadValue=0;this.firstWrite=f;this.sramAddress=0;this.currentMirroring=-1;this.validTileData=this.dummyCycleToggle=this.nmiOk=this.requestEndFrame=j;this.nmiCounter=0;this.scanlineAlreadyRendered=h;this.regS=this.regFH=this.regHT=this.regVT=
this.regH=this.regV=this.regFV=this.cntHT=this.cntVT=this.cntH=this.cntV=this.cntFV=this.f_dispType=this.f_bgClipping=this.f_spClipping=this.f_bgVisibility=this.f_spVisibility=this.f_color=this.f_nTblAddress=this.f_addrInc=this.f_spPatternTable=this.f_bgPatternTable=this.f_spriteSize=this.f_nmiOnVblank=0;this.curNt=h;this.Za=Array(32);this.buffer=Array(61440);this.Ne=Array(61440);this.bgbuffer=Array(61440);this.pixrendered=Array(61440);this.validTileData=h;this.scantile=Array(32);this.scanline=0;
this.lastRenderedScanline=-1;this.curX=0;this.U=Array(64);this.m=Array(64);this.ra=Array(64);this.Nb=Array(64);this.Y=Array(64);this.bb=Array(64);this.qd=Array(64);this.qa=this.pa=0;this.hitSpr0=j;this.sprPalette=Array(16);this.imgPalette=Array(16);this.F=Array(512);for(a=0;a<512;a++)this.F[a]=new u.P.od;this.ntable1=Array(4);this.currentMirroring=-1;this.Ga=Array(4);for(a=0;a<4;a++)this.Ga[a]=new u.P.re(32,32,"Nt"+a);this.vramMirrorTable=Array(32768);for(a=0;a<32768;a++)this.vramMirrorTable[a]=a;
this.sb=new u.P.te;this.sb.Qg();this.gf(0);this.hf(0)},Mb:function(a){if(a!=this.currentMirroring){this.currentMirroring=a;this.Ma();if(this.vramMirrorTable===h)this.vramMirrorTable=Array(32768);for(var b=0;b<32768;b++)this.vramMirrorTable[b]=b;this.K(16160,16128,32);this.K(16192,16128,32);this.K(16256,16128,32);this.K(16320,16128,32);this.K(12288,8192,3840);this.K(16384,0,16384);if(a==this.a.c.tc){this.ntable1[0]=0;this.ntable1[1]=0;this.ntable1[2]=1;this.ntable1[3]=1;this.K(9216,8192,1024);this.K(11264,
10240,1024)}else if(a==this.a.c.xc){this.ntable1[0]=0;this.ntable1[1]=1;this.ntable1[2]=0;this.ntable1[3]=1;this.K(10240,8192,1024);this.K(11264,9216,1024)}else if(a==this.a.c.ve){this.ntable1[0]=0;this.ntable1[1]=0;this.ntable1[2]=0;this.ntable1[3]=0;this.K(9216,8192,1024);this.K(10240,8192,1024);this.K(11264,8192,1024)}else if(a==this.a.c.gg){this.ntable1[0]=1;this.ntable1[1]=1;this.ntable1[2]=1;this.ntable1[3]=1;this.K(9216,9216,1024);this.K(10240,9216,1024);this.K(11264,9216,1024)}else{this.ntable1[0]=
0;this.ntable1[1]=1;this.ntable1[2]=2;this.ntable1[3]=3}}},K:function(a,b,d){for(var e=0;e<d;e++)this.vramMirrorTable[a+e]=b+e},rh:function(){this.a.f.xb(this.a.f.eg);this.lastRenderedScanline<239&&this.Ue(this.lastRenderedScanline+1,240-this.lastRenderedScanline);this.sg();this.lastRenderedScanline=-1},ug:function(){switch(this.scanline){case 19:if(this.dummyCycleToggle){this.curX=1;this.dummyCycleToggle=!this.dummyCycleToggle}break;case 20:this.mc(this.nd,j);this.mc(this.we,j);this.hitSpr0=j;this.qa=
this.pa=-1;if(this.f_bgVisibility==1||this.f_spVisibility==1){this.cntFV=this.regFV;this.cntV=this.regV;this.cntH=this.regH;this.cntVT=this.regVT;this.cntHT=this.regHT;this.f_bgVisibility==1&&this.Te(j,0)}this.f_bgVisibility==1&&this.f_spVisibility==1&&this.Xb(0);break;case 261:this.mc(this.nd,f);this.requestEndFrame=f;this.nmiCounter=9;this.scanline=-1;break;default:if(this.scanline>=21&&this.scanline<=260)if(this.f_bgVisibility==1){if(!this.scanlineAlreadyRendered){this.cntHT=this.regHT;this.cntH=
this.regH;this.Te(f,this.scanline+1-21)}this.scanlineAlreadyRendered=j;if(!this.hitSpr0&&this.f_spVisibility==1)if(this.U[0]>=-7&&this.U[0]<256&&this.m[0]+1<=this.scanline-20&&this.m[0]+1+(this.f_spriteSize===0?8:16)>=this.scanline-20)if(this.Xb(this.scanline-20))this.hitSpr0=f}}this.scanline++;this.Ld();this.Cc()},qh:function(){var a=0;if(this.f_dispType===0)a=this.imgPalette[0];else switch(this.f_color){case 0:a=0;break;case 1:a=65280;break;case 2:a=16711680;break;case 3:a=0;break;case 4:a=255;
break;default:a=0}var b=this.buffer,d;for(d=0;d<61440;d++)b[d]=a;a=this.pixrendered;for(d=0;d<a.length;d++)a[d]=65},sg:function(){var a,b,d=this.buffer;if(this.lh){if(this.U[0]>=0&&this.U[0]<256&&this.m[0]>=0&&this.m[0]<240){for(a=0;a<256;a++)d[(this.m[0]<<8)+a]=16733525;for(a=0;a<240;a++)d[(a<<8)+this.U[0]]=16733525}if(this.pa>=0&&this.pa<256&&this.qa>=0&&this.qa<240){for(a=0;a<256;a++)d[(this.qa<<8)+a]=5635925;for(a=0;a<240;a++)d[(a<<8)+this.pa]=5635925}}if(this.rd||this.f_bgClipping===0||this.f_spClipping===
0)for(b=0;b<240;b++)for(a=0;a<8;a++)d[(b<<8)+a]=0;if(this.rd)for(b=0;b<240;b++)for(a=0;a<8;a++)d[(b<<8)+255-a]=0;if(this.rd)for(b=0;b<8;b++)for(a=0;a<256;a++){d[(b<<8)+a]=0;d[(239-b<<8)+a]=0}this.a.D.showDisplay&&this.a.Aa.lf(d,this.Ne)},gf:function(a){this.Ma();this.f_nmiOnVblank=a>>7&1;this.f_spriteSize=a>>5&1;this.f_bgPatternTable=a>>4&1;this.f_spPatternTable=a>>3&1;this.f_addrInc=a>>2&1;this.f_nTblAddress=a&3;this.regV=a>>1&1;this.regH=a&1;this.regS=a>>4&1},hf:function(a){this.Ma();this.f_color=
a>>5&7;this.f_spVisibility=a>>4&1;this.f_bgVisibility=a>>3&1;this.f_spClipping=a>>2&1;this.f_bgClipping=a>>1&1;this.f_dispType=a&1;this.f_dispType===0&&this.sb.Nd(this.f_color);this.jf()},mc:function(a,b){var d=1<<a;this.a.f.mem[8194]=this.a.f.mem[8194]&255-d|(b?d:0)},Yg:function(){var a=this.a.f.mem[8194];this.firstWrite=f;this.mc(this.nd,j);return a},Ah:k("sramAddress"),nh:function(){return this.spriteMem[this.sramAddress]},oh:function(a){this.spriteMem[this.sramAddress]=a;this.Od(this.sramAddress,
a);this.sramAddress++;this.sramAddress%=256},eh:function(a){this.Ma();if(this.firstWrite){this.regHT=a>>3&31;this.regFH=a&7}else{this.regFV=a&7;this.regVT=a>>3&31}this.firstWrite=!this.firstWrite},Bh:function(a){if(this.firstWrite){this.regFV=a>>4&3;this.regV=a>>3&1;this.regH=a>>2&1;this.regVT=this.regVT&7|(a&3)<<3}else{this.Ma();this.regVT=this.regVT&24|a>>5&7;this.regHT=a&31;this.cntFV=this.regFV;this.cntV=this.regV;this.cntH=this.regH;this.cntVT=this.regVT;this.cntHT=this.regHT;this.Xb(this.scanline-
20)}this.firstWrite=!this.firstWrite;this.Cc()},wh:function(){var a;this.Cc();this.Ld();if(this.vramAddress<=16127){a=this.vramBufferedReadValue;this.vramBufferedReadValue=this.vramAddress<8192?this.vramMem[this.vramAddress]:this.Me(this.vramAddress);this.vramAddress+=this.f_addrInc==1?32:1;this.td();this.Kd();return a}a=this.Me(this.vramAddress);this.vramAddress+=this.f_addrInc==1?32:1;this.td();this.Kd();return a},xh:function(a){this.Ma();this.Cc();this.Ld();this.vramAddress>=8192?this.Ug(this.vramAddress,
a):this.va(this.vramAddress,a);this.vramAddress+=this.f_addrInc==1?32:1;this.Kd();this.td()},mh:function(a){a*=256;for(var b,d=this.sramAddress;d<256;d++){b=this.a.f.mem[a+d];this.spriteMem[d]=b;this.Od(d,b)}this.a.f.Fe(513)},Kd:function(){var a=this.vramTmpAddress>>8&255;this.regFV=a>>4&7;this.regV=a>>3&1;this.regH=a>>2&1;this.regVT=this.regVT&7|(a&3)<<3;a=this.vramTmpAddress&255;this.regVT=this.regVT&24|a>>5&7;this.regHT=a&31},td:function(){var a=this.vramAddress>>8&255;this.cntFV=a>>4&3;this.cntV=
a>>3&1;this.cntH=a>>2&1;this.cntVT=this.cntVT&7|(a&3)<<3;a=this.vramAddress&255;this.cntVT=this.cntVT&24|a>>5&7;this.cntHT=a&31},Ld:function(){var a=(this.regFV&7)<<4;a|=(this.regV&1)<<3;a|=(this.regH&1)<<2;a|=this.regVT>>3&3;var b=(this.regVT&7)<<5;b|=this.regHT&31;this.vramTmpAddress=(a<<8|b)&32767},Cc:function(){var a=(this.cntFV&7)<<4;a|=(this.cntV&1)<<3;a|=(this.cntH&1)<<2;a|=this.cntVT>>3&3;var b=(this.cntVT&7)<<5;b|=this.cntHT&31;this.vramAddress=(a<<8|b)&32767},Me:function(a){return this.vramMem[this.vramMirrorTable[a]]},
Ug:function(a,b){if(a>=16128&&a<16160)if(a==16128||a==16144){this.va(16128,b);this.va(16144,b)}else if(a==16132||a==16148){this.va(16132,b);this.va(16148,b)}else if(a==16136||a==16152){this.va(16136,b);this.va(16152,b)}else if(a==16140||a==16156){this.va(16140,b);this.va(16156,b)}else this.va(a,b);else a<this.vramMirrorTable.length?this.va(this.vramMirrorTable[a],b):alert("Invalid VRAM address: "+a.toString(16))},Ma:function(){if(this.scanline>=21&&this.scanline<=260){this.Ue(this.lastRenderedScanline+
1,this.scanline-21-this.lastRenderedScanline);this.lastRenderedScanline=this.scanline-21}},Ue:function(a,b){this.f_spVisibility==1&&this.Ve(a,b,f);if(this.f_bgVisibility==1){var d=a+b<<8;if(d>61440)d=61440;for(var e=this.buffer,g=this.bgbuffer,c=this.pixrendered,i=a<<8;i<d;i++)if(c[i]>255)e[i]=g[i]}this.f_spVisibility==1&&this.Ve(a,b,j);this.validTileData=j},Te:function(a,b){var d=this.regS===0?0:256,e=(b<<8)-this.regFH;this.curNt=this.ntable1[this.cntV+this.cntV+this.cntH];this.cntHT=this.regHT;
this.cntH=this.regH;this.curNt=this.ntable1[this.cntV+this.cntV+this.cntH];if(b<240&&b-this.cntFV>=0){for(var g=this.cntFV<<3,c=this.scantile,i=this.Za,l=this.F,m=this.Ga,o=this.imgPalette,q=this.pixrendered,p=a?this.bgbuffer:this.buffer,n,v,t,r=0;r<32;r++){if(b>=0){if(this.validTileData){n=c[r];v=n.T;t=i[r]}else{n=l[d+m[this.curNt].Gg(this.cntHT,this.cntVT)];v=n.T;t=m[this.curNt].wg(this.cntHT,this.cntVT);c[r]=n;i[r]=t}var s=0,w=(r<<3)-this.regFH;if(w>-8){if(w<0){e-=w;s=-w}if(n.gc[this.cntFV])for(;s<
8;s++){p[e]=o[v[g+s]+t];q[e]|=256;e++}else for(;s<8;s++){n=v[g+s];if(n!==0){p[e]=o[n+t];q[e]|=256}e++}}}if(++this.cntHT==32){this.cntHT=0;this.cntH++;this.cntH%=2;this.curNt=this.ntable1[(this.cntV<<1)+this.cntH]}}this.validTileData=f}this.cntFV++;if(this.cntFV==8){this.cntFV=0;this.cntVT++;if(this.cntVT==30){this.cntVT=0;this.cntV++;this.cntV%=2;this.curNt=this.ntable1[(this.cntV<<1)+this.cntH]}else if(this.cntVT==32)this.cntVT=0;this.validTileData=j}},Ve:function(a,b,d){if(this.f_spVisibility===
1)for(var e=0;e<64;e++)if(this.qd[e]==d&&this.U[e]>=0&&this.U[e]<256&&this.m[e]+8>=a&&this.m[e]<a+b)if(this.f_spriteSize===0){this.Pd=0;this.Qd=8;if(this.m[e]<a)this.Pd=a-this.m[e]-1;if(this.m[e]+8>a+b)this.Qd=a+b-this.m[e]+1;this.f_spPatternTable===0?this.F[this.ra[e]].Xc(this.buffer,0,this.Pd,8,this.Qd,this.U[e],this.m[e]+1,this.Nb[e],this.sprPalette,this.bb[e],this.Y[e],e,this.pixrendered):this.F[this.ra[e]+256].Xc(this.buffer,0,this.Pd,8,this.Qd,this.U[e],this.m[e]+1,this.Nb[e],this.sprPalette,
this.bb[e],this.Y[e],e,this.pixrendered)}else{var g=this.ra[e];if((g&1)!==0)g=this.ra[e]-1+256;var c=0,i=8;if(this.m[e]<a)c=a-this.m[e]-1;if(this.m[e]+8>a+b)i=a+b-this.m[e];this.F[g+(this.Y[e]?1:0)].Xc(this.buffer,0,c,8,i,this.U[e],this.m[e]+1,this.Nb[e],this.sprPalette,this.bb[e],this.Y[e],e,this.pixrendered);c=0;i=8;if(this.m[e]+8<a)c=a-(this.m[e]+8+1);if(this.m[e]+16>a+b)i=a+b-(this.m[e]+8);this.F[g+(this.Y[e]?0:1)].Xc(this.buffer,0,c,8,i,this.U[e],this.m[e]+1+8,this.Nb[e],this.sprPalette,this.bb[e],
this.Y[e],e,this.pixrendered)}},Xb:function(a){this.qa=this.pa=-1;var b,d=this.f_spPatternTable===0?0:256,e,g,c;e=this.U[0];b=this.m[0]+1;if(this.f_spriteSize===0){if(b<=a&&b+8>a&&e>=-7&&e<256){d=this.F[this.ra[0]+d];b=this.Y[0]?7-(a-b):a-b;b*=8;c=a*256+e;if(this.bb[0])for(g=7;g>=0;g--){if(e>=0&&e<256)if(c>=0&&c<61440&&this.pixrendered[c]!==0)if(d.T[b+g]!==0){this.pa=c%256;this.qa=a;return f}e++;c++}else for(g=0;g<8;g++){if(e>=0&&e<256)if(c>=0&&c<61440&&this.pixrendered[c]!==0)if(d.T[b+g]!==0){this.pa=
c%256;this.qa=a;return f}e++;c++}}}else if(b<=a&&b+16>a&&e>=-7&&e<256){b=this.Y[0]?15-(a-b):a-b;if(b<8)d=this.F[this.ra[0]+(this.Y[0]?1:0)+((this.ra[0]&1)!==0?255:0)];else{d=this.F[this.ra[0]+(this.Y[0]?0:1)+((this.ra[0]&1)!==0?255:0)];if(this.Y[0])b=15-b;else b-=8}b*=8;c=a*256+e;if(this.bb[0])for(g=7;g>=0;g--){if(e>=0&&e<256)if(c>=0&&c<61440&&this.pixrendered[c]!==0)if(d.T[b+g]!==0){this.pa=c%256;this.qa=a;return f}e++;c++}else for(g=0;g<8;g++){if(e>=0&&e<256)if(c>=0&&c<61440&&this.pixrendered[c]!==
0)if(d.T[b+g]!==0){this.pa=c%256;this.qa=a;return f}e++;c++}}return j},va:function(a,b){this.vramMem[a]=b;if(a<8192){this.vramMem[a]=b;this.Wg(a,b)}else if(a>=8192&&a<9152)this.Tc(this.ntable1[0],a-8192,b);else if(a>=9152&&a<9216)this.zc(this.ntable1[0],a-9152,b);else if(a>=9216&&a<10176)this.Tc(this.ntable1[1],a-9216,b);else if(a>=10176&&a<10240)this.zc(this.ntable1[1],a-10176,b);else if(a>=10240&&a<11200)this.Tc(this.ntable1[2],a-10240,b);else if(a>=11200&&a<11264)this.zc(this.ntable1[2],a-11200,
b);else if(a>=11264&&a<12224)this.Tc(this.ntable1[3],a-11264,b);else if(a>=12224&&a<12288)this.zc(this.ntable1[3],a-12224,b);else a>=16128&&a<16160&&this.jf()},jf:function(){var a;for(a=0;a<16;a++)this.imgPalette[a]=this.f_dispType===0?this.sb.Jc(this.vramMem[16128+a]&63):this.sb.Jc(this.vramMem[16128+a]&32);for(a=0;a<16;a++)this.sprPalette[a]=this.f_dispType===0?this.sb.Jc(this.vramMem[16144+a]&63):this.sb.Jc(this.vramMem[16144+a]&32)},Wg:function(a,b){var d=Math.floor(a/16),e=a%16;e<8?this.F[d].$c(e,
b,this.vramMem[a+8]):this.F[d].$c(e-8,this.vramMem[a-8],b)},Tc:function(a,b,d){this.Ga[a].pc[b]=d;this.Xb(this.scanline-20)},zc:function(a,b,d){this.Ga[a].zh(b,d)},Od:function(a,b){var d=Math.floor(a/4);d===0&&this.Xb(this.scanline-20);if(a%4===0)this.m[d]=b;else if(a%4==1)this.ra[d]=b;else if(a%4==2){this.Y[d]=(b&128)!==0;this.bb[d]=(b&64)!==0;this.qd[d]=(b&32)!==0;this.Nb[d]=(b&3)<<2}else if(a%4==3)this.U[d]=b},lb:["vramMem","spriteMem","cntFV","cntV","cntH","cntVT","cntHT","regFV","regV","regH",
"regVT","regHT","regFH","regS","vramAddress","vramTmpAddress","f_nmiOnVblank","f_spriteSize","f_bgPatternTable","f_spPatternTable","f_addrInc","f_nTblAddress","f_color","f_spVisibility","f_bgVisibility","f_spClipping","f_bgClipping","f_dispType","vramBufferedReadValue","firstWrite","currentMirroring","vramMirrorTable","ntable1","sramAddress","hitSpr0","sprPalette","imgPalette","curX","scanline","lastRenderedScanline","curNt","scantile","attrib","buffer","bgbuffer","pixrendered","requestEndFrame",
"nmiOk","dummyCycleToggle","nmiCounter","validTileData","scanlineAlreadyRendered"],toJSON:function(){var a,b=u.ea.toJSON(this);b.nameTable=[];for(a=0;a<this.Ga.length;a++)b.nameTable[a]=this.Ga[a].toJSON();b.ptTile=[];for(a=0;a<this.F.length;a++)b.ptTile[a]=this.F[a].toJSON();return b},u:function(a){var b;u.ea.u(this,a);for(b=0;b<this.Ga.length;b++)this.Ga[b].u(a.nameTable[b]);for(b=0;b<this.F.length;b++)this.F[b].u(a.ptTile[b]);for(b=0;b<this.spriteMem.length;b++)this.Od(b,this.spriteMem[b])}};
u.P.re=function(a,b,d){this.width=a;this.height=b;this.name=d;this.pc=Array(a*b);this.Za=Array(a*b)};
u.P.re.prototype={Gg:function(a,b){return this.pc[b*this.width+a]},wg:function(a,b){return this.Za[b*this.width+a]},zh:function(a,b){for(var d=a%8*4,e=Math.floor(a/8)*4,g,c,i,l=0;l<2;l++)for(var m=0;m<2;m++){g=b>>2*(l*2+m)&3;for(var o=0;o<2;o++)for(var q=0;q<2;q++){c=d+m*2+q;i=e+l*2+o;this.Za[i*this.width+c]=g<<2&12}}},toJSON:function(){return{tile:this.pc,attrib:this.Za}},u:function(a){this.pc=a.pc;this.Za=a.Za}};u.P.te=function(){this.Dc=Array(64);this.wd=Array(8);this.Ae=-1};
u.P.te.prototype={reset:function(){this.Nd(0)},Qg:function(){this.Dc=[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,
16308472,0,0];this.Sg();this.Nd(0)},Sg:function(){for(var a,b,d,e,g,c,i,l=0;l<8;l++){i=c=g=1;if((l&1)!==0)i=g=0.75;if((l&2)!==0)c=g=0.75;if((l&4)!==0)i=c=0.75;this.wd[l]=Array(64);for(e=0;e<64;e++){d=this.Dc[e];a=Math.floor(this.Eg(d)*g);b=Math.floor(this.zg(d)*c);d=Math.floor(this.xg(d)*i);this.wd[l][e]=this.Fg(a,b,d)}}},Nd:function(a){if(a!=this.Ae){this.Ae=a;for(var b=0;b<64;b++)this.Dc[b]=this.wd[a][b]}},Jc:function(a){return this.Dc[a]},Eg:function(a){return a>>16&255},zg:function(a){return a>>
8&255},xg:function(a){return a&255},Fg:function(a,b,d){return a<<16|b<<8|d}};u.P.od=function(){this.T=Array(64);this.Dh=this.w=this.aa=this.Lh=this.Kh=this.Hg=this.yh=this.y=this.x=this.H=this.k=h;this.Mg=j;this.gc=Array(8)};
u.P.od.prototype={$c:function(a,b,d){this.Mg=f;this.H=a<<3;for(this.x=0;this.x<8;this.x++){this.T[this.H+this.x]=(b>>7-this.x&1)+((d>>7-this.x&1)<<1);if(this.T[this.H+this.x]===0)this.gc[a]=j}},Xc:function(a,b,d,e,g,c,i,l,m,o,q,p,n){if(!(c<-7||c>=256||i<-7||i>=240)){this.yh=e-b;this.Hg=g-d;if(c<0)b-=c;if(c+e>=256)e=256-c;if(i<0)d-=i;if(i+g>=240)g=240-i;if(!o&&!q){this.k=(i<<8)+c;for(this.y=this.H=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++){if(this.x>=b&&this.x<e&&this.y>=d&&this.y<g){this.aa=
this.T[this.H];this.w=n[this.k];if(this.aa!==0&&p<=(this.w&255)){a[this.k]=m[this.aa+l];this.w=this.w&3840|p;n[this.k]=this.w}}this.k++;this.H++}this.k-=8;this.k+=256}}else if(o&&!q){this.k=(i<<8)+c;this.H=7;for(this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++){if(this.x>=b&&this.x<e&&this.y>=d&&this.y<g){this.aa=this.T[this.H];this.w=n[this.k];if(this.aa!==0&&p<=(this.w&255)){a[this.k]=m[this.aa+l];this.w=this.w&3840|p;n[this.k]=this.w}}this.k++;this.H--}this.k-=8;this.k+=256;this.H+=16}}else if(q&&
!o){this.k=(i<<8)+c;this.H=56;for(this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++){if(this.x>=b&&this.x<e&&this.y>=d&&this.y<g){this.aa=this.T[this.H];this.w=n[this.k];if(this.aa!==0&&p<=(this.w&255)){a[this.k]=m[this.aa+l];this.w=this.w&3840|p;n[this.k]=this.w}}this.k++;this.H++}this.k-=8;this.k+=256;this.H-=16}}else{this.k=(i<<8)+c;this.H=63;for(this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++){if(this.x>=b&&this.x<e&&this.y>=d&&this.y<g){this.aa=this.T[this.H];this.w=n[this.k];
if(this.aa!==0&&p<=(this.w&255)){a[this.k]=m[this.aa+l];this.w=this.w&3840|p;n[this.k]=this.w}}this.k++;this.H--}this.k-=8;this.k+=256}}}},toJSON:function(){return{opaque:this.gc,pix:this.T}},u:function(a){this.gc=a.gc;this.T=a.T}};u.ue=function(a){this.a=a;this.e=Array(92);for(a=0;a<92;a++)this.e[a]="Unknown Mapper";this.e[0]="Direct Access";this.e[1]="Nintendo MMC1";this.e[2]="UNROM";this.e[3]="CNROM";this.e[4]="Nintendo MMC3";this.e[5]="Nintendo MMC5";this.e[6]="FFE F4xxx";this.e[7]="AOROM";this.e[8]="FFE F3xxx";this.e[9]="Nintendo MMC2";this.e[10]="Nintendo MMC4";this.e[11]="Color Dreams Chip";this.e[12]="FFE F6xxx";this.e[15]="100-in-1 switch";this.e[16]="Bandai chip";this.e[17]="FFE F8xxx";this.e[18]="Jaleco SS8806 chip";
this.e[19]="Namcot 106 chip";this.e[20]="Famicom Disk System";this.e[21]="Konami VRC4a";this.e[22]="Konami VRC2a";this.e[23]="Konami VRC2a";this.e[24]="Konami VRC6";this.e[25]="Konami VRC4b";this.e[32]="Irem G-101 chip";this.e[33]="Taito TC0190/TC0350";this.e[34]="32kB ROM switch";this.e[64]="Tengen RAMBO-1 chip";this.e[65]="Irem H-3001 chip";this.e[66]="GNROM switch";this.e[67]="SunSoft3 chip";this.e[68]="SunSoft4 chip";this.e[69]="SunSoft5 FME-7 chip";this.e[71]="Camerica chip";this.e[78]="Irem 74HC161/32-based";
this.e[91]="Pirate HK-SF3 chip"};
u.ue.prototype={xc:0,tc:1,wf:2,ve:3,gg:4,ga:h,c:h,Na:h,Ab:h,A:h,t:h,ja:h,pd:h,th:h,De:h,Fa:h,ib:j,load:function(a){var b,d;if(a.indexOf("NES\u001a")===-1)this.a.Aa.updateStatus("Not a valid NES ROM.");else{this.ga=Array(16);for(b=0;b<16;b++)this.ga[b]=a.charCodeAt(b)&255;this.A=this.ga[4];this.t=this.ga[5]*2;this.ja=(this.ga[6]&1)!==0?1:0;this.pd=(this.ga[6]&2)!==0;this.th=(this.ga[6]&4)!==0;this.De=(this.ga[6]&8)!==0;this.Fa=this.ga[6]>>4|this.ga[7]&240;d=j;for(b=8;b<16;b++)if(this.ga[b]!==0){d=
f;break}if(d)this.Fa&=15;this.c=Array(this.A);var e=16;for(b=0;b<this.A;b++){this.c[b]=Array(16384);for(d=0;d<16384;d++){if(e+d>=a.length)break;this.c[b][d]=a.charCodeAt(e+d)&255}e+=16384}this.Na=Array(this.t);for(b=0;b<this.t;b++){this.Na[b]=Array(4096);for(d=0;d<4096;d++){if(e+d>=a.length)break;this.Na[b][d]=a.charCodeAt(e+d)&255}e+=4096}this.Ab=Array(this.t);for(b=0;b<this.t;b++){this.Ab[b]=Array(256);for(d=0;d<256;d++)this.Ab[b][d]=new u.P.od}for(a=0;a<this.t;a++)for(b=0;b<4096;b++){d=b>>4;e=
b%16;e<8?this.Ab[a][d].$c(e,this.Na[a][b],this.Na[a][b+8]):this.Ab[a][d].$c(e-8,this.Na[a][b-8],this.Na[a][b])}this.ib=f}},Cg:function(){if(this.De)return this.wf;if(this.ja===0)return this.tc;return this.xc},Bg:function(){if(this.Fa>=0&&this.Fa<this.e.length)return this.e[this.Fa];return"Unknown Mapper, "+this.Fa},Tg:function(){return typeof u.g[this.Fa]!=="undefined"},lg:function(){if(this.Tg())return new u.g[this.Fa](this.a);else{this.a.Aa.updateStatus("This ROM uses a mapper not supported by JSNES: "+
this.Bg()+"("+this.Fa+")");return h}}};u.vf=function(a){this.a=a;this.Ce=function(){};this.updateStatus=function(){};this.kf=function(){};this.lf=function(){}};
typeof jQuery!=="undefined"&&function(a){a.fn.fg=function(b){function d(g){var c=this;c.a=g;c.root=a("<div></div>");c.screen=a('<canvas class="nes-screen" width="256" height="240"></canvas>').appendTo(c.root);if(c.screen[0].getContext){c.bh=a('<div class="nes-roms"></div>').appendTo(c.root);c.jc=a("<select></select>").appendTo(c.bh);c.controls=a('<div class="nes-controls"></div>').appendTo(c.root);c.J={pause:a('<input type="button" value="pause" class="nes-pause" disabled="disabled">').appendTo(c.controls),
Xe:a('<input type="button" value="restart" class="nes-restart" disabled="disabled">').appendTo(c.controls),oc:a('<input type="button" value="enable sound" class="nes-enablesound">').appendTo(c.controls),zoom:a('<input type="button" value="zoom in" class="nes-zoom">').appendTo(c.controls)};c.status=a('<p class="nes-status">Booting up...</p>').appendTo(c.root);c.root.appendTo(e);c.jc.change(function(){c.Ib()});c.J.pause.click(function(){if(c.a.qb){c.a.stop();c.updateStatus("Paused");c.J.pause.attr("value",
"resume")}else{c.a.start();c.J.pause.attr("value","pause")}});c.J.Xe.click(function(){c.a.Se();c.a.start()});c.J.oc.click(function(){if(c.a.D.emulateSound){c.a.D.emulateSound=j;c.J.oc.attr("value","enable sound")}else{c.a.D.emulateSound=f;c.J.oc.attr("value","disable sound")}});c.Zd=j;c.J.zoom.click(function(){if(c.Zd){c.screen.animate({width:"256px",height:"240px"});c.J.zoom.attr("value","zoom in");c.Zd=j}else{c.screen.animate({width:"512px",height:"480px"});c.J.zoom.attr("value","zoom out");c.Zd=
f}});a.offset&&c.screen.mousedown(function(i){if(c.a.h){c.a.h.Qc=f;c.a.h.Rc=i.pageX-c.screen.offset().left;c.a.h.Sc=i.pageY-c.screen.offset().top}}).mouseup(function(){setTimeout(function(){if(c.a.h){c.a.h.Qc=j;c.a.h.Rc=0;c.a.h.Sc=0}},500)});typeof b!="undefined"&&c.ih(b);c.Wb=c.screen[0].getContext("2d");if(c.Wb.getImageData){c.Ac=c.Wb.getImageData(0,0,256,240);c.$g();a(document).bind("keydown",function(i){c.a.ec.He(i)}).bind("keyup",function(i){c.a.ec.Je(i)}).bind("keypress",function(i){c.a.ec.Ie(i)});
c.qg=new DynamicAudio({swf:g.D.swfPath+"dynamicaudio.swf"})}else e.html("Your browser doesn't support writing pixels directly to the <code>&lt;canvas&gt;</code> tag. Try the latest versions of Google Chrome, Safari, Opera or Firefox!")}else e.html("Your browser doesn't support the <code>&lt;canvas&gt;</code> tag. Try Google Chrome, Safari, Opera or Firefox!")}var e=this;d.prototype={Ib:function(){var g=this;g.updateStatus("Downloading...");a.ajax({url:escape(g.jc.val()),xhr:function(){var c=a.ajaxSettings.xhr();
typeof c.overrideMimeType!=="undefined"&&c.overrideMimeType("text/plain; charset=x-user-defined");return g.xhr=c},complete:function(c){if(u.ea.Ng()){c=JSNESBinaryToArray(c.Nh).toArray();c=String.fromCharCode.apply(undefined,c)}else c=c.responseText;g.a.Pc(c);g.a.start();g.Ce()}})},$g:function(){this.Wb.fillStyle="black";this.Wb.fillRect(0,0,256,240);for(var g=3;g<this.Ac.data.length-3;g+=4)this.Ac.data[g]=255},Ce:function(){this.J.pause.attr("disabled",h);this.a.qb?this.J.pause.attr("value","pause"):
this.J.pause.attr("value","resume");this.J.Xe.attr("disabled",h);this.a.D.emulateSound?this.J.oc.attr("value","disable sound"):this.J.oc.attr("value","enable sound")},updateStatus:function(g){this.status.text(g)},ih:function(g){this.jc.children().remove();a("<option>Select a ROM...</option>").appendTo(this.jc);for(var c in g)if(g.hasOwnProperty(c)){for(var i=a("<optgroup></optgroup>").attr("label",c),l=0;l<g[c].length;l++)a("<option>"+g[c][l][0]+"</option>").attr("value",g[c][l][1]).appendTo(i);this.jc.append(i)}},
kf:function(g){return this.qg.Qh(g)},lf:function(g,c){var i=this.Ac.data,l,m,o;for(m=0;m<61440;m++){l=g[m];if(l!=c[m]){o=m*4;i[o]=l&255;i[o+1]=l>>8&255;i[o+2]=l>>16&255;c[m]=l}}this.Wb.putImageData(this.Ac,0,0)}};return d}}(jQuery);window.$=$;$.fn.JSNESUI=$.fn.fg;window.JSNES=u;u.prototype.loadRom=u.prototype.Pc;u.prototype.start=u.prototype.start;u.prototype.frame=u.prototype.frame;u.prototype.reloadRom=u.prototype.Se;u.prototype.stop=u.prototype.stop;u.prototype.toJSON=u.prototype.toJSON;u.prototype.fromJSON=u.prototype.u;u.CPU=u.Ra;u.CPU.prototype.toJSON=u.Ra.prototype.toJSON;u.CPU.prototype.fromJSON=u.Ra.prototype.u;u.PPU=u.P;u.PPU.prototype.toJSON=u.P.prototype.toJSON;u.PPU.prototype.fromJSON=u.P.prototype.u;
u.Keyboard=u.Bb;u.Keyboard.prototype.keyDown=u.Bb.prototype.He;u.Keyboard.prototype.keyUp=u.Bb.prototype.Je;u.Keyboard.prototype.keyPress=u.Bb.prototype.Ie;u.prototype.isRunning=u.prototype.qb;u.prototype.fpsFrameCount=u.prototype.Zb;u.prototype.limitFrames=u.prototype.Cd;u.prototype.romData=u.prototype.ic;u.prototype.reset=u.prototype.reset;u.prototype.printFps=u.prototype.Id;u.prototype.resetFps=u.prototype.We;u.prototype.setFramerate=u.prototype.fh;u.prototype.setLimitFrames=u.prototype.gh;
